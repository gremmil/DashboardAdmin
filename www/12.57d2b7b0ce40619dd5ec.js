(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{KBVK:function(t,e,r){!function(t){"use strict";var e,r,n=(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,r)},function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),o=function(t){function e(e){var r,n,o,i=this.constructor,a=t.call(this,e)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),r=a,n=i.prototype,(o=Object.setPrototypeOf)?o(r,n):r.__proto__=n,function(t,e){void 0===e&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}(a),a}return n(e,t),e}(Error);class i extends o{constructor(t){super(t),this.message=t}getKind(){return this.constructor.kind}}i.kind="Exception";class a extends i{}a.kind="ArgumentException";class s extends i{}s.kind="IllegalArgumentException";class u{constructor(t){if(this.binarizer=t,null===t)throw new s("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,e){return this.binarizer.getBlackRow(t,e)}getBlackMatrix(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,e,r,n){const o=this.binarizer.getLuminanceSource().crop(t,e,r,n);return new u(this.binarizer.createBinarizer(o))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new u(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new u(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch(t){return""}}}class c extends i{static getChecksumInstance(){return new c}}c.kind="ChecksumException";class h{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class l{static arraycopy(t,e,r,n,o){for(;o--;)r[n++]=t[e++]}static currentTimeMillis(){return Date.now()}}class d extends i{}d.kind="IndexOutOfBoundsException";class f extends d{constructor(t,e){super(e),this.index=t,this.message=e}}f.kind="ArrayIndexOutOfBoundsException";class g{static fill(t,e){for(let r=0,n=t.length;r<n;r++)t[r]=e}static fillWithin(t,e,r,n){g.rangeCheck(t.length,e,r);for(let o=e;o<r;o++)t[o]=n}static rangeCheck(t,e,r){if(e>r)throw new s("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new f(e);if(r>t)throw new f(r)}static asList(...t){return t}static create(t,e,r){return Array.from({length:t}).map(t=>Array.from({length:e}).fill(r))}static createInt32Array(t,e,r){return Array.from({length:t}).map(t=>Int32Array.from({length:e}).fill(r))}static equals(t,e){if(!t)return!1;if(!e)return!1;if(!t.length)return!1;if(!e.length)return!1;if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}static hashCode(t){if(null===t)return 0;let e=1;for(const r of t)e=31*e+r;return e}static fillUint8Array(t,e){for(let r=0;r!==t.length;r++)t[r]=e}static copyOf(t,e){return t.slice(0,e)}static copyOfUint8Array(t,e){if(t.length<=e){const r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)}static copyOfRange(t,e,r){const n=r-e,o=new Int32Array(n);return l.arraycopy(t,e,o,0,n),o}static binarySearch(t,e,r){void 0===r&&(r=g.numberComparator);let n=0,o=t.length-1;for(;n<=o;){const i=o+n>>1,a=r(e,t[i]);if(a>0)n=i+1;else{if(!(a<0))return i;o=i-1}}return-n-1}static numberComparator(t,e){return t-e}}class p{static numberOfTrailingZeros(t){let e;if(0===t)return 32;let r=31;return e=t<<16,0!==e&&(r-=16,t=e),e=t<<8,0!==e&&(r-=8,t=e),e=t<<4,0!==e&&(r-=4,t=e),e=t<<2,0!==e&&(r-=2,t=e),r-(t<<1>>>31)}static numberOfLeadingZeros(t){if(0===t)return 32;let e=1;return t>>>16==0&&(e+=16,t<<=16),t>>>24==0&&(e+=8,t<<=8),t>>>28==0&&(e+=4,t<<=4),t>>>30==0&&(e+=2,t<<=2),e-=t>>>31,e}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135,63&(t+=t>>>8)+(t>>>16)}static truncDivision(t,e){return Math.trunc(t/e)}static parseInt(t,e){return parseInt(t,e)}}p.MIN_VALUE_32_BITS=-2147483648,p.MAX_VALUE=Number.MAX_SAFE_INTEGER;class w{constructor(t,e){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=null==e?w.makeArray(t):e)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>32*this.bits.length){const e=w.makeArray(t);l.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}}get(t){return 0!=(this.bits[Math.floor(t/32)]&1<<(31&t))}set(t){this.bits[Math.floor(t/32)]|=1<<(31&t)}flip(t){this.bits[Math.floor(t/32)]^=1<<(31&t)}getNextSet(t){const e=this.size;if(t>=e)return e;const r=this.bits;let n=Math.floor(t/32),o=r[n];o&=~((1<<(31&t))-1);const i=r.length;for(;0===o;){if(++n===i)return e;o=r[n]}const a=32*n+p.numberOfTrailingZeros(o);return a>e?e:a}getNextUnset(t){const e=this.size;if(t>=e)return e;const r=this.bits;let n=Math.floor(t/32),o=~r[n];o&=~((1<<(31&t))-1);const i=r.length;for(;0===o;){if(++n===i)return e;o=~r[n]}const a=32*n+p.numberOfTrailingZeros(o);return a>e?e:a}setBulk(t,e){this.bits[Math.floor(t/32)]=e}setRange(t,e){if(e<t||t<0||e>this.size)throw new s;if(e===t)return;e--;const r=Math.floor(t/32),n=Math.floor(e/32),o=this.bits;for(let i=r;i<=n;i++)o[i]|=(2<<(i<n?31:31&e))-(1<<(i>r?0:31&t))}clear(){const t=this.bits.length,e=this.bits;for(let r=0;r<t;r++)e[r]=0}isRange(t,e,r){if(e<t||t<0||e>this.size)throw new s;if(e===t)return!0;e--;const n=Math.floor(t/32),o=Math.floor(e/32),i=this.bits;for(let a=n;a<=o;a++){const s=(2<<(a<o?31:31&e))-(1<<(a>n?0:31&t))&4294967295;if((i[a]&s)!==(r?s:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(t,e){if(e<0||e>32)throw new s("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(let r=e;r>0;r--)this.appendBit(1==(t>>r-1&1))}appendBitArray(t){const e=t.size;this.ensureCapacity(this.size+e);for(let r=0;r<e;r++)this.appendBit(t.get(r))}xor(t){if(this.size!==t.size)throw new s("Sizes don't match");const e=this.bits;for(let r=0,n=e.length;r<n;r++)e[r]^=t.bits[r]}toBytes(t,e,r,n){for(let o=0;o<n;o++){let n=0;for(let e=0;e<8;e++)this.get(t)&&(n|=1<<7-e),t++;e[r+o]=n}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,n=this.bits;for(let o=0;o<r;o++){let r=n[o];r=r>>1&1431655765|(1431655765&r)<<1,r=r>>2&858993459|(858993459&r)<<2,r=r>>4&252645135|(252645135&r)<<4,r=r>>8&16711935|(16711935&r)<<8,r=r>>16&65535|(65535&r)<<16,t[e-o]=r}if(this.size!==32*r){const e=32*r-this.size;let n=t[0]>>>e;for(let o=1;o<r;o++){const r=t[o];n|=r<<32-e,t[o-1]=n,n=r>>>e}t[r-1]=n}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){return t instanceof w&&this.size===t.size&&g.equals(this.bits,t.bits)}hashCode(){return 31*this.size+g.hashCode(this.bits)}toString(){let t="";for(let e=0,r=this.size;e<r;e++)0==(7&e)&&(t+=" "),t+=this.get(e)?"X":".";return t}clone(){return new w(this.size,this.bits.slice())}}!function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ASSUME_GS1=7]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(r||(r={}));var m,A=r;class _ extends i{static getFormatInstance(){return new _}}_.kind="FormatException",function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"}(m||(m={}));class C{constructor(t,e,r,...n){this.valueIdentifier=t,this.name=r,this.values="number"==typeof e?Int32Array.from([e]):e,this.otherEncodingNames=n,C.VALUE_IDENTIFIER_TO_ECI.set(t,this),C.NAME_TO_ECI.set(r,this);const o=this.values;for(let i=0,a=o.length;i!==a;i++)C.VALUES_TO_ECI.set(o[i],this);for(const i of n)C.NAME_TO_ECI.set(i,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new _("incorect value");const e=C.VALUES_TO_ECI.get(t);if(void 0===e)throw new _("incorect value");return e}static getCharacterSetECIByName(t){const e=C.NAME_TO_ECI.get(t);if(void 0===e)throw new _("incorect value");return e}equals(t){if(!(t instanceof C))return!1;const e=t;return this.getName()===e.getName()}}C.VALUE_IDENTIFIER_TO_ECI=new Map,C.VALUES_TO_ECI=new Map,C.NAME_TO_ECI=new Map,C.Cp437=new C(m.Cp437,Int32Array.from([0,2]),"Cp437"),C.ISO8859_1=new C(m.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),C.ISO8859_2=new C(m.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),C.ISO8859_3=new C(m.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),C.ISO8859_4=new C(m.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),C.ISO8859_5=new C(m.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),C.ISO8859_6=new C(m.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),C.ISO8859_7=new C(m.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),C.ISO8859_8=new C(m.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),C.ISO8859_9=new C(m.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),C.ISO8859_10=new C(m.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),C.ISO8859_11=new C(m.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),C.ISO8859_13=new C(m.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),C.ISO8859_14=new C(m.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),C.ISO8859_15=new C(m.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),C.ISO8859_16=new C(m.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),C.SJIS=new C(m.SJIS,20,"SJIS","Shift_JIS"),C.Cp1250=new C(m.Cp1250,21,"Cp1250","windows-1250"),C.Cp1251=new C(m.Cp1251,22,"Cp1251","windows-1251"),C.Cp1252=new C(m.Cp1252,23,"Cp1252","windows-1252"),C.Cp1256=new C(m.Cp1256,24,"Cp1256","windows-1256"),C.UnicodeBigUnmarked=new C(m.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),C.UTF8=new C(m.UTF8,26,"UTF8","UTF-8"),C.ASCII=new C(m.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),C.Big5=new C(m.Big5,28,"Big5"),C.GB18030=new C(m.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),C.EUC_KR=new C(m.EUC_KR,30,"EUC_KR","EUC-KR");class E extends i{}E.kind="UnsupportedOperationException";class y{static decode(t,e){const r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)}static shouldDecodeOnFallback(t){return!y.isBrowser()&&"ISO-8859-1"===t}static encode(t,e){const r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):"undefined"==typeof TextEncoder?this.encodeFallback(t):(new TextEncoder).encode(t)}static isBrowser(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(t){return"string"==typeof t?t:t.getName()}static encodingCharacterSet(t){return t instanceof C?t:C.getCharacterSetECIByName(t)}static decodeFallback(t,e){const r=this.encodingCharacterSet(e);if(y.isDecodeFallbackSupported(r)){let e="";for(let r=0,n=t.length;r<n;r++){let n=t[r].toString(16);n.length<2&&(n="0"+n),e+="%"+n}return decodeURIComponent(e)}if(r.equals(C.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new E(`Encoding ${this.encodingName(e)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(C.UTF8)||t.equals(C.ISO8859_1)||t.equals(C.ASCII)}static encodeFallback(t){const e=btoa(unescape(encodeURIComponent(t))).split(""),r=[];for(let n=0;n<e.length;n++)r.push(e[n].charCodeAt(0));return new Uint8Array(r)}}class I{static castAsNonUtf8Char(t,e=null){const r=e?e.getName():this.ISO88591;return y.decode(new Uint8Array([t]),r)}static guessEncoding(t,e){if(null!=e&&void 0!==e.get(A.CHARACTER_SET))return e.get(A.CHARACTER_SET).toString();const r=t.length;let n=!0,o=!0,i=!0,a=0,s=0,u=0,c=0,h=0,l=0,d=0,f=0,g=0,p=0,w=0;const m=t.length>3&&239===t[0]&&187===t[1]&&191===t[2];for(let A=0;A<r&&(n||o||i);A++){const e=255&t[A];i&&(a>0?0==(128&e)?i=!1:a--:0!=(128&e)&&(0==(64&e)?i=!1:(a++,0==(32&e)?s++:(a++,0==(16&e)?u++:(a++,0==(8&e)?c++:i=!1))))),n&&(e>127&&e<160?n=!1:e>159&&(e<192||215===e||247===e)&&w++),o&&(h>0?e<64||127===e||e>252?o=!1:h--:128===e||160===e||e>239?o=!1:e>160&&e<224?(l++,f=0,d++,d>g&&(g=d)):e>127?(h++,d=0,f++,f>p&&(p=f)):(d=0,f=0))}return i&&a>0&&(i=!1),o&&h>0&&(o=!1),i&&(m||s+u+c>0)?I.UTF8:o&&(I.ASSUME_SHIFT_JIS||g>=3||p>=3)?I.SHIFT_JIS:n&&o?2===g&&2===l||10*w>=r?I.SHIFT_JIS:I.ISO88591:n?I.ISO88591:o?I.SHIFT_JIS:i?I.UTF8:I.PLATFORM_DEFAULT_ENCODING}static format(t,...e){let r=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(t,n,o,i,a,s){if("%%"===t)return"%";if(void 0===e[++r])return;t=i?parseInt(i.substr(1)):void 0;let u,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":u=e[r];break;case"c":u=e[r][0];break;case"f":u=parseFloat(e[r]).toFixed(t);break;case"p":u=parseFloat(e[r]).toPrecision(t);break;case"e":u=parseFloat(e[r]).toExponential(t);break;case"x":u=parseInt(e[r]).toString(c||16);break;case"d":u=parseFloat(parseInt(e[r],c||10).toPrecision(t)).toFixed(0)}u="object"==typeof u?JSON.stringify(u):(+u).toString(c);let h=parseInt(o),l=o&&o[0]+""=="0"?"0":" ";for(;u.length<h;)u=void 0!==n?u+l:l+u;return u})}static getBytes(t,e){return y.encode(t,e)}static getCharCode(t,e=0){return t.charCodeAt(e)}static getCharAt(t){return String.fromCharCode(t)}}I.SHIFT_JIS=C.SJIS.getName(),I.GB2312="GB2312",I.ISO88591=C.ISO8859_1.getName(),I.EUC_JP="EUC_JP",I.UTF8=C.UTF8.getName(),I.PLATFORM_DEFAULT_ENCODING=I.UTF8,I.ASSUME_SHIFT_JIS=!1;class S{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return this.value+="string"==typeof t?t.toString():this.encoding?I.castAsNonUtf8Char(t,this.encoding):String.fromCharCode(t),this}appendChars(t,e,r){for(let n=e;e<e+r;n++)this.append(t[n]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)}substring(t,e){return this.value.substring(t,e)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+e.length)}}class v{constructor(t,e,r,n){if(this.width=t,this.height=e,this.rowSize=r,this.bits=n,null==e&&(e=t),this.height=e,t<1||e<1)throw new s("Both dimensions must be greater than 0");null==r&&(r=Math.floor((t+31)/32)),this.rowSize=r,null==n&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const e=t.length,r=t[0].length,n=new v(r,e);for(let o=0;o<e;o++){const e=t[o];for(let t=0;t<r;t++)e[t]&&n.set(t,o)}return n}static parseFromString(t,e,r){if(null===t)throw new s("stringRepresentation cannot be null");const n=new Array(t.length);let o=0,i=0,a=-1,u=0,c=0;for(;c<t.length;)if("\n"===t.charAt(c)||"\r"===t.charAt(c)){if(o>i){if(-1===a)a=o-i;else if(o-i!==a)throw new s("row lengths do not match");i=o,u++}c++}else if(t.substring(c,c+e.length)===e)c+=e.length,n[o]=!0,o++;else{if(t.substring(c,c+r.length)!==r)throw new s("illegal character encountered: "+t.substring(c));c+=r.length,n[o]=!1,o++}if(o>i){if(-1===a)a=o-i;else if(o-i!==a)throw new s("row lengths do not match");u++}const h=new v(a,u);for(let s=0;s<o;s++)n[s]&&h.set(Math.floor(s%a),Math.floor(s/a));return h}get(t,e){const r=e*this.rowSize+Math.floor(t/32);return 0!=(this.bits[r]>>>(31&t)&1)}set(t,e){const r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(31&t)&4294967295}unset(t,e){const r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(31&t)&4294967295)}flip(t,e){const r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(31&t)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new s("input matrix dimensions do not match");const e=new w(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits;for(let o=0,i=this.height;o<i;o++){const i=o*r,a=t.getRow(o,e).getBitArray();for(let t=0;t<r;t++)n[i+t]^=a[t]}}clear(){const t=this.bits,e=t.length;for(let r=0;r<e;r++)t[r]=0}setRegion(t,e,r,n){if(e<0||t<0)throw new s("Left and top must be nonnegative");if(n<1||r<1)throw new s("Height and width must be at least 1");const o=t+r,i=e+n;if(i>this.height||o>this.width)throw new s("The region must fit inside the matrix");const a=this.rowSize,u=this.bits;for(let s=e;s<i;s++){const e=s*a;for(let r=t;r<o;r++)u[e+Math.floor(r/32)]|=1<<(31&r)&4294967295}}getRow(t,e){null==e||e.getSize()<this.width?e=new w(this.width):e.clear();const r=this.rowSize,n=this.bits,o=t*r;for(let i=0;i<r;i++)e.setBulk(32*i,n[o+i]);return e}setRow(t,e){l.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),e=this.getHeight();let r=new w(t),n=new w(t);for(let o=0,i=Math.floor((e+1)/2);o<i;o++)r=this.getRow(o,r),n=this.getRow(e-1-o,n),r.reverse(),n.reverse(),this.setRow(o,n),this.setRow(e-1-o,r)}getEnclosingRectangle(){const t=this.height,e=this.rowSize,r=this.bits;let n=this.width,o=t,i=-1,a=-1;for(let s=0;s<t;s++)for(let t=0;t<e;t++){const u=r[s*e+t];if(0!==u){if(s<o&&(o=s),s>a&&(a=s),32*t<n){let e=0;for(;0==(u<<31-e&4294967295);)e++;32*t+e<n&&(n=32*t+e)}if(32*t+31>i){let e=31;for(;u>>>e==0;)e--;32*t+e>i&&(i=32*t+e)}}}return i<n||a<o?null:Int32Array.from([n,o,i-n+1,a-o+1])}getTopLeftOnBit(){const t=this.rowSize,e=this.bits;let r=0;for(;r<e.length&&0===e[r];)r++;if(r===e.length)return null;const n=r/t;let o=r%t*32;const i=e[r];let a=0;for(;0==(i<<31-a&4294967295);)a++;return o+=a,Int32Array.from([o,n])}getBottomRightOnBit(){const t=this.rowSize,e=this.bits;let r=e.length-1;for(;r>=0&&0===e[r];)r--;if(r<0)return null;const n=Math.floor(r/t);let o=32*Math.floor(r%t);const i=e[r];let a=31;for(;i>>>a==0;)a--;return o+=a,Int32Array.from([o,n])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){return t instanceof v&&this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&g.equals(this.bits,t.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+g.hashCode(this.bits),t}toString(t="X ",e="  ",r="\n"){return this.buildToString(t,e,r)}buildToString(t,e,r){let n=new S;for(let o=0,i=this.height;o<i;o++){for(let r=0,i=this.width;r<i;r++)n.append(this.get(r,o)?t:e);n.append(r)}return n.toString()}clone(){return new v(this.width,this.height,this.rowSize,this.bits.slice())}}class T extends i{static getNotFoundInstance(){return new T}}T.kind="NotFoundException";class R extends h{constructor(t){super(t),this.luminances=R.EMPTY,this.buckets=new Int32Array(R.LUMINANCE_BUCKETS)}getBlackRow(t,e){const r=this.getLuminanceSource(),n=r.getWidth();null==e||e.getSize()<n?e=new w(n):e.clear(),this.initArrays(n);const o=r.getRow(t,this.luminances),i=this.buckets;for(let s=0;s<n;s++)i[(255&o[s])>>R.LUMINANCE_SHIFT]++;const a=R.estimateBlackPoint(i);if(n<3)for(let s=0;s<n;s++)(255&o[s])<a&&e.set(s);else{let t=255&o[0],r=255&o[1];for(let i=1;i<n-1;i++){const n=255&o[i+1];(4*r-t-n)/2<a&&e.set(i),t=r,r=n}}return e}getBlackMatrix(){const t=this.getLuminanceSource(),e=t.getWidth(),r=t.getHeight(),n=new v(e,r);this.initArrays(e);const o=this.buckets;for(let s=1;s<5;s++){const n=Math.floor(r*s/5),i=t.getRow(n,this.luminances),a=Math.floor(4*e/5);for(let t=Math.floor(e/5);t<a;t++)o[(255&i[t])>>R.LUMINANCE_SHIFT]++}const i=R.estimateBlackPoint(o),a=t.getMatrix();for(let s=0;s<r;s++){const t=s*e;for(let r=0;r<e;r++)(255&a[t+r])<i&&n.set(r,s)}return n}createBinarizer(t){return new R(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const e=this.buckets;for(let r=0;r<R.LUMINANCE_BUCKETS;r++)e[r]=0}static estimateBlackPoint(t){const e=t.length;let r=0,n=0,o=0;for(let c=0;c<e;c++)t[c]>o&&(n=c,o=t[c]),t[c]>r&&(r=t[c]);let i=0,a=0;for(let c=0;c<e;c++){const e=c-n,r=t[c]*e*e;r>a&&(i=c,a=r)}if(n>i){const t=n;n=i,i=t}if(i-n<=e/16)throw new T;let s=i-1,u=-1;for(let c=i-1;c>n;c--){const e=c-n,o=e*e*(i-c)*(r-t[c]);o>u&&(s=c,u=o)}return s<<R.LUMINANCE_SHIFT}}R.LUMINANCE_BITS=5,R.LUMINANCE_SHIFT=8-R.LUMINANCE_BITS,R.LUMINANCE_BUCKETS=1<<R.LUMINANCE_BITS,R.EMPTY=Uint8ClampedArray.from([0]);class O extends R{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const t=this.getLuminanceSource(),e=t.getWidth(),r=t.getHeight();if(e>=O.MINIMUM_DIMENSION&&r>=O.MINIMUM_DIMENSION){const n=t.getMatrix();let o=e>>O.BLOCK_SIZE_POWER;0!=(e&O.BLOCK_SIZE_MASK)&&o++;let i=r>>O.BLOCK_SIZE_POWER;0!=(r&O.BLOCK_SIZE_MASK)&&i++;const a=O.calculateBlackPoints(n,o,i,e,r),s=new v(e,r);O.calculateThresholdForBlock(n,o,i,e,r,a,s),this.matrix=s}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new O(t)}static calculateThresholdForBlock(t,e,r,n,o,i,a){const s=o-O.BLOCK_SIZE,u=n-O.BLOCK_SIZE;for(let c=0;c<r;c++){let o=c<<O.BLOCK_SIZE_POWER;o>s&&(o=s);const h=O.cap(c,2,r-3);for(let r=0;r<e;r++){let s=r<<O.BLOCK_SIZE_POWER;s>u&&(s=u);const c=O.cap(r,2,e-3);let l=0;for(let t=-2;t<=2;t++){const e=i[h+t];l+=e[c-2]+e[c-1]+e[c]+e[c+1]+e[c+2]}O.thresholdBlock(t,s,o,l/25,n,a)}}}static cap(t,e,r){return t<e?e:t>r?r:t}static thresholdBlock(t,e,r,n,o,i){for(let a=0,s=r*o+e;a<O.BLOCK_SIZE;a++,s+=o)for(let o=0;o<O.BLOCK_SIZE;o++)(255&t[s+o])<=n&&i.set(e+o,r+a)}static calculateBlackPoints(t,e,r,n,o){const i=o-O.BLOCK_SIZE,a=n-O.BLOCK_SIZE,s=new Array(r);for(let u=0;u<r;u++){s[u]=new Int32Array(e);let r=u<<O.BLOCK_SIZE_POWER;r>i&&(r=i);for(let o=0;o<e;o++){let e=o<<O.BLOCK_SIZE_POWER;e>a&&(e=a);let i=0,c=255,h=0;for(let o=0,a=r*n+e;o<O.BLOCK_SIZE;o++,a+=n){for(let e=0;e<O.BLOCK_SIZE;e++){const r=255&t[a+e];i+=r,r<c&&(c=r),r>h&&(h=r)}if(h-c>O.MIN_DYNAMIC_RANGE)for(o++,a+=n;o<O.BLOCK_SIZE;o++,a+=n)for(let e=0;e<O.BLOCK_SIZE;e++)i+=255&t[a+e]}let l=i>>2*O.BLOCK_SIZE_POWER;if(h-c<=O.MIN_DYNAMIC_RANGE&&(l=c/2,u>0&&o>0)){const t=(s[u-1][o]+2*s[u][o-1]+s[u-1][o-1])/4;c<t&&(l=t)}s[u][o]=l}}return s}}O.BLOCK_SIZE_POWER=3,O.BLOCK_SIZE=1<<O.BLOCK_SIZE_POWER,O.BLOCK_SIZE_MASK=O.BLOCK_SIZE-1,O.MINIMUM_DIMENSION=5*O.BLOCK_SIZE,O.MIN_DYNAMIC_RANGE=24;class N{constructor(t,e){this.width=t,this.height=e}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,e,r,n){throw new E("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new E("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new E("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let e=new S;for(let r=0;r<this.height;r++){const n=this.getRow(r,t);for(let t=0;t<this.width;t++){const r=255&n[t];let o;o=r<64?"#":r<128?"+":r<192?".":" ",e.append(o)}e.append("\n")}return e.toString()}}class b extends N{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,e){const r=this.delegate.getRow(t,e),n=this.getWidth();for(let o=0;o<n;o++)r[o]=255-(255&r[o]);return r}getMatrix(){const t=this.delegate.getMatrix(),e=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(e);for(let n=0;n<e;n++)r[n]=255-(255&t[n]);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(t,e,r,n){return new b(this.delegate.crop(t,e,r,n))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new b(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new b(this.delegate.rotateCounterClockwise45())}}class D extends N{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=D.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const e=t.getContext("2d").getImageData(0,0,t.width,t.height);return D.toGrayscaleBuffer(e.data,t.width,t.height)}static toGrayscaleBuffer(t,e,r){const n=new Uint8ClampedArray(e*r);for(let o=0,i=0,a=t.length;o<a;o+=4,i++){let e;e=0===t[o+3]?255:306*t[o]+601*t[o+1]+117*t[o+2]+512>>10,n[i]=e}return n}getRow(t,e){if(t<0||t>=this.getHeight())throw new s("Requested row is outside the image: "+t);const r=this.getWidth(),n=t*r;return null===e?e=this.buffer.slice(n,n+r):(e.length<r&&(e=new Uint8ClampedArray(r)),e.set(this.buffer.slice(n,n+r))),e}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,e,r,n){return super.crop(t,e,r,n),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const e=this.getTempCanvasElement(),r=e.getContext("2d"),n=t*D.DEGREE_TO_RADIANS,o=this.canvas.width,i=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(n))*o+Math.abs(Math.sin(n))*i),s=Math.ceil(Math.abs(Math.sin(n))*o+Math.abs(Math.cos(n))*i);return e.width=a,e.height=s,r.translate(a/2,s/2),r.rotate(n),r.drawImage(this.canvas,o/-2,i/-2),this.buffer=D.makeBufferFromCanvasImageData(e),this}invert(){return new b(this)}}D.DEGREE_TO_RADIANS=Math.PI/180;class M{constructor(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var P,B=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__awaiter:void 0)||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(e){i(e)}}function s(t){try{u(n.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})};class L{constructor(t,e=500,r){this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!=typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return B(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),e=[];for(const r of t){const t="video"===r.kind?"videoinput":r.kind;"videoinput"===t&&e.push({deviceId:r.deviceId||r.id,label:r.label||`Video device ${e.length+1}`,kind:t,groupId:r.groupId})}return e})}getVideoInputDevices(){return B(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new M(t.deviceId,t.label))})}findDeviceById(t){return B(this,void 0,void 0,function*(){const e=yield this.listVideoInputDevices();return e?e.find(e=>e.deviceId===t):null})}decodeFromInputVideoDevice(t,e){return B(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,e)})}decodeOnceFromVideoDevice(t,e){return B(this,void 0,void 0,function*(){let r;this.reset(),r=t?{deviceId:{exact:t}}:{facingMode:"environment"};const n={video:r};return yield this.decodeOnceFromConstraints(n,e)})}decodeOnceFromConstraints(t,e){return B(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(r,e)})}decodeOnceFromStream(t,e){return B(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(t,e);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(t,e,r){return B(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,e,r)})}decodeFromVideoDevice(t,e,r){return B(this,void 0,void 0,function*(){let n;n=t?{deviceId:{exact:t}}:{facingMode:"environment"};const o={video:n};return yield this.decodeFromConstraints(o,e,r)})}decodeFromConstraints(t,e,r){return B(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(n,e,r)})}decodeFromStream(t,e,r){return B(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(t,e);return yield this.decodeContinuously(n,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,e){return B(this,void 0,void 0,function*(){const r=this.prepareVideoElement(e);return this.addVideoSource(r,t),this.videoElement=r,this.stream=t,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(t){return new Promise((e,r)=>this.playVideoOnLoad(t,()=>e()))}playVideoOnLoad(t,e){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return B(this,void 0,void 0,function*(){if(this.isVideoPlaying(t))console.warn("Trying to play video that is already playing.");else try{yield t.play()}catch(e){console.warn("It was not possible to play the video.")}})}getMediaElement(t,e){const r=document.getElementById(t);if(!r)throw new a(`element with id '${t}' not found`);if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new a(`element with id '${t}' must be an ${e} element`);return r}decodeFromImage(t,e){if(!t&&!e)throw new a("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)}decodeFromVideo(t,e){if(!t&&!e)throw new a("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,e,r){if(void 0===t&&void 0===e)throw new a("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)}decodeFromImageElement(t){if(!t)throw new a("An image element must be provided.");this.reset();const e=this.prepareImageElement(t);let r;return this.imageElement=e,r=this.isImageLoaded(e)?this.decodeOnce(e,!1,!0):this._decodeOnLoadImage(e),r}decodeFromVideoElement(t){const e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)}decodeFromVideoElementContinuously(t,e){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)}_decodeFromVideoElementSetup(t){if(!t)throw new a("A video element must be provided.");this.reset();const e=this.prepareVideoElement(t);return this.videoElement=e,e}decodeFromImageUrl(t){if(!t)throw new a("An URL must be provided.");this.reset();const e=this.prepareImageElement();this.imageElement=e;const r=this._decodeOnLoadImage(e);return e.src=t,r}decodeFromVideoUrl(t){if(!t)throw new a("An URL must be provided.");this.reset();const e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r}decodeFromVideoUrlContinuously(t,e){if(!t)throw new a("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,e);return r.src=t,n}_decodeOnLoadImage(t){return new Promise((e,r)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(e,r),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return B(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,e){return B(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,e)})}isImageLoaded(t){return!!t.complete&&0!==t.naturalWidth}prepareImageElement(t){let e;return void 0===t&&(e=document.createElement("img"),e.width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e}prepareVideoElement(t){let e;return t||"undefined"==typeof document||(e=document.createElement("video"),e.width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e}decodeOnce(t,e=!0,r=!0){this._stopAsyncDecode=!1;const n=(o,i)=>{if(this._stopAsyncDecode)return i(new T("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{o(this.decode(t))}catch(a){const t=(a instanceof c||a instanceof _)&&r;if(e&&a instanceof T||t)return setTimeout(n,this._timeBetweenDecodingAttempts,o,i);i(a)}};return new Promise((t,e)=>n(t,e))}decodeContinuously(t,e){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const n=this.decode(t);e(n,null),setTimeout(r,this.timeBetweenScansMillis)}catch(n){e(null,n);const t=n instanceof T;(n instanceof c||n instanceof _||t)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(t){const e=this.createBinaryBitmap(t);return this.decodeBitmap(e)}createBinaryBitmap(t){const e=this.getCaptureCanvasContext(t);this.drawImageOnCanvas(e,t);const r=this.getCaptureCanvas(t),n=new D(r),o=new O(n);return new u(o)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const e=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=e}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas}drawImageOnCanvas(t,e){t.drawImage(e,0,0)}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;const e=document.createElement("canvas");let r,n;return void 0!==t&&(t instanceof HTMLVideoElement?(r=t.videoWidth,n=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,n=t.naturalHeight||t.height)),e.style.width=r+"px",e.style.height=n+"px",e.width=r,e.height=n,e}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,e){try{t.srcObject=e}catch(r){t.src=URL.createObjectURL(e)}}cleanVideoSource(t){try{t.srcObject=null}catch(e){t.src=""}this.videoElement.removeAttribute("src")}}class F{constructor(t,e,r=(null==e?0:8*e.length),n,o,i=l.currentTimeMillis()){this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=n,this.format=o,this.timestamp=i,this.text=t,this.rawBytes=e,this.numBits=null==r?null==e?0:8*e.length:r,this.resultPoints=n,this.format=o,this.resultMetadata=null,this.timestamp=null==i?l.currentTimeMillis():i}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,e){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)}putAllMetadata(t){null!==t&&(this.resultMetadata=null===this.resultMetadata?t:new Map(t))}addResultPoints(t){const e=this.resultPoints;if(null===e)this.resultPoints=t;else if(null!==t&&t.length>0){const r=new Array(e.length+t.length);l.arraycopy(e,0,r,0,e.length),l.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(P||(P={}));var k,x=P;!function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(k||(k={}));var V,U,H,G,X,W,z=k;class Y{constructor(t,e,r,n,o=-1,i=-1){this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=i,this.numBits=null==t?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Z{exp(t){return this.expTable[t]}log(t){if(0===t)throw new s;return this.logTable[t]}static addOrSubtract(t,e){return t^e}}class j{constructor(t,e){if(0===e.length)throw new s;this.field=t;const r=e.length;if(r>1&&0===e[0]){let t=1;for(;t<r&&0===e[t];)t++;t===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-t),l.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);const e=this.coefficients;let r;if(1===t){r=0;for(let t=0,n=e.length;t!==n;t++)r=Z.addOrSubtract(r,e[t]);return r}r=e[0];const n=e.length,o=this.field;for(let i=1;i<n;i++)r=Z.addOrSubtract(o.multiply(t,r),e[i]);return r}addOrSubtract(t){if(!this.field.equals(t.field))throw new s("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,r=t.coefficients;if(e.length>r.length){const t=e;e=r,r=t}let n=new Int32Array(r.length);const o=r.length-e.length;l.arraycopy(r,0,n,0,o);for(let i=o;i<r.length;i++)n[i]=Z.addOrSubtract(e[i-o],r[i]);return new j(this.field,n)}multiply(t){if(!this.field.equals(t.field))throw new s("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const e=this.coefficients,r=e.length,n=t.coefficients,o=n.length,i=new Int32Array(r+o-1),a=this.field;for(let s=0;s<r;s++){const t=e[s];for(let e=0;e<o;e++)i[s+e]=Z.addOrSubtract(i[s+e],a.multiply(t,n[e]))}return new j(a,i)}multiplyScalar(t){if(0===t)return this.field.getZero();if(1===t)return this;const e=this.coefficients.length,r=this.field,n=new Int32Array(e),o=this.coefficients;for(let i=0;i<e;i++)n[i]=r.multiply(o[i],t);return new j(r,n)}multiplyByMonomial(t,e){if(t<0)throw new s;if(0===e)return this.field.getZero();const r=this.coefficients,n=r.length,o=new Int32Array(n+t),i=this.field;for(let a=0;a<n;a++)o[a]=i.multiply(r[a],e);return new j(i,o)}divide(t){if(!this.field.equals(t.field))throw new s("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new s("Divide by 0");const e=this.field;let r=e.getZero(),n=this;const o=t.getCoefficient(t.getDegree()),i=e.inverse(o);for(;n.getDegree()>=t.getDegree()&&!n.isZero();){const o=n.getDegree()-t.getDegree(),a=e.multiply(n.getCoefficient(n.getDegree()),i),s=t.multiplyByMonomial(o,a),u=e.buildMonomial(o,a);r=r.addOrSubtract(u),n=n.addOrSubtract(s)}return[r,n]}toString(){let t="";for(let e=this.getDegree();e>=0;e--){let r=this.getCoefficient(e);if(0!==r){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),0===e||1!==r){const e=this.field.log(r);0===e?t+="1":1===e?t+="a":(t+="a^",t+=e)}0!==e&&(1===e?t+="x":(t+="x^",t+=e))}}return t}}class K extends i{}K.kind="ArithmeticException";class q extends Z{constructor(t,e,r){super(),this.primitive=t,this.size=e,this.generatorBase=r;const n=new Int32Array(e);let o=1;for(let a=0;a<e;a++)n[a]=o,o*=2,o>=e&&(o^=t,o&=e-1);this.expTable=n;const i=new Int32Array(e);for(let a=0;a<e-1;a++)i[n[a]]=a;this.logTable=i,this.zero=new j(this,Int32Array.from([0])),this.one=new j(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new s;if(0===e)return this.zero;const r=new Int32Array(t+1);return r[0]=e,new j(this,r)}inverse(t){if(0===t)throw new K;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+p.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}q.AZTEC_DATA_12=new q(4201,4096,1),q.AZTEC_DATA_10=new q(1033,1024,1),q.AZTEC_DATA_6=new q(67,64,1),q.AZTEC_PARAM=new q(19,16,1),q.QR_CODE_FIELD_256=new q(285,256,0),q.DATA_MATRIX_FIELD_256=new q(301,256,1),q.AZTEC_DATA_8=q.DATA_MATRIX_FIELD_256,q.MAXICODE_FIELD_64=q.AZTEC_DATA_6;class Q extends i{}Q.kind="ReedSolomonException";class J extends i{}J.kind="IllegalStateException";class ${constructor(t){this.field=t}decode(t,e){const r=this.field,n=new j(r,t),o=new Int32Array(e);let i=!0;for(let l=0;l<e;l++){const t=n.evaluateAt(r.exp(l+r.getGeneratorBase()));o[o.length-1-l]=t,0!==t&&(i=!1)}if(i)return;const a=new j(r,o),s=this.runEuclideanAlgorithm(r.buildMonomial(e,1),a,e),u=s[1],c=this.findErrorLocations(s[0]),h=this.findErrorMagnitudes(u,c);for(let l=0;l<c.length;l++){const e=t.length-1-r.log(c[l]);if(e<0)throw new Q("Bad error location");t[e]=q.addOrSubtract(t[e],h[l])}}runEuclideanAlgorithm(t,e,r){if(t.getDegree()<e.getDegree()){const r=t;t=e,e=r}const n=this.field;let o=t,i=e,a=n.getZero(),s=n.getOne();for(;i.getDegree()>=(r/2|0);){let t=o,e=a;if(o=i,a=s,o.isZero())throw new Q("r_{i-1} was zero");i=t;let r=n.getZero();const u=o.getCoefficient(o.getDegree()),c=n.inverse(u);for(;i.getDegree()>=o.getDegree()&&!i.isZero();){const t=i.getDegree()-o.getDegree(),e=n.multiply(i.getCoefficient(i.getDegree()),c);r=r.addOrSubtract(n.buildMonomial(t,e)),i=i.addOrSubtract(o.multiplyByMonomial(t,e))}if(s=r.multiply(a).addOrSubtract(e),i.getDegree()>=o.getDegree())throw new J("Division algorithm failed to reduce polynomial?")}const u=s.getCoefficient(0);if(0===u)throw new Q("sigmaTilde(0) was zero");const c=n.inverse(u);return[s.multiplyScalar(c),i.multiplyScalar(c)]}findErrorLocations(t){const e=t.getDegree();if(1===e)return Int32Array.from([t.getCoefficient(1)]);const r=new Int32Array(e);let n=0;const o=this.field;for(let i=1;i<o.getSize()&&n<e;i++)0===t.evaluateAt(i)&&(r[n]=o.inverse(i),n++);if(n!==e)throw new Q("Error locator degree does not match number of roots");return r}findErrorMagnitudes(t,e){const r=e.length,n=new Int32Array(r),o=this.field;for(let i=0;i<r;i++){const a=o.inverse(e[i]);let s=1;for(let t=0;t<r;t++)if(i!==t){const r=o.multiply(e[t],a);s=o.multiply(s,0==(1&r)?1|r:-2&r)}n[i]=o.multiply(t.evaluateAt(a),o.inverse(s)),0!==o.getGeneratorBase()&&(n[i]=o.multiply(n[i],a))}return n}}!function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"}(V||(V={}));class tt{decode(t){this.ddata=t;let e=t.getBits(),r=this.extractBits(e),n=this.correctBits(r),o=tt.convertBoolArrayToByteArray(n),i=tt.getEncodedData(n),a=new Y(o,i,null,null);return a.setNumBits(n.length),a}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let e=t.length,r=V.UPPER,n=V.UPPER,o="",i=0;for(;i<e;)if(n===V.BINARY){if(e-i<5)break;let a=tt.readCode(t,i,5);if(i+=5,0===a){if(e-i<11)break;a=tt.readCode(t,i,11)+31,i+=11}for(let r=0;r<a;r++){if(e-i<8){i=e;break}const r=tt.readCode(t,i,8);o+=I.castAsNonUtf8Char(r),i+=8}n=r}else{let a=n===V.DIGIT?4:5;if(e-i<a)break;let s=tt.readCode(t,i,a);i+=a;let u=tt.getCharacter(n,s);u.startsWith("CTRL_")?(r=n,n=tt.getTable(u.charAt(5)),"L"===u.charAt(6)&&(r=n)):(o+=u,n=r)}return o}static getTable(t){switch(t){case"L":return V.LOWER;case"P":return V.PUNCT;case"M":return V.MIXED;case"D":return V.DIGIT;case"B":return V.BINARY;case"U":default:return V.UPPER}}static getCharacter(t,e){switch(t){case V.UPPER:return tt.UPPER_TABLE[e];case V.LOWER:return tt.LOWER_TABLE[e];case V.MIXED:return tt.MIXED_TABLE[e];case V.PUNCT:return tt.PUNCT_TABLE[e];case V.DIGIT:return tt.DIGIT_TABLE[e];default:throw new J("Bad table")}}correctBits(t){let e,r;this.ddata.getNbLayers()<=2?(r=6,e=q.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,e=q.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,e=q.AZTEC_DATA_10):(r=12,e=q.AZTEC_DATA_12);let n=this.ddata.getNbDatablocks(),o=t.length/r;if(o<n)throw new _;let i=t.length%r,a=new Int32Array(o);for(let d=0;d<o;d++,i+=r)a[d]=tt.readCode(t,i,r);try{new $(e).decode(a,o-n)}catch(l){throw new _(l)}let s=(1<<r)-1,u=0;for(let d=0;d<n;d++){let t=a[d];if(0===t||t===s)throw new _;1!==t&&t!==s-1||u++}let c=new Array(n*r-u),h=0;for(let d=0;d<n;d++){let t=a[d];if(1===t||t===s-1)c.fill(t>1,h,h+r-1),h+=r-1;else for(let e=r-1;e>=0;--e)c[h++]=0!=(t&1<<e)}return c}extractBits(t){let e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(e?11:14)+4*r,o=new Int32Array(n),i=new Array(this.totalBitsInLayer(r,e));if(e)for(let a=0;a<o.length;a++)o[a]=a;else{let t=n+1+2*p.truncDivision(p.truncDivision(n,2)-1,15),e=n/2,r=p.truncDivision(t,2);for(let n=0;n<e;n++){let t=n+p.truncDivision(n,15);o[e-n-1]=r-t-1,o[e+n]=r+t+1}}for(let a=0,s=0;a<r;a++){let u=4*(r-a)+(e?9:12),c=2*a,h=n-1-c;for(let e=0;e<u;e++){let r=2*e;for(let n=0;n<2;n++)i[s+r+n]=t.get(o[c+n],o[c+e]),i[s+2*u+r+n]=t.get(o[c+e],o[h-n]),i[s+4*u+r+n]=t.get(o[h-n],o[h-e]),i[s+6*u+r+n]=t.get(o[h-e],o[c+n])}s+=8*u}return i}static readCode(t,e,r){let n=0;for(let o=e;o<e+r;o++)n<<=1,t[o]&&(n|=1);return n}static readByte(t,e){let r=t.length-e;return r>=8?tt.readCode(t,e,8):tt.readCode(t,e,r)<<8-r}static convertBoolArrayToByteArray(t){let e=new Uint8Array((t.length+7)/8);for(let r=0;r<e.length;r++)e[r]=tt.readByte(t,8*r);return e}totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}tt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],tt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],tt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],tt.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],tt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class et{constructor(){}static round(t){return NaN===t?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,e,r,n){const o=t-r,i=e-n;return Math.sqrt(o*o+i*i)}static sum(t){let e=0;for(let r=0,n=t.length;r!==n;r++)e+=t[r];return e}}class rt{static floatToIntBits(t){return t}}rt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class nt{constructor(t,e){this.x=t,this.y=e}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof nt){const e=t;return this.x===e.x&&this.y===e.y}return!1}hashCode(){return 31*rt.floatToIntBits(this.x)+rt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),n=this.distance(t[0],t[2]);let o,i,a;if(r>=e&&r>=n?(i=t[0],o=t[1],a=t[2]):n>=r&&n>=e?(i=t[1],o=t[0],a=t[2]):(i=t[2],o=t[0],a=t[1]),this.crossProductZ(o,i,a)<0){const t=o;o=a,a=t}t[0]=o,t[1]=i,t[2]=a}static distance(t,e){return et.distance(t.x,t.y,e.x,e.y)}static crossProductZ(t,e,r){const n=e.x,o=e.y;return(r.x-n)*(t.y-o)-(r.y-o)*(t.x-n)}}class ot{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class it extends ot{constructor(t,e,r,n,o){super(t,e),this.compact=r,this.nbDatablocks=n,this.nbLayers=o}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class at{constructor(t,e,r,n){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),null==e&&(e=at.INIT_SIZE),null==r&&(r=t.getWidth()/2|0),null==n&&(n=t.getHeight()/2|0);const o=e/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=n-o,this.downInit=n+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new T}detect(){let t=this.leftInit,e=this.rightInit,r=this.upInit,n=this.downInit,o=!1,i=!0,a=!1,s=!1,u=!1,c=!1,h=!1;const l=this.width,d=this.height;for(;i;){i=!1;let f=!0;for(;(f||!s)&&e<l;)f=this.containsBlackPoint(r,n,e,!1),f?(e++,i=!0,s=!0):s||e++;if(e>=l){o=!0;break}let g=!0;for(;(g||!u)&&n<d;)g=this.containsBlackPoint(t,e,n,!0),g?(n++,i=!0,u=!0):u||n++;if(n>=d){o=!0;break}let p=!0;for(;(p||!c)&&t>=0;)p=this.containsBlackPoint(r,n,t,!1),p?(t--,i=!0,c=!0):c||t--;if(t<0){o=!0;break}let w=!0;for(;(w||!h)&&r>=0;)w=this.containsBlackPoint(t,e,r,!0),w?(r--,i=!0,h=!0):h||r--;if(r<0){o=!0;break}i&&(a=!0)}if(!o&&a){const o=e-t;let i=null;for(let e=1;null===i&&e<o;e++)i=this.getBlackPointOnSegment(t,n-e,t+e,n);if(null==i)throw new T;let a=null;for(let e=1;null===a&&e<o;e++)a=this.getBlackPointOnSegment(t,r+e,t+e,r);if(null==a)throw new T;let s=null;for(let t=1;null===s&&t<o;t++)s=this.getBlackPointOnSegment(e,r+t,e-t,r);if(null==s)throw new T;let u=null;for(let t=1;null===u&&t<o;t++)u=this.getBlackPointOnSegment(e,n-t,e-t,n);if(null==u)throw new T;return this.centerEdges(u,i,s,a)}throw new T}getBlackPointOnSegment(t,e,r,n){const o=et.round(et.distance(t,e,r,n)),i=(r-t)/o,a=(n-e)/o,s=this.image;for(let u=0;u<o;u++){const r=et.round(t+u*i),n=et.round(e+u*a);if(s.get(r,n))return new nt(r,n)}return null}centerEdges(t,e,r,n){const o=t.getX(),i=t.getY(),a=e.getX(),s=e.getY(),u=r.getX(),c=r.getY(),h=n.getX(),l=n.getY(),d=at.CORR;return o<this.width/2?[new nt(h-d,l+d),new nt(a+d,s+d),new nt(u-d,c-d),new nt(o+d,i-d)]:[new nt(h+d,l+d),new nt(a+d,s-d),new nt(u-d,c+d),new nt(o-d,i-d)]}containsBlackPoint(t,e,r,n){const o=this.image;if(n){for(let i=t;i<=e;i++)if(o.get(i,r))return!0}else for(let i=t;i<=e;i++)if(o.get(r,i))return!0;return!1}}at.INIT_SIZE=10,at.CORR=1;class st{static checkAndNudgePoints(t,e){const r=t.getWidth(),n=t.getHeight();let o=!0;for(let i=0;i<e.length&&o;i+=2){const t=Math.floor(e[i]),a=Math.floor(e[i+1]);if(t<-1||t>r||a<-1||a>n)throw new T;o=!1,-1===t?(e[i]=0,o=!0):t===r&&(e[i]=r-1,o=!0),-1===a?(e[i+1]=0,o=!0):a===n&&(e[i+1]=n-1,o=!0)}o=!0;for(let i=e.length-2;i>=0&&o;i-=2){const t=Math.floor(e[i]),a=Math.floor(e[i+1]);if(t<-1||t>r||a<-1||a>n)throw new T;o=!1,-1===t?(e[i]=0,o=!0):t===r&&(e[i]=r-1,o=!0),-1===a?(e[i+1]=0,o=!0):a===n&&(e[i+1]=n-1,o=!0)}}}class ut{constructor(t,e,r,n,o,i,a,s,u){this.a11=t,this.a21=e,this.a31=r,this.a12=n,this.a22=o,this.a32=i,this.a13=a,this.a23=s,this.a33=u}static quadrilateralToQuadrilateral(t,e,r,n,o,i,a,s,u,c,h,l,d,f,g,p){const w=ut.quadrilateralToSquare(t,e,r,n,o,i,a,s);return ut.squareToQuadrilateral(u,c,h,l,d,f,g,p).times(w)}transformPoints(t){const e=t.length,r=this.a11,n=this.a12,o=this.a13,i=this.a21,a=this.a22,s=this.a23,u=this.a31,c=this.a32,h=this.a33;for(let l=0;l<e;l+=2){const e=t[l],d=t[l+1],f=o*e+s*d+h;t[l]=(r*e+i*d+u)/f,t[l+1]=(n*e+a*d+c)/f}}transformPointsWithValues(t,e){const r=this.a11,n=this.a12,o=this.a13,i=this.a21,a=this.a22,s=this.a23,u=this.a31,c=this.a32,h=this.a33,l=t.length;for(let d=0;d<l;d++){const l=t[d],f=e[d],g=o*l+s*f+h;t[d]=(r*l+i*f+u)/g,e[d]=(n*l+a*f+c)/g}}static squareToQuadrilateral(t,e,r,n,o,i,a,s){const u=t-r+o-a,c=e-n+i-s;if(0===u&&0===c)return new ut(r-t,o-r,t,n-e,i-n,e,0,0,1);{const h=r-o,l=a-o,d=n-i,f=s-i,g=h*f-l*d,p=(u*f-l*c)/g,w=(h*c-u*d)/g;return new ut(r-t+p*r,a-t+w*a,t,n-e+p*n,s-e+w*s,e,p,w,1)}}static quadrilateralToSquare(t,e,r,n,o,i,a,s){return ut.squareToQuadrilateral(t,e,r,n,o,i,a,s).buildAdjoint()}buildAdjoint(){return new ut(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new ut(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class ct extends st{sampleGrid(t,e,r,n,o,i,a,s,u,c,h,l,d,f,g,p,w,m,A){const _=ut.quadrilateralToQuadrilateral(n,o,i,a,s,u,c,h,l,d,f,g,p,w,m,A);return this.sampleGridWithTransform(t,e,r,_)}sampleGridWithTransform(t,e,r,n){if(e<=0||r<=0)throw new T;const o=new v(e,r),i=new Float32Array(2*e);for(let s=0;s<r;s++){const e=i.length,r=s+.5;for(let t=0;t<e;t+=2)i[t]=t/2+.5,i[t+1]=r;n.transformPoints(i),st.checkAndNudgePoints(t,i);try{for(let r=0;r<e;r+=2)t.get(Math.floor(i[r]),Math.floor(i[r+1]))&&o.set(r/2,s)}catch(a){throw new T}}return o}}class ht{static setGridSampler(t){ht.gridSampler=t}static getInstance(){return ht.gridSampler}}ht.gridSampler=new ct;class lt{constructor(t,e){this.x=t,this.y=e}toResultPoint(){return new nt(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class dt{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){let t=r[0];r[0]=r[2],r[2]=t}this.extractParameters(r);let n=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new it(n,o,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!(this.isValidPoint(t[0])&&this.isValidPoint(t[1])&&this.isValidPoint(t[2])&&this.isValidPoint(t[3])))throw new T;let e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);let n=0;for(let i=0;i<4;i++){let t=r[(this.shift+i)%4];this.compact?(n<<=7,n+=t>>1&127):(n<<=10,n+=(t>>2&992)+(t>>1&31))}let o=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=1+(o>>6),this.nbDataBlocks=1+(63&o)):(this.nbLayers=1+(o>>11),this.nbDataBlocks=1+(2047&o))}getRotation(t,e){let r=0;t.forEach((t,n,o)=>{r=(t>>e-2<<1)+(1&t)+(r<<3)}),r=((1&r)<<11)+(r>>1);for(let n=0;n<4;n++)if(p.bitCount(r^this.EXPECTED_CORNER_BITS[n])<=2)return n;throw new T}getCorrectedParameterData(t,e){let r,n;e?(r=7,n=2):(r=10,n=4);let o=r-n,i=new Int32Array(r);for(let u=r-1;u>=0;--u)i[u]=15&t,t>>=4;try{new $(q.AZTEC_PARAM).decode(i,o)}catch(s){throw new T}let a=0;for(let u=0;u<n;u++)a=(a<<4)+i[u];return a}getBullsEyeCorners(t){let e=t,r=t,n=t,o=t,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let t=this.getFirstDifferent(e,i,1,-1),a=this.getFirstDifferent(r,i,1,1),s=this.getFirstDifferent(n,i,-1,1),u=this.getFirstDifferent(o,i,-1,-1);if(this.nbCenterLayers>2){let r=this.distancePoint(u,t)*this.nbCenterLayers/(this.distancePoint(o,e)*(this.nbCenterLayers+2));if(r<.75||r>1.25||!this.isWhiteOrBlackRectangle(t,a,s,u))break}e=t,r=a,n=s,o=u,i=!i}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new T;this.compact=5===this.nbCenterLayers;let a=new nt(e.getX()+.5,e.getY()-.5),s=new nt(r.getX()+.5,r.getY()+.5),u=new nt(n.getX()-.5,n.getY()+.5),c=new nt(o.getX()-.5,o.getY()-.5);return this.expandSquare([a,s,u,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,e,r,n;try{let o=new at(this.image).detect();t=o[0],e=o[1],r=o[2],n=o[3]}catch(a){let o=this.image.getWidth()/2,i=this.image.getHeight()/2;t=this.getFirstDifferent(new lt(o+7,i-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new lt(o+7,i+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new lt(o-7,i+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new lt(o-7,i-7),!1,-1,-1).toResultPoint()}let o=et.round((t.getX()+n.getX()+e.getX()+r.getX())/4),i=et.round((t.getY()+n.getY()+e.getY()+r.getY())/4);try{let a=new at(this.image,15,o,i).detect();t=a[0],e=a[1],r=a[2],n=a[3]}catch(a){t=this.getFirstDifferent(new lt(o+7,i-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new lt(o+7,i+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new lt(o-7,i+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new lt(o-7,i-7),!1,-1,-1).toResultPoint()}return o=et.round((t.getX()+n.getX()+e.getX()+r.getX())/4),i=et.round((t.getY()+n.getY()+e.getY()+r.getY())/4),new lt(o,i)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,e,r,n,o){let i=ht.getInstance(),a=this.getDimension(),s=a/2-this.nbCenterLayers,u=a/2+this.nbCenterLayers;return i.sampleGrid(t,a,a,s,s,u,s,u,u,s,u,e.getX(),e.getY(),r.getX(),r.getY(),n.getX(),n.getY(),o.getX(),o.getY())}sampleLine(t,e,r){let n=0,o=this.distanceResultPoint(t,e),i=o/r,a=t.getX(),s=t.getY(),u=i*(e.getX()-t.getX())/o,c=i*(e.getY()-t.getY())/o;for(let h=0;h<r;h++)this.image.get(et.round(a+h*u),et.round(s+h*c))&&(n|=1<<r-h-1);return n}isWhiteOrBlackRectangle(t,e,r,n){t=new lt(t.getX()-3,t.getY()+3),e=new lt(e.getX()-3,e.getY()-3),r=new lt(r.getX()+3,r.getY()-3),n=new lt(n.getX()+3,n.getY()+3);let o=this.getColor(n,t);if(0===o)return!1;let i=this.getColor(t,e);return i===o&&(i=this.getColor(e,r),i===o&&(i=this.getColor(r,n),i===o))}getColor(t,e){let r=this.distancePoint(t,e),n=(e.getX()-t.getX())/r,o=(e.getY()-t.getY())/r,i=0,a=t.getX(),s=t.getY(),u=this.image.get(t.getX(),t.getY()),c=Math.ceil(r);for(let l=0;l<c;l++)a+=n,s+=o,this.image.get(et.round(a),et.round(s))!==u&&i++;let h=i/r;return h>.1&&h<.9?0:h<=.1===u?1:-1}getFirstDifferent(t,e,r,n){let o=t.getX()+r,i=t.getY()+n;for(;this.isValid(o,i)&&this.image.get(o,i)===e;)o+=r,i+=n;for(o-=r,i-=n;this.isValid(o,i)&&this.image.get(o,i)===e;)o+=r;for(o-=r;this.isValid(o,i)&&this.image.get(o,i)===e;)i+=n;return i-=n,new lt(o,i)}expandSquare(t,e,r){let n=r/(2*e),o=t[0].getX()-t[2].getX(),i=t[0].getY()-t[2].getY(),a=(t[0].getX()+t[2].getX())/2,s=(t[0].getY()+t[2].getY())/2,u=new nt(a+n*o,s+n*i),c=new nt(a-n*o,s-n*i);return o=t[1].getX()-t[3].getX(),i=t[1].getY()-t[3].getY(),a=(t[1].getX()+t[3].getX())/2,s=(t[1].getY()+t[3].getY())/2,[u,new nt(a+n*o,s+n*i),c,new nt(a-n*o,s-n*i)]}isValid(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()}isValidPoint(t){let e=et.round(t.getX()),r=et.round(t.getY());return this.isValid(e,r)}distancePoint(t,e){return et.distance(t.getX(),t.getY(),e.getX(),e.getY())}distanceResultPoint(t,e){return et.distance(t.getX(),t.getY(),e.getX(),e.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(p.truncDivision(this.nbLayers-4,8)+1)+15}}class ft{decode(t,e=null){let r=null,n=new dt(t.getBlackMatrix()),o=null,i=null;try{let t=n.detectMirror(!1);o=t.getPoints(),this.reportFoundResultPoints(e,o),i=(new tt).decode(t)}catch(c){r=c}if(null==i)try{let t=n.detectMirror(!0);o=t.getPoints(),this.reportFoundResultPoints(e,o),i=(new tt).decode(t)}catch(c){if(null!=r)throw r;throw c}let a=new F(i.getText(),i.getRawBytes(),i.getNumBits(),o,x.AZTEC,l.currentTimeMillis()),s=i.getByteSegments();null!=s&&a.putMetadata(z.BYTE_SEGMENTS,s);let u=i.getECLevel();return null!=u&&a.putMetadata(z.ERROR_CORRECTION_LEVEL,u),a}reportFoundResultPoints(t,e){if(null!=t){let r=t.get(A.NEED_RESULT_POINT_CALLBACK);null!=r&&e.forEach((t,e,n)=>{r.foundPossibleResultPoint(t)})}}reset(){}}class gt{decode(t,e){try{return this.doDecode(t,e)}catch(r){if(e&&!0===e.get(A.TRY_HARDER)&&t.isRotateSupported()){const r=t.rotateCounterClockwise(),n=this.doDecode(r,e),o=n.getResultMetadata();let i=270;null!==o&&!0===o.get(z.ORIENTATION)&&(i+=o.get(z.ORIENTATION)%360),n.putMetadata(z.ORIENTATION,i);const a=n.getResultPoints();if(null!==a){const t=r.getHeight();for(let e=0;e<a.length;e++)a[e]=new nt(t-a[e].getY()-1,a[e].getX())}return n}throw new T}}reset(){}doDecode(t,e){const r=t.getWidth(),n=t.getHeight();let o=new w(r);const i=e&&!0===e.get(A.TRY_HARDER),a=Math.max(1,n>>(i?8:5));let s;s=i?n:15;const u=Math.trunc(n/2);for(let l=0;l<s;l++){const i=Math.trunc((l+1)/2),s=u+a*(0==(1&l)?i:-i);if(s<0||s>=n)break;try{o=t.getBlackRow(s,o)}catch(c){continue}for(let t=0;t<2;t++){if(1===t&&(o.reverse(),e&&!0===e.get(A.NEED_RESULT_POINT_CALLBACK))){const t=new Map;e.forEach((e,r)=>t.set(r,e)),t.delete(A.NEED_RESULT_POINT_CALLBACK),e=t}try{const n=this.decodeRow(s,o,e);if(1===t){n.putMetadata(z.ORIENTATION,180);const t=n.getResultPoints();null!==t&&(t[0]=new nt(r-t[0].getX()-1,t[0].getY()),t[1]=new nt(r-t[1].getX()-1,t[1].getY()))}return n}catch(h){}}}throw new T}static recordPattern(t,e,r){const n=r.length;for(let u=0;u<n;u++)r[u]=0;const o=t.getSize();if(e>=o)throw new T;let i=!t.get(e),a=0,s=e;for(;s<o;){if(t.get(s)!==i)r[a]++;else{if(++a===n)break;r[a]=1,i=!i}s++}if(a!==n&&(a!==n-1||s!==o))throw new T}static recordPatternInReverse(t,e,r){let n=r.length,o=t.get(e);for(;e>0&&n>=0;)t.get(--e)!==o&&(n--,o=!o);if(n>=0)throw new T;gt.recordPattern(t,e+1,r)}static patternMatchVariance(t,e,r){const n=t.length;let o=0,i=0;for(let u=0;u<n;u++)o+=t[u],i+=e[u];if(o<i)return Number.POSITIVE_INFINITY;const a=o/i;r*=a;let s=0;for(let u=0;u<n;u++){const n=t[u],o=e[u]*a,i=n>o?n-o:o-n;if(i>r)return Number.POSITIVE_INFINITY;s+=i}return s/o}}class pt extends gt{static findStartPattern(t){const e=t.getSize(),r=t.getNextSet(0);let n=0,o=Int32Array.from([0,0,0,0,0,0]),i=r,a=!1;for(let s=r;s<e;s++)if(t.get(s)!==a)o[n]++;else{if(5===n){let e=pt.MAX_AVG_VARIANCE,r=-1;for(let t=pt.CODE_START_A;t<=pt.CODE_START_C;t++){const n=gt.patternMatchVariance(o,pt.CODE_PATTERNS[t],pt.MAX_INDIVIDUAL_VARIANCE);n<e&&(e=n,r=t)}if(r>=0&&t.isRange(Math.max(0,i-(s-i)/2),i,!1))return Int32Array.from([i,s,r]);i+=o[0]+o[1],o=o.slice(2,o.length-1),o[n-1]=0,o[n]=0,n--}else n++;o[n]=1,a=!a}throw new T}static decodeCode(t,e,r){gt.recordPattern(t,r,e);let n=pt.MAX_AVG_VARIANCE,o=-1;for(let i=0;i<pt.CODE_PATTERNS.length;i++){const t=this.patternMatchVariance(e,pt.CODE_PATTERNS[i],pt.MAX_INDIVIDUAL_VARIANCE);t<n&&(n=t,o=i)}if(o>=0)return o;throw new T}decodeRow(t,e,r){const n=r&&!0===r.get(A.ASSUME_GS1),o=pt.findStartPattern(e),i=o[2];let a=0;const s=new Uint8Array(20);let u;switch(s[a++]=i,i){case pt.CODE_START_A:u=pt.CODE_CODE_A;break;case pt.CODE_START_B:u=pt.CODE_CODE_B;break;case pt.CODE_START_C:u=pt.CODE_CODE_C;break;default:throw new _}let h=!1,l=!1,d="",f=o[0],g=o[1];const p=Int32Array.from([0,0,0,0,0,0]);let w=0,m=0,C=i,E=0,y=!0,I=!1,S=!1;for(;!h;){const t=l;switch(l=!1,w=m,m=pt.decodeCode(e,p,g),s[a++]=m,m!==pt.CODE_STOP&&(y=!0),m!==pt.CODE_STOP&&(E++,C+=E*m),f=g,g+=p.reduce((t,e)=>t+e,0),m){case pt.CODE_START_A:case pt.CODE_START_B:case pt.CODE_START_C:throw new _}switch(u){case pt.CODE_CODE_A:if(m<64)d+=String.fromCharCode(S===I?" ".charCodeAt(0)+m:" ".charCodeAt(0)+m+128),S=!1;else if(m<96)d+=String.fromCharCode(S===I?m-64:m+64),S=!1;else switch(m!==pt.CODE_STOP&&(y=!1),m){case pt.CODE_FNC_1:n&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case pt.CODE_FNC_2:case pt.CODE_FNC_3:break;case pt.CODE_FNC_4_A:!I&&S?(I=!0,S=!1):I&&S?(I=!1,S=!1):S=!0;break;case pt.CODE_SHIFT:l=!0,u=pt.CODE_CODE_B;break;case pt.CODE_CODE_B:u=pt.CODE_CODE_B;break;case pt.CODE_CODE_C:u=pt.CODE_CODE_C;break;case pt.CODE_STOP:h=!0}break;case pt.CODE_CODE_B:if(m<96)d+=String.fromCharCode(S===I?" ".charCodeAt(0)+m:" ".charCodeAt(0)+m+128),S=!1;else switch(m!==pt.CODE_STOP&&(y=!1),m){case pt.CODE_FNC_1:n&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case pt.CODE_FNC_2:case pt.CODE_FNC_3:break;case pt.CODE_FNC_4_B:!I&&S?(I=!0,S=!1):I&&S?(I=!1,S=!1):S=!0;break;case pt.CODE_SHIFT:l=!0,u=pt.CODE_CODE_A;break;case pt.CODE_CODE_A:u=pt.CODE_CODE_A;break;case pt.CODE_CODE_C:u=pt.CODE_CODE_C;break;case pt.CODE_STOP:h=!0}break;case pt.CODE_CODE_C:if(m<100)m<10&&(d+="0"),d+=m;else switch(m!==pt.CODE_STOP&&(y=!1),m){case pt.CODE_FNC_1:n&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case pt.CODE_CODE_A:u=pt.CODE_CODE_A;break;case pt.CODE_CODE_B:u=pt.CODE_CODE_B;break;case pt.CODE_STOP:h=!0}}t&&(u=u===pt.CODE_CODE_A?pt.CODE_CODE_B:pt.CODE_CODE_A)}const v=g-f;if(g=e.getNextUnset(g),!e.isRange(g,Math.min(e.getSize(),g+(g-f)/2),!1))throw new T;if(C-=E*w,C%103!==w)throw new c;const R=d.length;if(0===R)throw new T;R>0&&y&&(d=d.substring(0,u===pt.CODE_CODE_C?R-2:R-1));const O=(o[1]+o[0])/2,N=f+v/2,b=s.length,D=new Uint8Array(b);for(let c=0;c<b;c++)D[c]=s[c];const M=[new nt(O,t),new nt(N,t)];return new F(d,D,0,M,x.CODE_128,(new Date).getTime())}}pt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],pt.MAX_AVG_VARIANCE=.25,pt.MAX_INDIVIDUAL_VARIANCE=.7,pt.CODE_SHIFT=98,pt.CODE_CODE_C=99,pt.CODE_CODE_B=100,pt.CODE_CODE_A=101,pt.CODE_FNC_1=102,pt.CODE_FNC_2=97,pt.CODE_FNC_3=96,pt.CODE_FNC_4_A=101,pt.CODE_FNC_4_B=100,pt.CODE_START_A=103,pt.CODE_START_B=104,pt.CODE_START_C=105,pt.CODE_STOP=106;class wt extends gt{constructor(t=!1,e=!1){super(),this.usingCheckDigit=t,this.extendedMode=e,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,e,r){let n=this.counters;n.fill(0),this.decodeRowResult="";let o,i,a=wt.findAsteriskPattern(e,n),s=e.getNextSet(a[1]),u=e.getSize();do{wt.recordPattern(e,s,n);let t=wt.toNarrowWidePattern(n);if(t<0)throw new T;o=wt.patternToChar(t),this.decodeRowResult+=o,i=s;for(let e of n)s+=e;s=e.getNextSet(s)}while("*"!==o);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let h,l=0;for(let c of n)l+=c;if(s!==u&&2*(s-i-l)<l)throw new T;if(this.usingCheckDigit){let t=this.decodeRowResult.length-1,e=0;for(let r=0;r<t;r++)e+=wt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(r));if(this.decodeRowResult.charAt(t)!==wt.ALPHABET_STRING.charAt(e%43))throw new c;this.decodeRowResult=this.decodeRowResult.substring(0,t)}if(0===this.decodeRowResult.length)throw new T;h=this.extendedMode?wt.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=i+l/2;return new F(h,null,0,[new nt((a[1]+a[0])/2,t),new nt(d,t)],x.CODE_39,(new Date).getTime())}static findAsteriskPattern(t,e){let r=t.getSize(),n=t.getNextSet(0),o=0,i=n,a=!1,s=e.length;for(let u=n;u<r;u++)if(t.get(u)!==a)e[o]++;else{if(o===s-1){if(this.toNarrowWidePattern(e)===wt.ASTERISK_ENCODING&&t.isRange(Math.max(0,i-Math.floor((u-i)/2)),i,!1))return[i,u];i+=e[0]+e[1],e.copyWithin(0,2,2+o-1),e[o-1]=0,e[o]=0,o--}else o++;e[o]=1,a=!a}throw new T}static toNarrowWidePattern(t){let e,r=t.length,n=0;do{let o=2147483647;for(let e of t)e<o&&e>n&&(o=e);n=o,e=0;let i=0,a=0;for(let s=0;s<r;s++){let o=t[s];o>n&&(a|=1<<r-1-s,e++,i+=o)}if(3===e){for(let o=0;o<r&&e>0;o++){let r=t[o];if(r>n&&(e--,2*r>=i))return-1}return a}}while(e>3);return-1}static patternToChar(t){for(let e=0;e<wt.CHARACTER_ENCODINGS.length;e++)if(wt.CHARACTER_ENCODINGS[e]===t)return wt.ALPHABET_STRING.charAt(e);if(t===wt.ASTERISK_ENCODING)return"*";throw new T}static decodeExtended(t){let e=t.length,r="";for(let n=0;n<e;n++){let e=t.charAt(n);if("+"===e||"$"===e||"%"===e||"/"===e){let o=t.charAt(n+1),i="\0";switch(e){case"+":if(!(o>="A"&&o<="Z"))throw new _;i=String.fromCharCode(o.charCodeAt(0)+32);break;case"$":if(!(o>="A"&&o<="Z"))throw new _;i=String.fromCharCode(o.charCodeAt(0)-64);break;case"%":if(o>="A"&&o<="E")i=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")i=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")i=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")i=String.fromCharCode(o.charCodeAt(0)+43);else if("U"===o)i="\0";else if("V"===o)i="@";else if("W"===o)i="`";else{if("X"!==o&&"Y"!==o&&"Z"!==o)throw new _;i="\x7f"}break;case"/":if(o>="A"&&o<="O")i=String.fromCharCode(o.charCodeAt(0)-32);else{if("Z"!==o)throw new _;i=":"}}r+=i,n++}else r+=e}return r}}wt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",wt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],wt.ASTERISK_ENCODING=148;class mt extends gt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,e,r){let n=this.decodeStart(e),o=this.decodeEnd(e),i=new S;mt.decodeMiddle(e,n[1],o[0],i);let a=i.toString(),s=null;null!=r&&(s=r.get(A.ALLOWED_LENGTHS)),null==s&&(s=mt.DEFAULT_ALLOWED_LENGTHS);let u=a.length,c=!1,h=0;for(let d of s){if(u===d){c=!0;break}d>h&&(h=d)}if(!c&&u>h&&(c=!0),!c)throw new _;const l=[new nt(n[1],t),new nt(o[0],t)];return new F(a,null,0,l,x.ITF,(new Date).getTime())}static decodeMiddle(t,e,r,n){let o=new Int32Array(10),i=new Int32Array(5),a=new Int32Array(5);for(o.fill(0),i.fill(0),a.fill(0);e<r;){gt.recordPattern(t,e,o);for(let t=0;t<5;t++){let e=2*t;i[t]=o[e],a[t]=o[e+1]}let r=mt.decodeDigit(i);n.append(r.toString()),r=this.decodeDigit(a),n.append(r.toString()),o.forEach(function(t){e+=t})}}decodeStart(t){let e=mt.skipWhiteSpace(t),r=mt.findGuardPattern(t,e,mt.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(t,r[0]),r}validateQuietZone(t,e){let r=10*this.narrowLineWidth;r=r<e?r:e;for(let n=e-1;r>0&&n>=0&&!t.get(n);n--)r--;if(0!==r)throw new T}static skipWhiteSpace(t){const e=t.getSize(),r=t.getNextSet(0);if(r===e)throw new T;return r}decodeEnd(t){t.reverse();try{let r,n=mt.skipWhiteSpace(t);try{r=mt.findGuardPattern(t,n,mt.END_PATTERN_REVERSED[0])}catch(e){e instanceof T&&(r=mt.findGuardPattern(t,n,mt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,r[0]);let o=r[0];return r[0]=t.getSize()-r[1],r[1]=t.getSize()-o,r}finally{t.reverse()}}static findGuardPattern(t,e,r){let n=r.length,o=new Int32Array(n),i=t.getSize(),a=!1,s=0,u=e;o.fill(0);for(let c=e;c<i;c++)if(t.get(c)!==a)o[s]++;else{if(s===n-1){if(gt.patternMatchVariance(o,r,mt.MAX_INDIVIDUAL_VARIANCE)<mt.MAX_AVG_VARIANCE)return[u,c];u+=o[0]+o[1],l.arraycopy(o,2,o,0,s-1),o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,a=!a}throw new T}static decodeDigit(t){let e=mt.MAX_AVG_VARIANCE,r=-1,n=mt.PATTERNS.length;for(let o=0;o<n;o++){let n=gt.patternMatchVariance(t,mt.PATTERNS[o],mt.MAX_INDIVIDUAL_VARIANCE);n<e?(e=n,r=o):n===e&&(r=-1)}if(r>=0)return r%10;throw new T}}mt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],mt.MAX_AVG_VARIANCE=.38,mt.MAX_INDIVIDUAL_VARIANCE=.5,mt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],mt.START_PATTERN=Int32Array.from([1,1,1,1]),mt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class At extends gt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let e,r=!1,n=0,o=Int32Array.from([0,0,0]);for(;!r;){o=Int32Array.from([0,0,0]),e=At.findGuardPattern(t,n,!1,this.START_END_PATTERN,o);let i=e[0];n=e[1];let a=i-(n-i);a>=0&&(r=t.isRange(a,i,!1))}return e}static checkChecksum(t){return At.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let r=parseInt(t.charAt(e-1),10);return At.getStandardUPCEANChecksum(t.substring(0,e-1))===r}static getStandardUPCEANChecksum(t){let e=t.length,r=0;for(let n=e-1;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new _;r+=e}r*=3;for(let n=e-2;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new _;r+=e}return(1e3-r)%10}static decodeEnd(t,e){return At.findGuardPattern(t,e,!1,At.START_END_PATTERN,new Int32Array(At.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,e,r,n){return this.findGuardPattern(t,e,r,n,new Int32Array(n.length))}static findGuardPattern(t,e,r,n,o){let i=t.getSize(),a=0,s=e=r?t.getNextUnset(e):t.getNextSet(e),u=n.length,c=r;for(let h=e;h<i;h++)if(t.get(h)!==c)o[a]++;else{if(a===u-1){if(gt.patternMatchVariance(o,n,At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE)return Int32Array.from([s,h]);s+=o[0]+o[1];let t=o.slice(2,o.length-1);for(let e=0;e<a-1;e++)o[e]=t[e];o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,c=!c}throw new T}static decodeDigit(t,e,r,n){this.recordPattern(t,r,e);let o=this.MAX_AVG_VARIANCE,i=-1,a=n.length;for(let s=0;s<a;s++){let t=gt.patternMatchVariance(e,n[s],At.MAX_INDIVIDUAL_VARIANCE);t<o&&(o=t,i=s)}if(i>=0)return i;throw new T}}At.MAX_AVG_VARIANCE=.48,At.MAX_INDIVIDUAL_VARIANCE=.7,At.START_END_PATTERN=Int32Array.from([1,1,1]),At.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),At.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),At.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class _t{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,r){let n=this.decodeRowStringBuffer,o=this.decodeMiddle(e,r,n),i=n.toString(),a=_t.parseExtensionString(i),s=[new nt((r[0]+r[1])/2,t),new nt(o,t)],u=new F(i,null,0,s,x.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&u.putAllMetadata(a),u}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let o=t.getSize(),i=e[1],a=0;for(let u=0;u<5&&i<o;u++){let e=At.decodeDigit(t,n,i,At.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of n)i+=t;e>=10&&(a|=1<<4-u),4!==u&&(i=t.getNextSet(i),i=t.getNextUnset(i))}if(5!==r.length)throw new T;let s=this.determineCheckDigit(a);if(_t.extensionChecksum(r.toString())!==s)throw new T;return i}static extensionChecksum(t){let e=t.length,r=0;for(let n=e-2;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);r*=3;for(let n=e-1;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);return r*=3,r%10}determineCheckDigit(t){for(let e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new T}static parseExtensionString(t){if(5!==t.length)return null;let e=_t.parseExtension5String(t);return null==e?null:new Map([[z.SUGGESTED_PRICE,e]])}static parseExtension5String(t){let e;switch(t.charAt(0)){case"0":e="\xa3";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e=""}let r=parseInt(t.substring(1)),n=r%100;return e+(r/100).toString()+"."+(n<10?"0"+n:n.toString())}}class Ct{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,r){let n=this.decodeRowStringBuffer,o=this.decodeMiddle(e,r,n),i=n.toString(),a=Ct.parseExtensionString(i),s=[new nt((r[0]+r[1])/2,t),new nt(o,t)],u=new F(i,null,0,s,x.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&u.putAllMetadata(a),u}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let o=t.getSize(),i=e[1],a=0;for(let s=0;s<2&&i<o;s++){let e=At.decodeDigit(t,n,i,At.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of n)i+=t;e>=10&&(a|=1<<1-s),1!==s&&(i=t.getNextSet(i),i=t.getNextUnset(i))}if(2!==r.length)throw new T;if(parseInt(r.toString())%4!==a)throw new T;return i}static parseExtensionString(t){return 2!==t.length?null:new Map([[z.ISSUE_NUMBER,parseInt(t)]])}}class Et{static decodeRow(t,e,r){let n=At.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new _t).decodeRow(t,e,n)}catch(o){return(new Ct).decodeRow(t,e,n)}}}Et.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class yt extends At{constructor(){super(),this.decodeRowStringBuffer="",yt.L_AND_G_PATTERNS=yt.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let e=yt.L_PATTERNS[t-10],r=new Int32Array(e.length);for(let t=0;t<e.length;t++)r[t]=e[e.length-t-1];yt.L_AND_G_PATTERNS[t]=r}}decodeRow(t,e,r){let n=yt.findStartGuardPattern(e),o=null==r?null:r.get(A.NEED_RESULT_POINT_CALLBACK);if(null!=o){const e=new nt((n[0]+n[1])/2,t);o.foundPossibleResultPoint(e)}let i=this.decodeMiddle(e,n,this.decodeRowStringBuffer),a=i.rowOffset,s=i.resultString;if(null!=o){const e=new nt(a,t);o.foundPossibleResultPoint(e)}let u=yt.decodeEnd(e,a);if(null!=o){const e=new nt((u[0]+u[1])/2,t);o.foundPossibleResultPoint(e)}let h=u[1],l=h+(h-u[0]);if(l>=e.getSize()||!e.isRange(h,l,!1))throw new T;let d=s.toString();if(d.length<8)throw new _;if(!yt.checkChecksum(d))throw new c;let f=(n[1]+n[0])/2,g=(u[1]+u[0])/2,p=this.getBarcodeFormat(),w=[new nt(f,t),new nt(g,t)],m=new F(d,null,0,w,p,(new Date).getTime()),C=0;try{let r=Et.decodeRow(t,e,u[1]);m.putMetadata(z.UPC_EAN_EXTENSION,r.getText()),m.putAllMetadata(r.getResultMetadata()),m.addResultPoints(r.getResultPoints()),C=r.getText().length}catch(y){}let E=null==r?null:r.get(A.ALLOWED_EAN_EXTENSIONS);if(null!=E){let t=!1;for(let e in E)if(C.toString()===e){t=!0;break}if(!t)throw new T}return m}static checkChecksum(t){return yt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let r=parseInt(t.charAt(e-1),10);return yt.getStandardUPCEANChecksum(t.substring(0,e-1))===r}static getStandardUPCEANChecksum(t){let e=t.length,r=0;for(let n=e-1;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new _;r+=e}r*=3;for(let n=e-2;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new _;r+=e}return(1e3-r)%10}static decodeEnd(t,e){return yt.findGuardPattern(t,e,!1,yt.START_END_PATTERN,new Int32Array(yt.START_END_PATTERN.length).fill(0))}}class It extends yt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let o=t.getSize(),i=e[1],a=0;for(let s=0;s<6&&i<o;s++){let e=yt.decodeDigit(t,n,i,yt.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of n)i+=t;e>=10&&(a|=1<<5-s)}r=It.determineFirstDigit(r,a),i=yt.findGuardPattern(t,i,!0,yt.MIDDLE_PATTERN,new Int32Array(yt.MIDDLE_PATTERN.length).fill(0))[1];for(let s=0;s<6&&i<o;s++){let e=yt.decodeDigit(t,n,i,yt.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of n)i+=t}return{rowOffset:i,resultString:r}}getBarcodeFormat(){return x.EAN_13}static determineFirstDigit(t,e){for(let r=0;r<10;r++)if(e===this.FIRST_DIGIT_ENCODINGS[r])return String.fromCharCode("0".charCodeAt(0)+r)+t;throw new T}}It.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class St extends yt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,r){const n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let o=t.getSize(),i=e[1];for(let a=0;a<4&&i<o;a++){let e=yt.decodeDigit(t,n,i,yt.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of n)i+=t}i=yt.findGuardPattern(t,i,!0,yt.MIDDLE_PATTERN,new Int32Array(yt.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<4&&i<o;a++){let e=yt.decodeDigit(t,n,i,yt.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of n)i+=t}return{rowOffset:i,resultString:r}}getBarcodeFormat(){return x.EAN_8}}class vt extends yt{constructor(){super(...arguments),this.ean13Reader=new It}getBarcodeFormat(){return x.UPC_A}decode(t,e){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,e,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,e,r))}decodeMiddle(t,e,r){return this.ean13Reader.decodeMiddle(t,e,r)}maybeReturnResult(t){let e=t.getText();if("0"===e.charAt(0)){let r=new F(e.substring(1),null,null,t.getResultPoints(),x.UPC_A);return null!=t.getResultMetadata()&&r.putAllMetadata(t.getResultMetadata()),r}throw new T}reset(){this.ean13Reader.reset()}}class Tt extends yt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,e,r){const n=this.decodeMiddleCounters.map(t=>t);n[0]=0,n[1]=0,n[2]=0,n[3]=0;const o=t.getSize();let i=e[1],a=0;for(let s=0;s<6&&i<o;s++){const e=Tt.decodeDigit(t,n,i,Tt.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of n)i+=t;e>=10&&(a|=1<<5-s)}return Tt.determineNumSysAndCheckDigit(new S(r),a),i}decodeEnd(t,e){return Tt.findGuardPatternWithoutCounters(t,e,!0,Tt.MIDDLE_END_PATTERN)}checkChecksum(t){return yt.checkChecksum(Tt.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,e){for(let r=0;r<=1;r++)for(let n=0;n<10;n++)if(e===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n])return t.insert(0,"0"+r),void t.append("0"+n);throw T.getNotFoundInstance()}getBarcodeFormat(){return x.UPC_E}static convertUPCEtoUPCA(t){const e=t.slice(1,7).split("").map(t=>t.charCodeAt(0)),r=new S;r.append(t.charAt(0));let n=e[5];switch(n){case 0:case 1:case 2:r.appendChars(e,0,2),r.append(n),r.append("0000"),r.appendChars(e,2,3);break;case 3:r.appendChars(e,0,3),r.append("00000"),r.appendChars(e,3,2);break;case 4:r.appendChars(e,0,4),r.append("00000"),r.append(e[4]);break;default:r.appendChars(e,0,5),r.append("0000"),r.append(n)}return t.length>=8&&r.append(t.charAt(7)),r.toString()}}Tt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])];class Rt extends gt{constructor(t){super();let e=null==t?null:t.get(A.POSSIBLE_FORMATS),r=[];null!=e&&(e.indexOf(x.EAN_13)>-1?r.push(new It):e.indexOf(x.UPC_A)>-1&&r.push(new vt),e.indexOf(x.EAN_8)>-1&&r.push(new St),e.indexOf(x.UPC_E)>-1&&r.push(new Tt)),0===r.length&&(r.push(new It),r.push(new St),r.push(new Tt)),this.readers=r}decodeRow(t,e,r){for(let o of this.readers)try{const n=o.decodeRow(t,e,r),i=n.getBarcodeFormat()===x.EAN_13&&"0"===n.getText().charAt(0),a=null==r?null:r.get(A.POSSIBLE_FORMATS),s=null==a||a.includes(x.UPC_A);if(i&&s){const t=n.getRawBytes(),e=new F(n.getText().substring(1),t,t.length,n.getResultPoints(),x.UPC_A);return e.putAllMetadata(n.getResultMetadata()),e}return n}catch(n){}throw new T}reset(){for(let t of this.readers)t.reset()}}class Ot extends gt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,e){for(let r=0;r<e.length;r++)if(gt.patternMatchVariance(t,e[r],Ot.MAX_INDIVIDUAL_VARIANCE)<Ot.MAX_AVG_VARIANCE)return r;throw new T}static count(t){return et.sum(new Int32Array(t))}static increment(t,e){let r=0,n=e[0];for(let o=1;o<t.length;o++)e[o]>n&&(n=e[o],r=o);t[r]++}static decrement(t,e){let r=0,n=e[0];for(let o=1;o<t.length;o++)e[o]<n&&(n=e[o],r=o);t[r]--}static isFinderPattern(t){let e=t[0]+t[1],r=e/(e+t[2]+t[3]);if(r>=Ot.MIN_FINDER_PATTERN_RATIO&&r<=Ot.MAX_FINDER_PATTERN_RATIO){let e=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;for(let n of t)n>r&&(r=n),n<e&&(e=n);return r<10*e}return!1}}Ot.MAX_AVG_VARIANCE=.2,Ot.MAX_INDIVIDUAL_VARIANCE=.45,Ot.MIN_FINDER_PATTERN_RATIO=9.5/12,Ot.MAX_FINDER_PATTERN_RATIO=12.5/14;class Nt{constructor(t,e){this.value=t,this.checksumPortion=e}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){return t instanceof Nt&&this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class bt{constructor(t,e,r,n,o){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new nt(r,o)),this.resultPoints.push(new nt(n,o))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){return t instanceof bt&&this.value===t.value}hashCode(){return this.value}}class Dt{constructor(){}static getRSSvalue(t,e,r){let n=0;for(let s of t)n+=s;let o=0,i=0,a=t.length;for(let s=0;s<a-1;s++){let u;for(u=1,i|=1<<s;u<t[s];u++,i&=~(1<<s)){let t=Dt.combins(n-u-1,a-s-2);if(r&&0===i&&n-u-(a-s-1)>=a-s-1&&(t-=Dt.combins(n-u-(a-s),a-s-2)),a-s-1>1){let r=0;for(let t=n-u-(a-s-2);t>e;t--)r+=Dt.combins(n-u-t-1,a-s-3);t-=r*(a-1-s)}else n-u>e&&t--;o+=t}n-=u}return o}static combins(t,e){let r,n;t-e>e?(n=e,r=t-e):(n=t-e,r=e);let o=1,i=1;for(let a=t;a>r;a--)o*=a,i<=n&&(o/=i,i++);for(;i<=n;)o/=i,i++;return o}}class Mt{constructor(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Pt{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Bt extends Pt{constructor(t,e){super(t),this.value=e}getValue(){return this.value}isFNC1(){return this.value===Bt.FNC1}}Bt.FNC1="$";class Lt extends Pt{constructor(t,e,r){super(t),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=e}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ft extends Pt{constructor(t,e,r){if(super(t),e<0||e>10||r<0||r>10)throw new _;this.firstDigit=e,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ft.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ft.FNC1}isAnyFNC1(){return this.firstDigit===Ft.FNC1||this.secondDigit===Ft.FNC1}}Ft.FNC1=10;class kt{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new T;let e=t.substring(0,2);for(let o of kt.TWO_DIGIT_DATA_LENGTH)if(o[0]===e)return o[1]===kt.VARIABLE_LENGTH?kt.processVariableAI(2,o[2],t):kt.processFixedAI(2,o[1],t);if(t.length<3)throw new T;let r=t.substring(0,3);for(let o of kt.THREE_DIGIT_DATA_LENGTH)if(o[0]===r)return o[1]===kt.VARIABLE_LENGTH?kt.processVariableAI(3,o[2],t):kt.processFixedAI(3,o[1],t);for(let o of kt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(o[0]===r)return o[1]===kt.VARIABLE_LENGTH?kt.processVariableAI(4,o[2],t):kt.processFixedAI(4,o[1],t);if(t.length<4)throw new T;let n=t.substring(0,4);for(let o of kt.FOUR_DIGIT_DATA_LENGTH)if(o[0]===n)return o[1]===kt.VARIABLE_LENGTH?kt.processVariableAI(4,o[2],t):kt.processFixedAI(4,o[1],t);throw new T}static processFixedAI(t,e,r){if(r.length<t)throw new T;let n=r.substring(0,t);if(r.length<t+e)throw new T;let o=r.substring(t,t+e),i=r.substring(t+e),a="("+n+")"+o,s=kt.parseFieldsInGeneralPurpose(i);return null==s?a:a+s}static processVariableAI(t,e,r){let n,o=r.substring(0,t);n=r.length<t+e?r.length:t+e;let i=r.substring(t,n),a=r.substring(n),s="("+o+")"+i,u=kt.parseFieldsInGeneralPurpose(a);return null==u?s:s+u}}kt.VARIABLE_LENGTH=[],kt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",kt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",kt.VARIABLE_LENGTH,20],["22",kt.VARIABLE_LENGTH,29],["30",kt.VARIABLE_LENGTH,8],["37",kt.VARIABLE_LENGTH,8],["90",kt.VARIABLE_LENGTH,30],["91",kt.VARIABLE_LENGTH,30],["92",kt.VARIABLE_LENGTH,30],["93",kt.VARIABLE_LENGTH,30],["94",kt.VARIABLE_LENGTH,30],["95",kt.VARIABLE_LENGTH,30],["96",kt.VARIABLE_LENGTH,30],["97",kt.VARIABLE_LENGTH,3],["98",kt.VARIABLE_LENGTH,30],["99",kt.VARIABLE_LENGTH,30]],kt.THREE_DIGIT_DATA_LENGTH=[["240",kt.VARIABLE_LENGTH,30],["241",kt.VARIABLE_LENGTH,30],["242",kt.VARIABLE_LENGTH,6],["250",kt.VARIABLE_LENGTH,30],["251",kt.VARIABLE_LENGTH,30],["253",kt.VARIABLE_LENGTH,17],["254",kt.VARIABLE_LENGTH,20],["400",kt.VARIABLE_LENGTH,30],["401",kt.VARIABLE_LENGTH,30],["402",17],["403",kt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",kt.VARIABLE_LENGTH,20],["421",kt.VARIABLE_LENGTH,15],["422",3],["423",kt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],kt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",kt.VARIABLE_LENGTH,15],["391",kt.VARIABLE_LENGTH,18],["392",kt.VARIABLE_LENGTH,15],["393",kt.VARIABLE_LENGTH,18],["703",kt.VARIABLE_LENGTH,30]],kt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",kt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",kt.VARIABLE_LENGTH,20],["8003",kt.VARIABLE_LENGTH,30],["8004",kt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",kt.VARIABLE_LENGTH,30],["8008",kt.VARIABLE_LENGTH,12],["8018",18],["8020",kt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",kt.VARIABLE_LENGTH,70],["8200",kt.VARIABLE_LENGTH,70]];class xt{constructor(t){this.buffer=new S,this.information=t}decodeAllCodes(t,e){let r=e,n=null;for(;;){let e=this.decodeGeneralPurposeField(r,n),o=kt.parseFieldsInGeneralPurpose(e.getNewString());if(null!=o&&t.append(o),n=e.isRemaining()?""+e.getRemainingValue():null,r===e.getNewPosition())break;r=e.getNewPosition()}return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let e=this.extractNumericValueFromBitArray(t,4);return new Ft(this.information.getSize(),0===e?Ft.FNC1:e-1,Ft.FNC1)}let e=this.extractNumericValueFromBitArray(t,7);return new Ft(t+7,(e-8)/11,(e-8)%11)}extractNumericValueFromBitArray(t,e){return xt.extractNumericValueFromBitArray(this.information,t,e)}static extractNumericValueFromBitArray(t,e,r){let n=0;for(let o=0;o<r;++o)t.get(e+o)&&(n|=1<<r-o-1);return n}decodeGeneralPurposeField(t,e){this.buffer.setLengthToZero(),null!=e&&this.buffer.append(e),this.current.setPosition(t);let r=this.parseBlocks();return null!=r&&r.isRemaining()?new Lt(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Lt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,e;do{let r=this.current.getPosition();if(this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished()),r===this.current.getPosition()&&!t)break}while(!t);return e.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let e;return e=t.isSecondDigitFNC1()?new Lt(this.current.getPosition(),this.buffer.toString()):new Lt(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Mt(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let t=new Lt(this.current.getPosition(),this.buffer.toString());return new Mt(!0,t)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Mt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let t=new Lt(this.current.getPosition(),this.buffer.toString());return new Mt(!0,t)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Mt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let t=new Lt(this.current.getPosition(),this.buffer.toString());return new Mt(!0,t)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Mt(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(t,8);return n>=232&&n<253}decodeIsoIec646(t){let e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new Bt(t+5,Bt.FNC1);if(e>=5&&e<15)return new Bt(t+5,"0"+(e-5));let r,n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<90)return new Bt(t+7,""+(n+1));if(n>=90&&n<116)return new Bt(t+7,""+(n+7));switch(this.extractNumericValueFromBitArray(t,8)){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new _}return new Bt(t+8,r)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63}decodeAlphanumeric(t){let e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new Bt(t+5,Bt.FNC1);if(e>=5&&e<15)return new Bt(t+5,"0"+(e-5));let r,n=this.extractNumericValueFromBitArray(t,6);if(n>=32&&n<58)return new Bt(t+6,""+(n+33));switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new J("Decoding invalid alphanumeric value: "+n)}return new Bt(t+6,r)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<5&&e+t<this.information.getSize();++e)if(2===e){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0}}class Vt{constructor(t){this.information=t,this.generalDecoder=new xt(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ut extends Vt{constructor(t){super(t)}encodeCompressedGtin(t,e){t.append("(01)");let r=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,e,r)}encodeCompressedGtinWithoutAI(t,e,r){for(let n=0;n<4;++n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(e+10*n,10);r/100==0&&t.append("0"),r/10==0&&t.append("0"),t.append(r)}Ut.appendCheckDigit(t,r)}static appendCheckDigit(t,e){let r=0;for(let n=0;n<13;n++){let o=t.charAt(n+e).charCodeAt(0)-"0".charCodeAt(0);r+=0==(1&n)?3*o:o}r=10-r%10,10===r&&(r=0),t.append(r)}}Ut.GTIN_SIZE=40;class Ht extends Ut{constructor(t){super(t)}parseInformation(){let t=new S;t.append("(01)");let e=t.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(Ht.HEADER_SIZE,4);return t.append(r),this.encodeCompressedGtinWithoutAI(t,Ht.HEADER_SIZE+4,e),this.getGeneralDecoder().decodeAllCodes(t,Ht.HEADER_SIZE+44)}}Ht.HEADER_SIZE=4;class Gt extends Vt{constructor(t){super(t)}parseInformation(){let t=new S;return this.getGeneralDecoder().decodeAllCodes(t,Gt.HEADER_SIZE)}}Gt.HEADER_SIZE=5;class Xt extends Ut{constructor(t){super(t)}encodeCompressedWeight(t,e,r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e,r);this.addWeightCode(t,n);let o=this.checkWeight(n),i=1e5;for(let a=0;a<5;++a)o/i==0&&t.append("0"),i/=10;t.append(o)}}class Wt extends Xt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Wt.HEADER_SIZE+Xt.GTIN_SIZE+Wt.WEIGHT_SIZE)throw new T;let t=new S;return this.encodeCompressedGtin(t,Wt.HEADER_SIZE),this.encodeCompressedWeight(t,Wt.HEADER_SIZE+Xt.GTIN_SIZE,Wt.WEIGHT_SIZE),t.toString()}}Wt.HEADER_SIZE=5,Wt.WEIGHT_SIZE=15;class zt extends Wt{constructor(t){super(t)}addWeightCode(t,e){t.append("(3103)")}checkWeight(t){return t}}class Yt extends Wt{constructor(t){super(t)}addWeightCode(t,e){t.append(e<1e4?"(3202)":"(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Zt extends Ut{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Zt.HEADER_SIZE+Ut.GTIN_SIZE)throw new T;let t=new S;this.encodeCompressedGtin(t,Zt.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(Zt.HEADER_SIZE+Ut.GTIN_SIZE,Zt.LAST_DIGIT_SIZE);t.append("(392"),t.append(e),t.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(Zt.HEADER_SIZE+Ut.GTIN_SIZE+Zt.LAST_DIGIT_SIZE,null);return t.append(r.getNewString()),t.toString()}}Zt.HEADER_SIZE=8,Zt.LAST_DIGIT_SIZE=2;class jt extends Ut{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<jt.HEADER_SIZE+Ut.GTIN_SIZE)throw new T;let t=new S;this.encodeCompressedGtin(t,jt.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(jt.HEADER_SIZE+Ut.GTIN_SIZE,jt.LAST_DIGIT_SIZE);t.append("(393"),t.append(e),t.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(jt.HEADER_SIZE+Ut.GTIN_SIZE+jt.LAST_DIGIT_SIZE,jt.FIRST_THREE_DIGITS_SIZE);r/100==0&&t.append("0"),r/10==0&&t.append("0"),t.append(r);let n=this.getGeneralDecoder().decodeGeneralPurposeField(jt.HEADER_SIZE+Ut.GTIN_SIZE+jt.LAST_DIGIT_SIZE+jt.FIRST_THREE_DIGITS_SIZE,null);return t.append(n.getNewString()),t.toString()}}jt.HEADER_SIZE=8,jt.LAST_DIGIT_SIZE=2,jt.FIRST_THREE_DIGITS_SIZE=10;class Kt extends Xt{constructor(t,e,r){super(t),this.dateCode=r,this.firstAIdigits=e}parseInformation(){if(this.getInformation().getSize()!=Kt.HEADER_SIZE+Kt.GTIN_SIZE+Kt.WEIGHT_SIZE+Kt.DATE_SIZE)throw new T;let t=new S;return this.encodeCompressedGtin(t,Kt.HEADER_SIZE),this.encodeCompressedWeight(t,Kt.HEADER_SIZE+Kt.GTIN_SIZE,Kt.WEIGHT_SIZE),this.encodeCompressedDate(t,Kt.HEADER_SIZE+Kt.GTIN_SIZE+Kt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,e){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(e,Kt.DATE_SIZE);if(38400==r)return;t.append("("),t.append(this.dateCode),t.append(")");let n=r%32;r/=32;let o=r%12+1;r/=12;let i=r;i/10==0&&t.append("0"),t.append(i),o/10==0&&t.append("0"),t.append(o),n/10==0&&t.append("0"),t.append(n)}addWeightCode(t,e){t.append("("),t.append(this.firstAIdigits),t.append(e/1e5),t.append(")")}checkWeight(t){return t%1e5}}Kt.HEADER_SIZE=8,Kt.WEIGHT_SIZE=20,Kt.DATE_SIZE=16;class qt{constructor(t,e,r,n){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=n}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(t,e){return t instanceof qt&&qt.equalsOrNull(t.leftchar,e.leftchar)&&qt.equalsOrNull(t.rightchar,e.rightchar)&&qt.equalsOrNull(t.finderpattern,e.finderpattern)}static equalsOrNull(t,e){return null===t?null===e:qt.equals(t,e)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Qt{constructor(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,e){return t instanceof Qt&&this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed}checkEqualitity(t,e){if(!t||!e)return;let r;return t.forEach((t,n)=>{e.forEach(e=>{t.getLeftChar().getValue()===e.getLeftChar().getValue()&&t.getRightChar().getValue()===e.getRightChar().getValue()&&t.getFinderPatter().getValue()===e.getFinderPatter().getValue()&&(r=!0)})}),r}}class Jt extends Ot{constructor(){super(...arguments),this.pairs=new Array(Jt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2]}decodeRow(t,e,r){this.pairs.length=0,this.startFromEven=!1;try{return Jt.constructResult(this.decodeRow2pairs(t,e))}catch(n){}return this.pairs.length=0,this.startFromEven=!0,Jt.constructResult(this.decodeRow2pairs(t,e))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,e){let r,n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(e,this.pairs,t))}catch(o){if(o instanceof T){if(!this.pairs.length)throw new T;n=!0}}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(t,!1),r){let t=this.checkRowsBoolean(!1);if(null!=t)return t;if(t=this.checkRowsBoolean(!0),null!=t)return t}throw new T}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let e=null;try{e=this.checkRows(new Array,0)}catch(r){console.log(r)}return t&&(this.rows=this.rows.reverse()),e}checkRows(t,e){for(let n=e;n<this.rows.length;n++){let e=this.rows[n];this.pairs.length=0;for(let r of t)this.pairs.push(r.getPairs());if(this.pairs.push(e.getPairs()),!Jt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let o=new Array(t);o.push(e);try{return this.checkRows(o,n+1)}catch(r){console.log(r)}}throw new T}static isValidSequence(t){for(let e of Jt.FINDER_PATTERN_SEQUENCES){if(t.length>e.length)continue;let r=!0;for(let n=0;n<t.length;n++)if(t[n].getFinderPattern().getValue()!=e[n]){r=!1;break}if(r)return!0}return!1}storeRow(t,e){let r=0,n=!1,o=!1;for(;r<this.rows.length;){let e=this.rows[r];if(e.getRowNumber()>t){o=e.isEquivalent(this.pairs);break}n=e.isEquivalent(this.pairs),r++}o||n||Jt.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new Qt(this.pairs,t,e)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,e){for(let r of e)if(r.getPairs().length!==t.length)for(let e of r.getPairs())for(let r of t)if(qt.equals(e,r))break}static isPartialRow(t,e){for(let r of e){let e=!0;for(let n of t){let t=!1;for(let e of r.getPairs())if(n.equals(e)){t=!0;break}if(!t){e=!1;break}}if(e)return!0}return!1}getRows(){return this.rows}static constructResult(t){let e=function(t){try{if(t.get(1))return new Ht(t);if(!t.get(2))return new Gt(t);switch(xt.extractNumericValueFromBitArray(t,1,4)){case 4:return new zt(t);case 5:return new Yt(t)}switch(xt.extractNumericValueFromBitArray(t,1,5)){case 12:return new Zt(t);case 13:return new jt(t)}switch(xt.extractNumericValueFromBitArray(t,1,7)){case 56:return new Kt(t,"310","11");case 57:return new Kt(t,"320","11");case 58:return new Kt(t,"310","13");case 59:return new Kt(t,"320","13");case 60:return new Kt(t,"310","15");case 61:return new Kt(t,"320","15");case 62:return new Kt(t,"310","17");case 63:return new Kt(t,"320","17")}}catch(e){throw console.log(e),new J("unknown decoder: "+t)}}(class{static buildBitArray(t){let e=2*t.length-1;null==t[t.length-1].getRightChar()&&(e-=1);let r=new w(12*e),n=0,o=t[0].getRightChar().getValue();for(let i=11;i>=0;--i)0!=(o&1<<i)&&r.set(n),n++;for(let i=1;i<t.length;++i){let e=t[i],o=e.getLeftChar().getValue();for(let t=11;t>=0;--t)0!=(o&1<<t)&&r.set(n),n++;if(null!=e.getRightChar()){let t=e.getRightChar().getValue();for(let e=11;e>=0;--e)0!=(t&1<<e)&&r.set(n),n++}}return r}}.buildBitArray(t)).parseInformation(),r=t[0].getFinderPattern().getResultPoints(),n=t[t.length-1].getFinderPattern().getResultPoints();return new F(e,null,null,[r[0],r[1],n[0],n[1]],x.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),e=t.getLeftChar(),r=t.getRightChar();if(null==r)return!1;let n=r.getChecksumPortion(),o=2;for(let i=1;i<this.pairs.size();++i){let t=this.pairs.get(i);n+=t.getLeftChar().getChecksumPortion(),o++;let e=t.getRightChar();null!=e&&(n+=e.getChecksumPortion(),o++)}return n%=211,211*(o-4)+n==e.getValue()}static getNextSecondBar(t,e){let r;return t.get(e)?(r=t.getNextUnset(e),r=t.getNextSet(r)):(r=t.getNextSet(e),r=t.getNextUnset(r)),r}retrieveNextPair(t,e,r){let n,o=e.length%2==0;this.startFromEven&&(o=!o);let i=!0,a=-1;do{this.findNextPair(t,e,a),n=this.parseFoundFinderPattern(t,r,o),null==n?a=Jt.getNextSecondBar(t,this.startEnd[0]):i=!1}while(i);let s,u=this.decodeDataCharacter(t,n,o,!0);if(!this.isEmptyPair(e)&&e[e.length-1].mustBeLast())throw new T;try{s=this.decodeDataCharacter(t,n,o,!1)}catch(c){s=null,console.log(c)}return new qt(u,s,n,!0)}isEmptyPair(t){return 0===t.length}findNextPair(t,e,r){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let o,i=t.getSize();o=r>=0?r:this.isEmptyPair(e)?0:e[e.length-1].getFinderPattern().getStartEnd()[1];let a=e.length%2!=0;this.startFromEven&&(a=!a);let s=!1;for(;o<i&&(s=!t.get(o),s);)o++;let u=0,c=o;for(let h=o;h<i;h++)if(t.get(h)!=s)n[u]++;else{if(3==u){if(a&&Jt.reverseCounters(n),Jt.isFinderPattern(n))return this.startEnd[0]=c,void(this.startEnd[1]=h);a&&Jt.reverseCounters(n),c+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,u--}else u++;n[u]=1,s=!s}throw new T}static reverseCounters(t){let e=t.length;for(let r=0;r<e/2;++r){let n=t[r];t[r]=t[e-r-1],t[e-r-1]=n}}parseFoundFinderPattern(t,e,r){let n,o,i;if(r){let e=this.startEnd[0]-1;for(;e>=0&&!t.get(e);)e--;e++,n=this.startEnd[0]-e,o=e,i=this.startEnd[1]}else o=this.startEnd[0],i=t.getNextUnset(this.startEnd[1]+1),n=i-this.startEnd[1];let a,s=this.getDecodeFinderCounters();l.arraycopy(s,0,s,1,s.length-1),s[0]=n;try{a=this.parseFinderValue(s,Jt.FINDER_PATTERNS)}catch(u){return null}return new bt(a,[o,i],o,i,e)}decodeDataCharacter(t,e,r,n){let o=this.getDataCharacterCounters();for(let E=0;E<o.length;E++)o[E]=0;if(n)Jt.recordPatternInReverse(t,e.getStartEnd()[0],o);else{Jt.recordPattern(t,e.getStartEnd()[1],o);for(let t=0,e=o.length-1;t<e;t++,e--){let r=o[t];o[t]=o[e],o[e]=r}}let i=et.sum(new Int32Array(o))/17,a=(e.getStartEnd()[1]-e.getStartEnd()[0])/15;if(Math.abs(i-a)/a>.3)throw new T;let s=this.getOddCounts(),u=this.getEvenCounts(),c=this.getOddRoundingErrors(),h=this.getEvenRoundingErrors();for(let E=0;E<o.length;E++){let t=1*o[E]/i,e=t+.5;if(e<1){if(t<.3)throw new T;e=1}else if(e>8){if(t>8.7)throw new T;e=8}let r=E/2;0==(1&E)?(s[r]=e,c[r]=t-e):(u[r]=e,h[r]=t-e)}this.adjustOddEvenCounts(17);let l=4*e.getValue()+(r?0:2)+(n?0:1)-1,d=0,f=0;for(let E=s.length-1;E>=0;E--)Jt.isNotA1left(e,r,n)&&(f+=s[E]*Jt.WEIGHTS[l][2*E]),d+=s[E];let g=0;for(let E=u.length-1;E>=0;E--)Jt.isNotA1left(e,r,n)&&(g+=u[E]*Jt.WEIGHTS[l][2*E+1]);let p=f+g;if(0!=(1&d)||d>13||d<4)throw new T;let w=(13-d)/2,m=Jt.SYMBOL_WIDEST[w],A=9-m,_=Dt.getRSSvalue(s,m,!0),C=Dt.getRSSvalue(u,A,!1);return new Nt(_*Jt.EVEN_TOTAL_SUBSET[w]+C+Jt.GSUM[w],p)}static isNotA1left(t,e,r){return!(0==t.getValue()&&e&&r)}adjustOddEvenCounts(t){let e=et.sum(new Int32Array(this.getOddCounts())),r=et.sum(new Int32Array(this.getEvenCounts())),n=!1,o=!1;e>13?o=!0:e<4&&(n=!0);let i=!1,a=!1;r>13?a=!0:r<4&&(i=!0);let s=e+r-t,u=1==(1&e),c=0==(1&r);if(1==s)if(u){if(c)throw new T;o=!0}else{if(!c)throw new T;a=!0}else if(-1==s)if(u){if(c)throw new T;n=!0}else{if(!c)throw new T;i=!0}else{if(0!=s)throw new T;if(u){if(!c)throw new T;e<r?(n=!0,a=!0):(o=!0,i=!0)}else if(c)throw new T}if(n){if(o)throw new T;Jt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Jt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),i){if(a)throw new T;Jt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Jt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Jt.SYMBOL_WIDEST=[7,5,4,3,1],Jt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Jt.GSUM=[0,348,1388,2948,3988],Jt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Jt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Jt.FINDER_PAT_A=0,Jt.FINDER_PAT_B=1,Jt.FINDER_PAT_C=2,Jt.FINDER_PAT_D=3,Jt.FINDER_PAT_E=4,Jt.FINDER_PAT_F=5,Jt.FINDER_PATTERN_SEQUENCES=[[Jt.FINDER_PAT_A,Jt.FINDER_PAT_A],[Jt.FINDER_PAT_A,Jt.FINDER_PAT_B,Jt.FINDER_PAT_B],[Jt.FINDER_PAT_A,Jt.FINDER_PAT_C,Jt.FINDER_PAT_B,Jt.FINDER_PAT_D],[Jt.FINDER_PAT_A,Jt.FINDER_PAT_E,Jt.FINDER_PAT_B,Jt.FINDER_PAT_D,Jt.FINDER_PAT_C],[Jt.FINDER_PAT_A,Jt.FINDER_PAT_E,Jt.FINDER_PAT_B,Jt.FINDER_PAT_D,Jt.FINDER_PAT_D,Jt.FINDER_PAT_F],[Jt.FINDER_PAT_A,Jt.FINDER_PAT_E,Jt.FINDER_PAT_B,Jt.FINDER_PAT_D,Jt.FINDER_PAT_E,Jt.FINDER_PAT_F,Jt.FINDER_PAT_F],[Jt.FINDER_PAT_A,Jt.FINDER_PAT_A,Jt.FINDER_PAT_B,Jt.FINDER_PAT_B,Jt.FINDER_PAT_C,Jt.FINDER_PAT_C,Jt.FINDER_PAT_D,Jt.FINDER_PAT_D],[Jt.FINDER_PAT_A,Jt.FINDER_PAT_A,Jt.FINDER_PAT_B,Jt.FINDER_PAT_B,Jt.FINDER_PAT_C,Jt.FINDER_PAT_C,Jt.FINDER_PAT_D,Jt.FINDER_PAT_E,Jt.FINDER_PAT_E],[Jt.FINDER_PAT_A,Jt.FINDER_PAT_A,Jt.FINDER_PAT_B,Jt.FINDER_PAT_B,Jt.FINDER_PAT_C,Jt.FINDER_PAT_C,Jt.FINDER_PAT_D,Jt.FINDER_PAT_E,Jt.FINDER_PAT_F,Jt.FINDER_PAT_F],[Jt.FINDER_PAT_A,Jt.FINDER_PAT_A,Jt.FINDER_PAT_B,Jt.FINDER_PAT_B,Jt.FINDER_PAT_C,Jt.FINDER_PAT_D,Jt.FINDER_PAT_D,Jt.FINDER_PAT_E,Jt.FINDER_PAT_E,Jt.FINDER_PAT_F,Jt.FINDER_PAT_F]],Jt.MAX_PAIRS=11;class $t extends Nt{constructor(t,e,r){super(t,e),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class te extends Ot{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,e,r){const n=this.decodePair(e,!1,t,r);te.addOrTally(this.possibleLeftPairs,n),e.reverse();let o=this.decodePair(e,!0,t,r);te.addOrTally(this.possibleRightPairs,o),e.reverse();for(let i of this.possibleLeftPairs)if(i.getCount()>1)for(let t of this.possibleRightPairs)if(t.getCount()>1&&te.checkChecksum(i,t))return te.constructResult(i,t);throw new T}static addOrTally(t,e){if(null==e)return;let r=!1;for(let n of t)if(n.getValue()===e.getValue()){n.incrementCount(),r=!0;break}r||t.push(e)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,e){let r=4537077*t.getValue()+e.getValue(),n=new String(r).toString(),o=new S;for(let u=13-n.length;u>0;u--)o.append("0");o.append(n);let i=0;for(let u=0;u<13;u++){let t=o.charAt(u).charCodeAt(0)-"0".charCodeAt(0);i+=0==(1&u)?3*t:t}i=10-i%10,10===i&&(i=0),o.append(i.toString());let a=t.getFinderPattern().getResultPoints(),s=e.getFinderPattern().getResultPoints();return new F(o.toString(),null,0,[a[0],a[1],s[0],s[1]],x.RSS_14,(new Date).getTime())}static checkChecksum(t,e){let r=(t.getChecksumPortion()+16*e.getChecksumPortion())%79,n=9*t.getFinderPattern().getValue()+e.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n}decodePair(t,e,r,n){try{let o=this.findFinderPattern(t,e),i=this.parseFoundFinderPattern(t,r,e,o),a=null==n?null:n.get(A.NEED_RESULT_POINT_CALLBACK);if(null!=a){let n=(o[0]+o[1])/2;e&&(n=t.getSize()-1-n),a.foundPossibleResultPoint(new nt(n,r))}let s=this.decodeDataCharacter(t,i,!0),u=this.decodeDataCharacter(t,i,!1);return new $t(1597*s.getValue()+u.getValue(),s.getChecksumPortion()+4*u.getChecksumPortion(),i)}catch(o){return null}}decodeDataCharacter(t,e,r){let n=this.getDataCharacterCounters();for(let p=0;p<n.length;p++)n[p]=0;if(r)gt.recordPatternInReverse(t,e.getStartEnd()[0],n);else{gt.recordPattern(t,e.getStartEnd()[1]+1,n);for(let t=0,e=n.length-1;t<e;t++,e--){let r=n[t];n[t]=n[e],n[e]=r}}let o=r?16:15,i=et.sum(new Int32Array(n))/o,a=this.getOddCounts(),s=this.getEvenCounts(),u=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let p=0;p<n.length;p++){let t=n[p]/i,e=Math.floor(t+.5);e<1?e=1:e>8&&(e=8);let r=Math.floor(p/2);0==(1&p)?(a[r]=e,u[r]=t-e):(s[r]=e,c[r]=t-e)}this.adjustOddEvenCounts(r,o);let h=0,l=0;for(let p=a.length-1;p>=0;p--)l*=9,l+=a[p],h+=a[p];let d=0,f=0;for(let p=s.length-1;p>=0;p--)d*=9,d+=s[p],f+=s[p];let g=l+3*d;if(r){if(0!=(1&h)||h>12||h<4)throw new T;let t=(12-h)/2,e=te.OUTSIDE_ODD_WIDEST[t],r=9-e,n=Dt.getRSSvalue(a,e,!1),o=Dt.getRSSvalue(s,r,!0);return new Nt(n*te.OUTSIDE_EVEN_TOTAL_SUBSET[t]+o+te.OUTSIDE_GSUM[t],g)}{if(0!=(1&f)||f>10||f<4)throw new T;let t=(10-f)/2,e=te.INSIDE_ODD_WIDEST[t],r=9-e,n=Dt.getRSSvalue(a,e,!0),o=Dt.getRSSvalue(s,r,!1);return new Nt(o*te.INSIDE_ODD_TOTAL_SUBSET[t]+n+te.INSIDE_GSUM[t],g)}}findFinderPattern(t,e){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let n=t.getSize(),o=!1,i=0;for(;i<n&&(o=!t.get(i),e!==o);)i++;let a=0,s=i;for(let u=i;u<n;u++)if(t.get(u)!==o)r[a]++;else{if(3===a){if(Ot.isFinderPattern(r))return[s,u];s+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,a--}else a++;r[a]=1,o=!o}throw new T}parseFoundFinderPattern(t,e,r,n){let o=t.get(n[0]),i=n[0]-1;for(;i>=0&&o!==t.get(i);)i--;i++;const a=n[0]-i,s=this.getDecodeFinderCounters(),u=new Int32Array(s.length);l.arraycopy(s,0,u,1,s.length-1),u[0]=a;const c=this.parseFinderValue(u,te.FINDER_PATTERNS);let h=i,d=n[1];return r&&(h=t.getSize()-1-h,d=t.getSize()-1-d),new bt(c,[i,n[1]],h,d,e)}adjustOddEvenCounts(t,e){let r=et.sum(new Int32Array(this.getOddCounts())),n=et.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1,a=!1,s=!1;t?(r>12?i=!0:r<4&&(o=!0),n>12?s=!0:n<4&&(a=!0)):(r>11?i=!0:r<5&&(o=!0),n>10?s=!0:n<4&&(a=!0));let u=r+n-e,c=(1&r)==(t?1:0),h=1==(1&n);if(1===u)if(c){if(h)throw new T;i=!0}else{if(!h)throw new T;s=!0}else if(-1===u)if(c){if(h)throw new T;o=!0}else{if(!h)throw new T;a=!0}else{if(0!==u)throw new T;if(c){if(!h)throw new T;r<n?(o=!0,s=!0):(i=!0,a=!0)}else if(h)throw new T}if(o){if(i)throw new T;Ot.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&Ot.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new T;Ot.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&Ot.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}te.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],te.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],te.OUTSIDE_GSUM=[0,161,961,2015,2715],te.INSIDE_GSUM=[0,336,1036,1516],te.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],te.INSIDE_ODD_WIDEST=[2,4,6,8],te.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ee extends gt{constructor(t){super(),this.readers=[];const e=t?t.get(A.POSSIBLE_FORMATS):null,r=t&&void 0!==t.get(A.ASSUME_CODE_39_CHECK_DIGIT);e&&((e.includes(x.EAN_13)||e.includes(x.UPC_A)||e.includes(x.EAN_8)||e.includes(x.UPC_E))&&this.readers.push(new Rt(t)),e.includes(x.CODE_39)&&this.readers.push(new wt(r)),e.includes(x.CODE_128)&&this.readers.push(new pt),e.includes(x.ITF)&&this.readers.push(new mt),e.includes(x.RSS_14)&&this.readers.push(new te),e.includes(x.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),this.readers.push(new Jt))),0===this.readers.length&&(this.readers.push(new Rt(t)),this.readers.push(new wt),this.readers.push(new Rt(t)),this.readers.push(new pt),this.readers.push(new mt),this.readers.push(new te))}decodeRow(t,e,r){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,e,r)}catch(n){}throw new T}reset(){this.readers.forEach(t=>t.reset())}}class re{constructor(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ne{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class oe{constructor(t,e,r,n,o,i){this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=o,this.ecBlocks=i;let a=0;const s=i.getECCodewords(),u=i.getECBlocks();for(let c of u)a+=c.getCount()*(c.getDataCodewords()+s);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,e){if(0!=(1&t)||0!=(1&e))throw new _;for(let r of oe.VERSIONS)if(r.symbolSizeRows===t&&r.symbolSizeColumns===e)return r;throw new _}toString(){return""+this.versionNumber}static buildVersions(){return[new oe(1,10,10,8,8,new re(5,new ne(1,3))),new oe(2,12,12,10,10,new re(7,new ne(1,5))),new oe(3,14,14,12,12,new re(10,new ne(1,8))),new oe(4,16,16,14,14,new re(12,new ne(1,12))),new oe(5,18,18,16,16,new re(14,new ne(1,18))),new oe(6,20,20,18,18,new re(18,new ne(1,22))),new oe(7,22,22,20,20,new re(20,new ne(1,30))),new oe(8,24,24,22,22,new re(24,new ne(1,36))),new oe(9,26,26,24,24,new re(28,new ne(1,44))),new oe(10,32,32,14,14,new re(36,new ne(1,62))),new oe(11,36,36,16,16,new re(42,new ne(1,86))),new oe(12,40,40,18,18,new re(48,new ne(1,114))),new oe(13,44,44,20,20,new re(56,new ne(1,144))),new oe(14,48,48,22,22,new re(68,new ne(1,174))),new oe(15,52,52,24,24,new re(42,new ne(2,102))),new oe(16,64,64,14,14,new re(56,new ne(2,140))),new oe(17,72,72,16,16,new re(36,new ne(4,92))),new oe(18,80,80,18,18,new re(48,new ne(4,114))),new oe(19,88,88,20,20,new re(56,new ne(4,144))),new oe(20,96,96,22,22,new re(68,new ne(4,174))),new oe(21,104,104,24,24,new re(56,new ne(6,136))),new oe(22,120,120,18,18,new re(68,new ne(6,175))),new oe(23,132,132,20,20,new re(62,new ne(8,163))),new oe(24,144,144,22,22,new re(62,new ne(8,156),new ne(2,155))),new oe(25,8,18,6,16,new re(7,new ne(1,5))),new oe(26,8,32,6,14,new re(11,new ne(1,10))),new oe(27,12,26,10,24,new re(14,new ne(1,16))),new oe(28,12,36,10,16,new re(18,new ne(1,22))),new oe(29,16,36,14,16,new re(24,new ne(1,32))),new oe(30,16,48,14,22,new re(28,new ne(1,49)))]}}oe.VERSIONS=oe.buildVersions();class ie{constructor(t){const e=t.getHeight();if(e<8||e>144||0!=(1&e))throw new _;this.version=ie.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new v(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const e=t.getHeight(),r=t.getWidth();return oe.getVersionForDimensions(e,r)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let e=0,r=4,n=0;const o=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth();let a=!1,s=!1,u=!1,c=!1;do{if(r!==o||0!==n||a)if(r!==o-2||0!==n||0==(3&i)||s)if(r!==o+4||2!==n||0!=(7&i)||u)if(r!==o-2||0!==n||4!=(7&i)||c){do{r<o&&n>=0&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,o,i)),r-=2,n+=2}while(r>=0&&n<i);r+=1,n+=3;do{r>=0&&n<i&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,o,i)),r+=2,n-=2}while(r<o&&n>=0);r+=3,n+=1}else t[e++]=255&this.readCorner4(o,i),r-=2,n+=2,c=!0;else t[e++]=255&this.readCorner3(o,i),r-=2,n+=2,u=!0;else t[e++]=255&this.readCorner2(o,i),r-=2,n+=2,s=!0;else t[e++]=255&this.readCorner1(o,i),r-=2,n+=2,a=!0}while(r<o||n<i);if(e!==this.version.getTotalCodewords())throw new _;return t}readModule(t,e,r,n){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=n,t+=4-(n+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)}readUtah(t,e,r,n){let o=0;return this.readModule(t-2,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t-2,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e,r,n)&&(o|=1),o<<=1,this.readModule(t,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t,e,r,n)&&(o|=1),o}readCorner1(t,e){let r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r}readCorner2(t,e){let r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r}readCorner3(t,e){let r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r}readCorner4(t,e){let r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r}extractDataRegion(t){const e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new s("Dimension of bitMatrix must match the version size");const n=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),i=e/n|0,a=r/o|0,u=new v(a*o,i*n);for(let s=0;s<i;++s){const e=s*n;for(let r=0;r<a;++r){const i=r*o;for(let a=0;a<n;++a){const c=s*(n+2)+1+a,h=e+a;for(let e=0;e<o;++e)t.get(r*(o+2)+1+e,c)&&u.set(i+e,h)}}}return u}}class ae{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e){const r=e.getECBlocks();let n=0;const o=r.getECBlocks();for(let s of o)n+=s.getCount();const i=new Array(n);let a=0;for(let s of o)for(let t=0;t<s.getCount();t++){const t=s.getDataCodewords(),e=r.getECCodewords()+t;i[a++]=new ae(t,new Uint8Array(e))}const u=i[0].codewords.length-r.getECCodewords(),c=u-1;let h=0;for(let s=0;s<c;s++)for(let e=0;e<a;e++)i[e].codewords[s]=t[h++];const l=24===e.getVersionNumber(),d=l?8:a;for(let s=0;s<d;s++)i[s].codewords[u-1]=t[h++];const f=i[0].codewords.length;for(let s=u;s<f;s++)for(let e=0;e<a;e++){const r=l?(e+8)%a:e;i[r].codewords[l&&r>7?s-1:s]=t[h++]}if(h!==t.length)throw new s;return i}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class se{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new s(""+t);let e=0,r=this.bitOffset,n=this.byteOffset;const o=this.bytes;if(r>0){const i=8-r,a=t<i?t:i,s=i-a;e=(o[n]&255>>8-a<<s)>>s,t-=a,r+=a,8===r&&(r=0,n++)}if(t>0){for(;t>=8;)e=e<<8|255&o[n],n++,t-=8;if(t>0){const i=8-t;e=e<<t|(o[n]&255>>i<<i)>>i,r+=t}}return this.bitOffset=r,this.byteOffset=n,e}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"}(U||(U={}));class ue{static decode(t){const e=new se(t),r=new S,n=new S,o=new Array;let i=U.ASCII_ENCODE;do{if(i===U.ASCII_ENCODE)i=this.decodeAsciiSegment(e,r,n);else{switch(i){case U.C40_ENCODE:this.decodeC40Segment(e,r);break;case U.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case U.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case U.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case U.BASE256_ENCODE:this.decodeBase256Segment(e,r,o);break;default:throw new _}i=U.ASCII_ENCODE}}while(i!==U.PAD_ENCODE&&e.available()>0);return n.length()>0&&r.append(n.toString()),new Y(t,r.toString(),0===o.length?null:o,null)}static decodeAsciiSegment(t,e,r){let n=!1;do{let o=t.readBits(8);if(0===o)throw new _;if(o<=128)return n&&(o+=128),e.append(String.fromCharCode(o-1)),U.ASCII_ENCODE;if(129===o)return U.PAD_ENCODE;if(o<=229){const t=o-130;t<10&&e.append("0"),e.append(""+t)}else switch(o){case 230:return U.C40_ENCODE;case 231:return U.BASE256_ENCODE;case 232:e.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:n=!0;break;case 236:e.append("[)>\x1e05\x1d"),r.insert(0,"\x1e\x04");break;case 237:e.append("[)>\x1e06\x1d"),r.insert(0,"\x1e\x04");break;case 238:return U.ANSIX12_ENCODE;case 239:return U.TEXT_ENCODE;case 240:return U.EDIFACT_ENCODE;case 241:break;default:if(254!==o||0!==t.available())throw new _}}while(t.available()>0);return U.ASCII_ENCODE}static decodeC40Segment(t,e){let r=!1;const n=[];let o=0;do{if(8===t.available())return;const i=t.readBits(8);if(254===i)return;this.parseTwoBytes(i,t.readBits(8),n);for(let t=0;t<3;t++){const i=n[t];switch(o){case 0:if(i<3)o=i+1;else{if(!(i<this.C40_BASIC_SET_CHARS.length))throw new _;{const t=this.C40_BASIC_SET_CHARS[i];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}}break;case 1:r?(e.append(String.fromCharCode(i+128)),r=!1):e.append(String.fromCharCode(i)),o=0;break;case 2:if(i<this.C40_SHIFT2_SET_CHARS.length){const t=this.C40_SHIFT2_SET_CHARS[i];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}else switch(i){case 27:e.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new _}o=0;break;case 3:r?(e.append(String.fromCharCode(i+224)),r=!1):e.append(String.fromCharCode(i+96)),o=0;break;default:throw new _}}}while(t.available()>0)}static decodeTextSegment(t,e){let r=!1,n=[],o=0;do{if(8===t.available())return;const i=t.readBits(8);if(254===i)return;this.parseTwoBytes(i,t.readBits(8),n);for(let t=0;t<3;t++){const i=n[t];switch(o){case 0:if(i<3)o=i+1;else{if(!(i<this.TEXT_BASIC_SET_CHARS.length))throw new _;{const t=this.TEXT_BASIC_SET_CHARS[i];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}}break;case 1:r?(e.append(String.fromCharCode(i+128)),r=!1):e.append(String.fromCharCode(i)),o=0;break;case 2:if(i<this.TEXT_SHIFT2_SET_CHARS.length){const t=this.TEXT_SHIFT2_SET_CHARS[i];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}else switch(i){case 27:e.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new _}o=0;break;case 3:if(!(i<this.TEXT_SHIFT3_SET_CHARS.length))throw new _;{const t=this.TEXT_SHIFT3_SET_CHARS[i];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t),o=0}break;default:throw new _}}}while(t.available()>0)}static decodeAnsiX12Segment(t,e){const r=[];do{if(8===t.available())return;const n=t.readBits(8);if(254===n)return;this.parseTwoBytes(n,t.readBits(8),r);for(let t=0;t<3;t++){const n=r[t];switch(n){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(n<14)e.append(String.fromCharCode(n+44));else{if(!(n<40))throw new _;e.append(String.fromCharCode(n+51))}}}}while(t.available()>0)}static parseTwoBytes(t,e,r){let n=(t<<8)+e-1,o=Math.floor(n/1600);r[0]=o,n-=1600*o,o=Math.floor(n/40),r[1]=o,r[2]=n-40*o}static decodeEdifactSegment(t,e){do{if(t.available()<=16)return;for(let r=0;r<4;r++){let r=t.readBits(6);if(31===r){const e=8-t.getBitOffset();return void(8!==e&&t.readBits(e))}0==(32&r)&&(r|=64),e.append(String.fromCharCode(r))}}while(t.available()>0)}static decodeBase256Segment(t,e,r){let n=1+t.getByteOffset();const o=this.unrandomize255State(t.readBits(8),n++);let i;if(i=0===o?t.available()/8|0:o<250?o:250*(o-249)+this.unrandomize255State(t.readBits(8),n++),i<0)throw new _;const a=new Uint8Array(i);for(let u=0;u<i;u++){if(t.available()<8)throw new _;a[u]=this.unrandomize255State(t.readBits(8),n++)}r.push(a);try{e.append(y.decode(a,I.ISO88591))}catch(s){throw new J("Platform does not support required encoding: "+s.message)}}static unrandomize255State(t,e){const r=t-(149*e%255+1);return r>=0?r:r+256}}ue.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ue.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ue.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ue.TEXT_SHIFT2_SET_CHARS=ue.C40_SHIFT2_SET_CHARS,ue.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class ce{constructor(){this.rsDecoder=new $(q.DATA_MATRIX_FIELD_256)}decode(t){const e=new ie(t),r=e.getVersion(),n=e.readCodewords(),o=ae.getDataBlocks(n,r);let i=0;for(let u of o)i+=u.getNumDataCodewords();const a=new Uint8Array(i),s=o.length;for(let u=0;u<s;u++){const t=o[u],e=t.getCodewords(),r=t.getNumDataCodewords();this.correctErrors(e,r);for(let n=0;n<r;n++)a[n*s+u]=e[n]}return ue.decode(a)}correctErrors(t,e){const r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(n){throw new c}for(let o=0;o<e;o++)t[o]=r[o]}}class he{constructor(t){this.image=t,this.rectangleDetector=new at(this.image)}detect(){const t=this.rectangleDetector.detect();let e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new T;e=this.shiftToModuleCenter(e);const r=e[0],n=e[1],o=e[2],i=e[3];let a=this.transitionsBetween(r,i)+1,s=this.transitionsBetween(o,i)+1;1==(1&a)&&(a+=1),1==(1&s)&&(s+=1),4*a<7*s&&4*s<7*a&&(a=s=Math.max(a,s));let u=he.sampleGrid(this.image,r,n,o,i,a,s);return new ot(u,[r,n,o,i])}static shiftPoint(t,e,r){let n=(e.getX()-t.getX())/(r+1),o=(e.getY()-t.getY())/(r+1);return new nt(t.getX()+n,t.getY()+o)}static moveAway(t,e,r){let n=t.getX(),o=t.getY();return n<e?n-=1:n+=1,o<r?o-=1:o+=1,new nt(n,o)}detectSolid1(t){let e=t[0],r=t[1],n=t[3],o=t[2],i=this.transitionsBetween(e,r),a=this.transitionsBetween(r,n),s=this.transitionsBetween(n,o),u=this.transitionsBetween(o,e),c=i,h=[o,e,r,n];return c>a&&(c=a,h[0]=e,h[1]=r,h[2]=n,h[3]=o),c>s&&(c=s,h[0]=r,h[1]=n,h[2]=o,h[3]=e),c>u&&(h[0]=n,h[1]=o,h[2]=e,h[3]=r),h}detectSolid2(t){let e=t[0],r=t[1],n=t[2],o=t[3],i=this.transitionsBetween(e,o),a=he.shiftPoint(r,n,4*(i+1)),s=he.shiftPoint(n,r,4*(i+1));return this.transitionsBetween(a,e)<this.transitionsBetween(s,o)?(t[0]=e,t[1]=r,t[2]=n,t[3]=o):(t[0]=r,t[1]=n,t[2]=o,t[3]=e),t}correctTopRight(t){let e=t[0],r=t[1],n=t[2],o=t[3],i=this.transitionsBetween(e,o),a=this.transitionsBetween(r,o),s=he.shiftPoint(e,r,4*(a+1)),u=he.shiftPoint(n,r,4*(i+1));i=this.transitionsBetween(s,o),a=this.transitionsBetween(u,o);let c=new nt(o.getX()+(n.getX()-r.getX())/(i+1),o.getY()+(n.getY()-r.getY())/(i+1)),h=new nt(o.getX()+(e.getX()-r.getX())/(a+1),o.getY()+(e.getY()-r.getY())/(a+1));return this.isValid(c)?this.isValid(h)?this.transitionsBetween(s,c)+this.transitionsBetween(u,c)>this.transitionsBetween(s,h)+this.transitionsBetween(u,h)?c:h:c:this.isValid(h)?h:null}shiftToModuleCenter(t){let e=t[0],r=t[1],n=t[2],o=t[3],i=this.transitionsBetween(e,o)+1,a=this.transitionsBetween(n,o)+1,s=he.shiftPoint(e,r,4*a),u=he.shiftPoint(n,r,4*i);i=this.transitionsBetween(s,o)+1,a=this.transitionsBetween(u,o)+1,1==(1&i)&&(i+=1),1==(1&a)&&(a+=1);let c,h,l=(e.getX()+r.getX()+n.getX()+o.getX())/4,d=(e.getY()+r.getY()+n.getY()+o.getY())/4;return e=he.moveAway(e,l,d),r=he.moveAway(r,l,d),n=he.moveAway(n,l,d),o=he.moveAway(o,l,d),s=he.shiftPoint(e,r,4*a),s=he.shiftPoint(s,o,4*i),c=he.shiftPoint(r,e,4*a),c=he.shiftPoint(c,n,4*i),u=he.shiftPoint(n,o,4*a),u=he.shiftPoint(u,r,4*i),h=he.shiftPoint(o,n,4*a),h=he.shiftPoint(h,e,4*i),[s,c,u,h]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,e,r,n,o,i,a){return ht.getInstance().sampleGrid(t,i,a,.5,.5,i-.5,.5,i-.5,a-.5,.5,a-.5,e.getX(),e.getY(),o.getX(),o.getY(),n.getX(),n.getY(),r.getX(),r.getY())}transitionsBetween(t,e){let r=Math.trunc(t.getX()),n=Math.trunc(t.getY()),o=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.abs(i-n)>Math.abs(o-r);if(a){let t=r;r=n,n=t,t=o,o=i,i=t}let s=Math.abs(o-r),u=Math.abs(i-n),c=-s/2,h=n<i?1:-1,l=r<o?1:-1,d=0,f=this.image.get(a?n:r,a?r:n);for(let g=r,p=n;g!==o;g+=l){let t=this.image.get(a?p:g,a?g:p);if(t!==f&&(d++,f=t),c+=u,c>0){if(p===i)break;p+=h,c-=s}}return d}}class le{constructor(){this.decoder=new ce}decode(t,e=null){let r,n;if(null!=e&&e.has(A.PURE_BARCODE)){const e=le.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(e),n=le.NO_POINTS}else{const e=new he(t.getBlackMatrix()).detect();r=this.decoder.decode(e.getBits()),n=e.getPoints()}const o=r.getRawBytes(),i=new F(r.getText(),o,8*o.length,n,x.DATA_MATRIX,l.currentTimeMillis()),a=r.getByteSegments();null!=a&&i.putMetadata(z.BYTE_SEGMENTS,a);const s=r.getECLevel();return null!=s&&i.putMetadata(z.ERROR_CORRECTION_LEVEL,s),i}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null==e||null==r)throw new T;const n=this.moduleSize(e,t);let o=e[1],i=e[0];const a=(r[0]-i+1)/n,s=(r[1]-o+1)/n;if(a<=0||s<=0)throw new T;const u=n/2;o+=u,i+=u;const c=new v(a,s);for(let h=0;h<s;h++){const e=o+h*n;for(let r=0;r<a;r++)t.get(i+r*n,e)&&c.set(r,h)}return c}static moduleSize(t,e){const r=e.getWidth();let n=t[0];const o=t[1];for(;n<r&&e.get(n,o);)n++;if(n===r)throw new T;const i=n-t[0];if(0===i)throw new T;return i}}le.NO_POINTS=[],function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"}(H||(H={}));class de{constructor(t,e,r){this.value=t,this.stringValue=e,this.bits=r,de.FOR_BITS.set(r,this),de.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return de.L;case"M":return de.M;case"Q":return de.Q;case"H":return de.H;default:throw new a(t+"not available")}}toString(){return this.stringValue}equals(t){return t instanceof de&&this.value===t.value}static forBits(t){if(t<0||t>=de.FOR_BITS.size)throw new s;return de.FOR_BITS.get(t)}}de.FOR_BITS=new Map,de.FOR_VALUE=new Map,de.L=new de(H.L,"L",1),de.M=new de(H.M,"M",0),de.Q=new de(H.Q,"Q",3),de.H=new de(H.H,"H",2);class fe{constructor(t){this.errorCorrectionLevel=de.forBits(t>>3&3),this.dataMask=7&t}static numBitsDiffering(t,e){return p.bitCount(t^e)}static decodeFormatInformation(t,e){const r=fe.doDecodeFormatInformation(t,e);return null!==r?r:fe.doDecodeFormatInformation(t^fe.FORMAT_INFO_MASK_QR,e^fe.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;for(const o of fe.FORMAT_INFO_DECODE_LOOKUP){const i=o[0];if(i===t||i===e)return new fe(o[1]);let a=fe.numBitsDiffering(t,i);a<r&&(n=o[1],r=a),t!==e&&(a=fe.numBitsDiffering(e,i),a<r&&(n=o[1],r=a))}return r<=3?new fe(n):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){return t instanceof fe&&this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}fe.FORMAT_INFO_MASK_QR=21522,fe.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ge{constructor(t,...e){this.ecCodewordsPerBlock=t,this.ecBlocks=e}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const e=this.ecBlocks;for(const r of e)t+=r.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class pe{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class we{constructor(t,e,...r){this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=r;let n=0;const o=r[0].getECCodewordsPerBlock(),i=r[0].getECBlocks();for(const a of i)n+=a.getCount()*(a.getDataCodewords()+o);this.totalCodewords=n}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!=1)throw new _;try{return this.getVersionForNumber((t-17)/4)}catch(e){throw new _}}static getVersionForNumber(t){if(t<1||t>40)throw new s;return we.VERSIONS[t-1]}static decodeVersionInformation(t){let e=Number.MAX_SAFE_INTEGER,r=0;for(let n=0;n<we.VERSION_DECODE_INFO.length;n++){const o=we.VERSION_DECODE_INFO[n];if(o===t)return we.getVersionForNumber(n+7);const i=fe.numBitsDiffering(t,o);i<e&&(r=n+7,e=i)}return e<=3?we.getVersionForNumber(r):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),e=new v(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);const r=this.alignmentPatternCenters.length;for(let n=0;n<r;n++){const t=this.alignmentPatternCenters[n]-2;for(let o=0;o<r;o++)0===n&&(0===o||o===r-1)||n===r-1&&0===o||e.setRegion(this.alignmentPatternCenters[o]-2,t,5,5)}return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e}toString(){return""+this.versionNumber}}we.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),we.VERSIONS=[new we(1,new Int32Array(0),new ge(7,new pe(1,19)),new ge(10,new pe(1,16)),new ge(13,new pe(1,13)),new ge(17,new pe(1,9))),new we(2,Int32Array.from([6,18]),new ge(10,new pe(1,34)),new ge(16,new pe(1,28)),new ge(22,new pe(1,22)),new ge(28,new pe(1,16))),new we(3,Int32Array.from([6,22]),new ge(15,new pe(1,55)),new ge(26,new pe(1,44)),new ge(18,new pe(2,17)),new ge(22,new pe(2,13))),new we(4,Int32Array.from([6,26]),new ge(20,new pe(1,80)),new ge(18,new pe(2,32)),new ge(26,new pe(2,24)),new ge(16,new pe(4,9))),new we(5,Int32Array.from([6,30]),new ge(26,new pe(1,108)),new ge(24,new pe(2,43)),new ge(18,new pe(2,15),new pe(2,16)),new ge(22,new pe(2,11),new pe(2,12))),new we(6,Int32Array.from([6,34]),new ge(18,new pe(2,68)),new ge(16,new pe(4,27)),new ge(24,new pe(4,19)),new ge(28,new pe(4,15))),new we(7,Int32Array.from([6,22,38]),new ge(20,new pe(2,78)),new ge(18,new pe(4,31)),new ge(18,new pe(2,14),new pe(4,15)),new ge(26,new pe(4,13),new pe(1,14))),new we(8,Int32Array.from([6,24,42]),new ge(24,new pe(2,97)),new ge(22,new pe(2,38),new pe(2,39)),new ge(22,new pe(4,18),new pe(2,19)),new ge(26,new pe(4,14),new pe(2,15))),new we(9,Int32Array.from([6,26,46]),new ge(30,new pe(2,116)),new ge(22,new pe(3,36),new pe(2,37)),new ge(20,new pe(4,16),new pe(4,17)),new ge(24,new pe(4,12),new pe(4,13))),new we(10,Int32Array.from([6,28,50]),new ge(18,new pe(2,68),new pe(2,69)),new ge(26,new pe(4,43),new pe(1,44)),new ge(24,new pe(6,19),new pe(2,20)),new ge(28,new pe(6,15),new pe(2,16))),new we(11,Int32Array.from([6,30,54]),new ge(20,new pe(4,81)),new ge(30,new pe(1,50),new pe(4,51)),new ge(28,new pe(4,22),new pe(4,23)),new ge(24,new pe(3,12),new pe(8,13))),new we(12,Int32Array.from([6,32,58]),new ge(24,new pe(2,92),new pe(2,93)),new ge(22,new pe(6,36),new pe(2,37)),new ge(26,new pe(4,20),new pe(6,21)),new ge(28,new pe(7,14),new pe(4,15))),new we(13,Int32Array.from([6,34,62]),new ge(26,new pe(4,107)),new ge(22,new pe(8,37),new pe(1,38)),new ge(24,new pe(8,20),new pe(4,21)),new ge(22,new pe(12,11),new pe(4,12))),new we(14,Int32Array.from([6,26,46,66]),new ge(30,new pe(3,115),new pe(1,116)),new ge(24,new pe(4,40),new pe(5,41)),new ge(20,new pe(11,16),new pe(5,17)),new ge(24,new pe(11,12),new pe(5,13))),new we(15,Int32Array.from([6,26,48,70]),new ge(22,new pe(5,87),new pe(1,88)),new ge(24,new pe(5,41),new pe(5,42)),new ge(30,new pe(5,24),new pe(7,25)),new ge(24,new pe(11,12),new pe(7,13))),new we(16,Int32Array.from([6,26,50,74]),new ge(24,new pe(5,98),new pe(1,99)),new ge(28,new pe(7,45),new pe(3,46)),new ge(24,new pe(15,19),new pe(2,20)),new ge(30,new pe(3,15),new pe(13,16))),new we(17,Int32Array.from([6,30,54,78]),new ge(28,new pe(1,107),new pe(5,108)),new ge(28,new pe(10,46),new pe(1,47)),new ge(28,new pe(1,22),new pe(15,23)),new ge(28,new pe(2,14),new pe(17,15))),new we(18,Int32Array.from([6,30,56,82]),new ge(30,new pe(5,120),new pe(1,121)),new ge(26,new pe(9,43),new pe(4,44)),new ge(28,new pe(17,22),new pe(1,23)),new ge(28,new pe(2,14),new pe(19,15))),new we(19,Int32Array.from([6,30,58,86]),new ge(28,new pe(3,113),new pe(4,114)),new ge(26,new pe(3,44),new pe(11,45)),new ge(26,new pe(17,21),new pe(4,22)),new ge(26,new pe(9,13),new pe(16,14))),new we(20,Int32Array.from([6,34,62,90]),new ge(28,new pe(3,107),new pe(5,108)),new ge(26,new pe(3,41),new pe(13,42)),new ge(30,new pe(15,24),new pe(5,25)),new ge(28,new pe(15,15),new pe(10,16))),new we(21,Int32Array.from([6,28,50,72,94]),new ge(28,new pe(4,116),new pe(4,117)),new ge(26,new pe(17,42)),new ge(28,new pe(17,22),new pe(6,23)),new ge(30,new pe(19,16),new pe(6,17))),new we(22,Int32Array.from([6,26,50,74,98]),new ge(28,new pe(2,111),new pe(7,112)),new ge(28,new pe(17,46)),new ge(30,new pe(7,24),new pe(16,25)),new ge(24,new pe(34,13))),new we(23,Int32Array.from([6,30,54,78,102]),new ge(30,new pe(4,121),new pe(5,122)),new ge(28,new pe(4,47),new pe(14,48)),new ge(30,new pe(11,24),new pe(14,25)),new ge(30,new pe(16,15),new pe(14,16))),new we(24,Int32Array.from([6,28,54,80,106]),new ge(30,new pe(6,117),new pe(4,118)),new ge(28,new pe(6,45),new pe(14,46)),new ge(30,new pe(11,24),new pe(16,25)),new ge(30,new pe(30,16),new pe(2,17))),new we(25,Int32Array.from([6,32,58,84,110]),new ge(26,new pe(8,106),new pe(4,107)),new ge(28,new pe(8,47),new pe(13,48)),new ge(30,new pe(7,24),new pe(22,25)),new ge(30,new pe(22,15),new pe(13,16))),new we(26,Int32Array.from([6,30,58,86,114]),new ge(28,new pe(10,114),new pe(2,115)),new ge(28,new pe(19,46),new pe(4,47)),new ge(28,new pe(28,22),new pe(6,23)),new ge(30,new pe(33,16),new pe(4,17))),new we(27,Int32Array.from([6,34,62,90,118]),new ge(30,new pe(8,122),new pe(4,123)),new ge(28,new pe(22,45),new pe(3,46)),new ge(30,new pe(8,23),new pe(26,24)),new ge(30,new pe(12,15),new pe(28,16))),new we(28,Int32Array.from([6,26,50,74,98,122]),new ge(30,new pe(3,117),new pe(10,118)),new ge(28,new pe(3,45),new pe(23,46)),new ge(30,new pe(4,24),new pe(31,25)),new ge(30,new pe(11,15),new pe(31,16))),new we(29,Int32Array.from([6,30,54,78,102,126]),new ge(30,new pe(7,116),new pe(7,117)),new ge(28,new pe(21,45),new pe(7,46)),new ge(30,new pe(1,23),new pe(37,24)),new ge(30,new pe(19,15),new pe(26,16))),new we(30,Int32Array.from([6,26,52,78,104,130]),new ge(30,new pe(5,115),new pe(10,116)),new ge(28,new pe(19,47),new pe(10,48)),new ge(30,new pe(15,24),new pe(25,25)),new ge(30,new pe(23,15),new pe(25,16))),new we(31,Int32Array.from([6,30,56,82,108,134]),new ge(30,new pe(13,115),new pe(3,116)),new ge(28,new pe(2,46),new pe(29,47)),new ge(30,new pe(42,24),new pe(1,25)),new ge(30,new pe(23,15),new pe(28,16))),new we(32,Int32Array.from([6,34,60,86,112,138]),new ge(30,new pe(17,115)),new ge(28,new pe(10,46),new pe(23,47)),new ge(30,new pe(10,24),new pe(35,25)),new ge(30,new pe(19,15),new pe(35,16))),new we(33,Int32Array.from([6,30,58,86,114,142]),new ge(30,new pe(17,115),new pe(1,116)),new ge(28,new pe(14,46),new pe(21,47)),new ge(30,new pe(29,24),new pe(19,25)),new ge(30,new pe(11,15),new pe(46,16))),new we(34,Int32Array.from([6,34,62,90,118,146]),new ge(30,new pe(13,115),new pe(6,116)),new ge(28,new pe(14,46),new pe(23,47)),new ge(30,new pe(44,24),new pe(7,25)),new ge(30,new pe(59,16),new pe(1,17))),new we(35,Int32Array.from([6,30,54,78,102,126,150]),new ge(30,new pe(12,121),new pe(7,122)),new ge(28,new pe(12,47),new pe(26,48)),new ge(30,new pe(39,24),new pe(14,25)),new ge(30,new pe(22,15),new pe(41,16))),new we(36,Int32Array.from([6,24,50,76,102,128,154]),new ge(30,new pe(6,121),new pe(14,122)),new ge(28,new pe(6,47),new pe(34,48)),new ge(30,new pe(46,24),new pe(10,25)),new ge(30,new pe(2,15),new pe(64,16))),new we(37,Int32Array.from([6,28,54,80,106,132,158]),new ge(30,new pe(17,122),new pe(4,123)),new ge(28,new pe(29,46),new pe(14,47)),new ge(30,new pe(49,24),new pe(10,25)),new ge(30,new pe(24,15),new pe(46,16))),new we(38,Int32Array.from([6,32,58,84,110,136,162]),new ge(30,new pe(4,122),new pe(18,123)),new ge(28,new pe(13,46),new pe(32,47)),new ge(30,new pe(48,24),new pe(14,25)),new ge(30,new pe(42,15),new pe(32,16))),new we(39,Int32Array.from([6,26,54,82,110,138,166]),new ge(30,new pe(20,117),new pe(4,118)),new ge(28,new pe(40,47),new pe(7,48)),new ge(30,new pe(43,24),new pe(22,25)),new ge(30,new pe(10,15),new pe(67,16))),new we(40,Int32Array.from([6,30,58,86,114,142,170]),new ge(30,new pe(19,118),new pe(6,119)),new ge(28,new pe(18,47),new pe(31,48)),new ge(30,new pe(34,24),new pe(34,25)),new ge(30,new pe(20,15),new pe(61,16)))],function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"}(G||(G={}));class me{constructor(t,e){this.value=t,this.isMasked=e}unmaskBitMatrix(t,e){for(let r=0;r<e;r++)for(let n=0;n<e;n++)this.isMasked(r,n)&&t.flip(n,r)}}me.values=new Map([[G.DATA_MASK_000,new me(G.DATA_MASK_000,(t,e)=>0==(t+e&1))],[G.DATA_MASK_001,new me(G.DATA_MASK_001,(t,e)=>0==(1&t))],[G.DATA_MASK_010,new me(G.DATA_MASK_010,(t,e)=>e%3==0)],[G.DATA_MASK_011,new me(G.DATA_MASK_011,(t,e)=>(t+e)%3==0)],[G.DATA_MASK_100,new me(G.DATA_MASK_100,(t,e)=>0==(Math.floor(t/2)+Math.floor(e/3)&1))],[G.DATA_MASK_101,new me(G.DATA_MASK_101,(t,e)=>t*e%6==0)],[G.DATA_MASK_110,new me(G.DATA_MASK_110,(t,e)=>t*e%6<3)],[G.DATA_MASK_111,new me(G.DATA_MASK_111,(t,e)=>0==(t+e+t*e%3&1))]]);class Ae{constructor(t){const e=t.getHeight();if(e<21||1!=(3&e))throw new _;this.bitMatrix=t}readFormatInformation(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;let t=0;for(let o=0;o<6;o++)t=this.copyBit(o,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let o=5;o>=0;o--)t=this.copyBit(8,o,t);const e=this.bitMatrix.getHeight();let r=0;const n=e-7;for(let o=e-1;o>=n;o--)r=this.copyBit(8,o,r);for(let o=e-8;o<e;o++)r=this.copyBit(o,8,r);if(this.parsedFormatInfo=fe.decodeFormatInformation(t,r),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new _}readVersion(){if(null!=this.parsedVersion)return this.parsedVersion;const t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return we.getVersionForNumber(e);let r=0;const n=t-11;for(let i=5;i>=0;i--)for(let e=t-9;e>=n;e--)r=this.copyBit(e,i,r);let o=we.decodeVersionInformation(r);if(null!==o&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;r=0;for(let i=5;i>=0;i--)for(let e=t-9;e>=n;e--)r=this.copyBit(i,e,r);if(o=we.decodeVersionInformation(r),null!==o&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;throw new _}copyBit(t,e,r){return(this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e))?r<<1|1:r<<1}readCodewords(){const t=this.readFormatInformation(),e=this.readVersion(),r=me.values.get(t.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);const o=e.buildFunctionPattern();let i=!0;const a=new Uint8Array(e.getTotalCodewords());let s=0,u=0,c=0;for(let h=n-1;h>0;h-=2){6===h&&h--;for(let t=0;t<n;t++){const e=i?n-1-t:t;for(let t=0;t<2;t++)o.get(h-t,e)||(c++,u<<=1,this.bitMatrix.get(h-t,e)&&(u|=1),8===c&&(a[s++]=u,c=0,u=0))}i=!i}if(s!==e.getTotalCodewords())throw new _;return a}remask(){if(null===this.parsedFormatInfo)return;const t=me.values[this.parsedFormatInfo.getDataMask()],e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let e=0,r=t.getWidth();e<r;e++)for(let n=e+1,o=t.getHeight();n<o;n++)t.get(e,n)!==t.get(n,e)&&(t.flip(n,e),t.flip(e,n))}}class _e{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e,r){if(t.length!==e.getTotalCodewords())throw new s;const n=e.getECBlocksForLevel(r);let o=0;const i=n.getECBlocks();for(const s of i)o+=s.getCount();const a=new Array(o);let u=0;for(const s of i)for(let t=0;t<s.getCount();t++){const t=s.getDataCodewords(),e=n.getECCodewordsPerBlock()+t;a[u++]=new _e(t,new Uint8Array(e))}const c=a[0].codewords.length;let h=a.length-1;for(;h>=0&&a[h].codewords.length!==c;)h--;h++;const l=c-n.getECCodewordsPerBlock();let d=0;for(let s=0;s<l;s++)for(let e=0;e<u;e++)a[e].codewords[s]=t[d++];for(let s=h;s<u;s++)a[s].codewords[l]=t[d++];const f=a[0].codewords.length;for(let s=l;s<f;s++)for(let e=0;e<u;e++)a[e].codewords[e<h?s:s+1]=t[d++];return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"}(X||(X={}));class Ce{constructor(t,e,r,n){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=n,Ce.FOR_BITS.set(n,this),Ce.FOR_VALUE.set(t,this)}static forBits(t){const e=Ce.FOR_BITS.get(t);if(void 0===e)throw new s;return e}getCharacterCountBits(t){const e=t.getVersionNumber();let r;return r=e<=9?0:e<=26?1:2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(t){return t instanceof Ce&&this.value===t.value}toString(){return this.stringValue}}Ce.FOR_BITS=new Map,Ce.FOR_VALUE=new Map,Ce.TERMINATOR=new Ce(X.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ce.NUMERIC=new Ce(X.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ce.ALPHANUMERIC=new Ce(X.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ce.STRUCTURED_APPEND=new Ce(X.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ce.BYTE=new Ce(X.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ce.ECI=new Ce(X.ECI,"ECI",Int32Array.from([0,0,0]),7),Ce.KANJI=new Ce(X.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ce.FNC1_FIRST_POSITION=new Ce(X.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ce.FNC1_SECOND_POSITION=new Ce(X.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ce.HANZI=new Ce(X.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ee{static decode(t,e,r,n){const o=new se(t);let i=new S;const a=new Array;let s=-1,u=-1;try{let t,r=null,c=!1;do{if(o.available()<4)t=Ce.TERMINATOR;else{const e=o.readBits(4);t=Ce.forBits(e)}switch(t){case Ce.TERMINATOR:break;case Ce.FNC1_FIRST_POSITION:case Ce.FNC1_SECOND_POSITION:c=!0;break;case Ce.STRUCTURED_APPEND:if(o.available()<16)throw new _;s=o.readBits(8),u=o.readBits(8);break;case Ce.ECI:const h=Ee.parseECIValue(o);if(r=C.getCharacterSetECIByValue(h),null===r)throw new _;break;case Ce.HANZI:const l=o.readBits(4),d=o.readBits(t.getCharacterCountBits(e));l===Ee.GB2312_SUBSET&&Ee.decodeHanziSegment(o,i,d);break;default:const f=o.readBits(t.getCharacterCountBits(e));switch(t){case Ce.NUMERIC:Ee.decodeNumericSegment(o,i,f);break;case Ce.ALPHANUMERIC:Ee.decodeAlphanumericSegment(o,i,f,c);break;case Ce.BYTE:Ee.decodeByteSegment(o,i,f,r,a,n);break;case Ce.KANJI:Ee.decodeKanjiSegment(o,i,f);break;default:throw new _}}}while(t!==Ce.TERMINATOR)}catch(c){throw new _}return new Y(t,i.toString(),0===a.length?null:a,null===r?null:r.toString(),s,u)}static decodeHanziSegment(t,e,r){if(13*r>t.available())throw new _;const n=new Uint8Array(2*r);let o=0;for(;r>0;){const e=t.readBits(13);let i=e/96<<8&4294967295|e%96;i+=i<959?41377:42657,n[o]=i>>8&255,n[o+1]=255&i,o+=2,r--}try{e.append(y.decode(n,I.GB2312))}catch(i){throw new _(i)}}static decodeKanjiSegment(t,e,r){if(13*r>t.available())throw new _;const n=new Uint8Array(2*r);let o=0;for(;r>0;){const e=t.readBits(13);let i=e/192<<8&4294967295|e%192;i+=i<7936?33088:49472,n[o]=i>>8,n[o+1]=i,o+=2,r--}try{e.append(y.decode(n,I.SHIFT_JIS))}catch(i){throw new _(i)}}static decodeByteSegment(t,e,r,n,o,i){if(8*r>t.available())throw new _;const a=new Uint8Array(r);for(let c=0;c<r;c++)a[c]=t.readBits(8);let s;s=null===n?I.guessEncoding(a,i):n.getName();try{e.append(y.decode(a,s))}catch(u){throw new _(u)}o.push(a)}static toAlphaNumericChar(t){if(t>=Ee.ALPHANUMERIC_CHARS.length)throw new _;return Ee.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,e,r,n){const o=e.length();for(;r>1;){if(t.available()<11)throw new _;const n=t.readBits(11);e.append(Ee.toAlphaNumericChar(Math.floor(n/45))),e.append(Ee.toAlphaNumericChar(n%45)),r-=2}if(1===r){if(t.available()<6)throw new _;e.append(Ee.toAlphaNumericChar(t.readBits(6)))}if(n)for(let i=o;i<e.length();i++)"%"===e.charAt(i)&&(i<e.length()-1&&"%"===e.charAt(i+1)?e.deleteCharAt(i+1):e.setCharAt(i,String.fromCharCode(29)))}static decodeNumericSegment(t,e,r){for(;r>=3;){if(t.available()<10)throw new _;const n=t.readBits(10);if(n>=1e3)throw new _;e.append(Ee.toAlphaNumericChar(Math.floor(n/100))),e.append(Ee.toAlphaNumericChar(Math.floor(n/10)%10)),e.append(Ee.toAlphaNumericChar(n%10)),r-=3}if(2===r){if(t.available()<7)throw new _;const r=t.readBits(7);if(r>=100)throw new _;e.append(Ee.toAlphaNumericChar(Math.floor(r/10))),e.append(Ee.toAlphaNumericChar(r%10))}else if(1===r){if(t.available()<4)throw new _;const r=t.readBits(4);if(r>=10)throw new _;e.append(Ee.toAlphaNumericChar(r))}}static parseECIValue(t){const e=t.readBits(8);if(0==(128&e))return 127&e;if(128==(192&e))return(63&e)<<8&4294967295|t.readBits(8);if(192==(224&e))return(31&e)<<16&4294967295|t.readBits(16);throw new _}}Ee.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ee.GB2312_SUBSET=1;class ye{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||null===t||t.length<3)return;const e=t[0];t[0]=t[2],t[2]=e}}class Ie{constructor(){this.rsDecoder=new $(q.QR_CODE_FIELD_256)}decodeBooleanArray(t,e){return this.decodeBitMatrix(v.parseFromBooleanArray(t),e)}decodeBitMatrix(t,e){const r=new Ae(t);let n=null;try{return this.decodeBitMatrixParser(r,e)}catch(o){n=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const t=this.decodeBitMatrixParser(r,e);return t.setOther(new ye(!0)),t}catch(o){if(null!==n)throw n;throw o}}decodeBitMatrixParser(t,e){const r=t.readVersion(),n=t.readFormatInformation().getErrorCorrectionLevel(),o=t.readCodewords(),i=_e.getDataBlocks(o,r,n);let a=0;for(const c of i)a+=c.getNumDataCodewords();const s=new Uint8Array(a);let u=0;for(const c of i){const t=c.getCodewords(),e=c.getNumDataCodewords();this.correctErrors(t,e);for(let r=0;r<e;r++)s[u++]=t[r]}return Ee.decode(s,r,n,e)}correctErrors(t,e){const r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(n){throw new c}for(let o=0;o<e;o++)t[o]=r[o]}}class Se extends nt{constructor(t,e,r){super(t,e),this.estimatedModuleSize=r}aboutEquals(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){const e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,r){const n=(this.getX()+e)/2,o=(this.getY()+t)/2;return new Se(n,o,(this.estimatedModuleSize+r)/2)}}class ve{constructor(t,e,r,n,o,i,a){this.image=t,this.startX=e,this.startY=r,this.width=n,this.height=o,this.moduleSize=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,e=this.height,r=t+this.width,n=this.startY+e/2,o=new Int32Array(3),i=this.image;for(let a=0;a<e;a++){const e=n+(0==(1&a)?Math.floor((a+1)/2):-Math.floor((a+1)/2));o[0]=0,o[1]=0,o[2]=0;let s=t;for(;s<r&&!i.get(s,e);)s++;let u=0;for(;s<r;){if(i.get(s,e))if(1===u)o[1]++;else if(2===u){if(this.foundPatternCross(o)){const t=this.handlePossibleCenter(o,e,s);if(null!==t)return t}o[0]=o[2],o[1]=1,o[2]=0,u=1}else o[++u]++;else 1===u&&u++,o[u]++;s++}if(this.foundPatternCross(o)){const t=this.handlePossibleCenter(o,e,r);if(null!==t)return t}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new T}static centerFromEnd(t,e){return e-t[2]-t[1]/2}foundPatternCross(t){const e=this.moduleSize,r=e/2;for(let n=0;n<3;n++)if(Math.abs(e-t[n])>=r)return!1;return!0}crossCheckVertical(t,e,r,n){const o=this.image,i=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;let s=t;for(;s>=0&&o.get(e,s)&&a[1]<=r;)a[1]++,s--;if(s<0||a[1]>r)return NaN;for(;s>=0&&!o.get(e,s)&&a[0]<=r;)a[0]++,s--;if(a[0]>r)return NaN;for(s=t+1;s<i&&o.get(e,s)&&a[1]<=r;)a[1]++,s++;if(s===i||a[1]>r)return NaN;for(;s<i&&!o.get(e,s)&&a[2]<=r;)a[2]++,s++;return a[2]>r||5*Math.abs(a[0]+a[1]+a[2]-n)>=2*n?NaN:this.foundPatternCross(a)?ve.centerFromEnd(a,s):NaN}handlePossibleCenter(t,e,r){const n=t[0]+t[1]+t[2],o=ve.centerFromEnd(t,r),i=this.crossCheckVertical(e,o,2*t[1],n);if(!isNaN(i)){const e=(t[0]+t[1]+t[2])/3;for(const t of this.possibleCenters)if(t.aboutEquals(e,i,o))return t.combineEstimate(i,o,e);const r=new Se(o,i,e);this.possibleCenters.push(r),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(r)}return null}}class Te extends nt{constructor(t,e,r,n){super(t,e),this.estimatedModuleSize=r,this.count=n,void 0===n&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){const e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,r){const n=this.count+1,o=(this.count*this.getX()+e)/n,i=(this.count*this.getY()+t)/n;return new Te(o,i,(this.count*this.estimatedModuleSize+r)/n,n)}}class Re{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Oe{constructor(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const e=null!=t&&void 0!==t.get(A.TRY_HARDER),r=null!=t&&void 0!==t.get(A.PURE_BARCODE),n=this.image,o=n.getHeight(),i=n.getWidth();let a=Math.floor(3*o/(4*Oe.MAX_MODULES));(a<Oe.MIN_SKIP||e)&&(a=Oe.MIN_SKIP);let s=!1;const u=new Int32Array(5);for(let h=a-1;h<o&&!s;h+=a){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;let t=0;for(let e=0;e<i;e++)if(n.get(e,h))1==(1&t)&&t++,u[t]++;else if(0==(1&t))if(4===t)if(Oe.foundPatternCross(u)){if(!0!==this.handlePossibleCenter(u,h,e,r)){u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,t=3;continue}if(a=2,!0===this.hasSkipped)s=this.haveMultiplyConfirmedCenters();else{const t=this.findRowSkip();t>u[2]&&(h+=t-u[2]-a,e=i-1)}t=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,t=3;else u[++t]++;else u[t]++;Oe.foundPatternCross(u)&&!0===this.handlePossibleCenter(u,h,i,r)&&(a=u[0],this.hasSkipped&&(s=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return nt.orderBestPatterns(c),new Re(c)}static centerFromEnd(t,e){return e-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let e=0;for(let o=0;o<5;o++){const r=t[o];if(0===r)return!1;e+=r}if(e<7)return!1;const r=e/7,n=r/2;return Math.abs(r-t[0])<n&&Math.abs(r-t[1])<n&&Math.abs(3*r-t[2])<3*n&&Math.abs(r-t[3])<n&&Math.abs(r-t[4])<n}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,e,r,n){const o=this.getCrossCheckStateCount();let i=0;const a=this.image;for(;t>=i&&e>=i&&a.get(e-i,t-i);)o[2]++,i++;if(t<i||e<i)return!1;for(;t>=i&&e>=i&&!a.get(e-i,t-i)&&o[1]<=r;)o[1]++,i++;if(t<i||e<i||o[1]>r)return!1;for(;t>=i&&e>=i&&a.get(e-i,t-i)&&o[0]<=r;)o[0]++,i++;if(o[0]>r)return!1;const s=a.getHeight(),u=a.getWidth();for(i=1;t+i<s&&e+i<u&&a.get(e+i,t+i);)o[2]++,i++;if(t+i>=s||e+i>=u)return!1;for(;t+i<s&&e+i<u&&!a.get(e+i,t+i)&&o[3]<r;)o[3]++,i++;if(t+i>=s||e+i>=u||o[3]>=r)return!1;for(;t+i<s&&e+i<u&&a.get(e+i,t+i)&&o[4]<r;)o[4]++,i++;return!(o[4]>=r)&&Math.abs(o[0]+o[1]+o[2]+o[3]+o[4]-n)<2*n&&Oe.foundPatternCross(o)}crossCheckVertical(t,e,r,n){const o=this.image,i=o.getHeight(),a=this.getCrossCheckStateCount();let s=t;for(;s>=0&&o.get(e,s);)a[2]++,s--;if(s<0)return NaN;for(;s>=0&&!o.get(e,s)&&a[1]<=r;)a[1]++,s--;if(s<0||a[1]>r)return NaN;for(;s>=0&&o.get(e,s)&&a[0]<=r;)a[0]++,s--;if(a[0]>r)return NaN;for(s=t+1;s<i&&o.get(e,s);)a[2]++,s++;if(s===i)return NaN;for(;s<i&&!o.get(e,s)&&a[3]<r;)a[3]++,s++;if(s===i||a[3]>=r)return NaN;for(;s<i&&o.get(e,s)&&a[4]<r;)a[4]++,s++;return a[4]>=r||5*Math.abs(a[0]+a[1]+a[2]+a[3]+a[4]-n)>=2*n?NaN:Oe.foundPatternCross(a)?Oe.centerFromEnd(a,s):NaN}crossCheckHorizontal(t,e,r,n){const o=this.image,i=o.getWidth(),a=this.getCrossCheckStateCount();let s=t;for(;s>=0&&o.get(s,e);)a[2]++,s--;if(s<0)return NaN;for(;s>=0&&!o.get(s,e)&&a[1]<=r;)a[1]++,s--;if(s<0||a[1]>r)return NaN;for(;s>=0&&o.get(s,e)&&a[0]<=r;)a[0]++,s--;if(a[0]>r)return NaN;for(s=t+1;s<i&&o.get(s,e);)a[2]++,s++;if(s===i)return NaN;for(;s<i&&!o.get(s,e)&&a[3]<r;)a[3]++,s++;if(s===i||a[3]>=r)return NaN;for(;s<i&&o.get(s,e)&&a[4]<r;)a[4]++,s++;return a[4]>=r||5*Math.abs(a[0]+a[1]+a[2]+a[3]+a[4]-n)>=n?NaN:Oe.foundPatternCross(a)?Oe.centerFromEnd(a,s):NaN}handlePossibleCenter(t,e,r,n){const o=t[0]+t[1]+t[2]+t[3]+t[4];let i=Oe.centerFromEnd(t,r),a=this.crossCheckVertical(e,Math.floor(i),t[2],o);if(!isNaN(a)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(a),t[2],o),!isNaN(i)&&(!n||this.crossCheckDiagonal(Math.floor(a),Math.floor(i),t[2],o)))){const t=o/7;let e=!1;const r=this.possibleCenters;for(let n=0,o=r.length;n<o;n++){const o=r[n];if(o.aboutEquals(t,a,i)){r[n]=o.combineEstimate(a,i,t),e=!0;break}}if(!e){const e=new Te(i,a,t);r.push(e),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(e)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const e of this.possibleCenters)if(e.getCount()>=Oe.CENTER_QUORUM){if(null!=t)return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-e.getX())-Math.abs(t.getY()-e.getY()))/2);t=e}return 0}haveMultiplyConfirmedCenters(){let t=0,e=0;const r=this.possibleCenters.length;for(const i of this.possibleCenters)i.getCount()>=Oe.CENTER_QUORUM&&(t++,e+=i.getEstimatedModuleSize());if(t<3)return!1;const n=e/r;let o=0;for(const i of this.possibleCenters)o+=Math.abs(i.getEstimatedModuleSize()-n);return o<=.05*e}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new T;const e=this.possibleCenters;let r;if(t>3){let n=0,o=0;for(const t of this.possibleCenters){const e=t.getEstimatedModuleSize();n+=e,o+=e*e}r=n/t;let i=Math.sqrt(o/t-r*r);e.sort((t,e)=>{const n=Math.abs(e.getEstimatedModuleSize()-r),o=Math.abs(t.getEstimatedModuleSize()-r);return n<o?-1:n>o?1:0});const a=Math.max(.2*r,i);for(let t=0;t<e.length&&e.length>3;t++)Math.abs(e[t].getEstimatedModuleSize()-r)>a&&(e.splice(t,1),t--)}if(e.length>3){let t=0;for(const r of e)t+=r.getEstimatedModuleSize();r=t/e.length,e.sort((t,e)=>{if(e.getCount()===t.getCount()){const n=Math.abs(e.getEstimatedModuleSize()-r),o=Math.abs(t.getEstimatedModuleSize()-r);return n<o?1:n>o?-1:0}return e.getCount()-t.getCount()}),e.splice(3)}return[e[0],e[1],e[2]]}}Oe.CENTER_QUORUM=2,Oe.MIN_SKIP=3,Oe.MAX_MODULES=57;class Ne{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=null==t?null:t.get(A.NEED_RESULT_POINT_CALLBACK);const e=new Oe(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(e)}processFinderPatternInfo(t){const e=t.getTopLeft(),r=t.getTopRight(),n=t.getBottomLeft(),o=this.calculateModuleSize(e,r,n);if(o<1)throw new T("No pattern found in proccess finder.");const i=Ne.computeDimension(e,r,n,o),a=we.getProvisionalVersionForDimension(i),s=a.getDimensionForVersion()-7;let u=null;if(a.getAlignmentPatternCenters().length>0){const t=r.getX()-e.getX()+n.getX(),i=r.getY()-e.getY()+n.getY(),a=1-3/s,c=Math.floor(e.getX()+a*(t-e.getX())),h=Math.floor(e.getY()+a*(i-e.getY()));for(let e=4;e<=16;e<<=1)try{u=this.findAlignmentInRegion(o,c,h,e);break}catch(d){if(!(d instanceof T))throw d}}const c=Ne.createTransform(e,r,n,u,i),h=Ne.sampleGrid(this.image,c,i);let l;return l=null===u?[n,e,r]:[n,e,r,u],new ot(h,l)}static createTransform(t,e,r,n,o){const i=o-3.5;let a,s,u,c;return null!==n?(a=n.getX(),s=n.getY(),u=i-3,c=u):(a=e.getX()-t.getX()+r.getX(),s=e.getY()-t.getY()+r.getY(),u=i,c=i),ut.quadrilateralToQuadrilateral(3.5,3.5,i,3.5,u,c,3.5,i,t.getX(),t.getY(),e.getX(),e.getY(),a,s,r.getX(),r.getY())}static sampleGrid(t,e,r){return ht.getInstance().sampleGridWithTransform(t,r,r,e)}static computeDimension(t,e,r,n){const o=et.round(nt.distance(t,e)/n),i=et.round(nt.distance(t,r)/n);let a=Math.floor((o+i)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new T("Dimensions could be not found.")}return a}calculateModuleSize(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2}calculateModuleSizeOneWay(t,e){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14}sizeOfBlackWhiteBlackRunBothWays(t,e,r,n){let o=this.sizeOfBlackWhiteBlackRun(t,e,r,n),i=1,a=t-(r-t);a<0?(i=t/(t-a),a=0):a>=this.image.getWidth()&&(i=(this.image.getWidth()-1-t)/(a-t),a=this.image.getWidth()-1);let s=Math.floor(e-(n-e)*i);return i=1,s<0?(i=e/(e-s),s=0):s>=this.image.getHeight()&&(i=(this.image.getHeight()-1-e)/(s-e),s=this.image.getHeight()-1),a=Math.floor(t+(a-t)*i),o+=this.sizeOfBlackWhiteBlackRun(t,e,a,s),o-1}sizeOfBlackWhiteBlackRun(t,e,r,n){const o=Math.abs(n-e)>Math.abs(r-t);if(o){let o=t;t=e,e=o,o=r,r=n,n=o}const i=Math.abs(r-t),a=Math.abs(n-e);let s=-i/2;const u=t<r?1:-1,c=e<n?1:-1;let h=0;const l=r+u;for(let d=t,f=e;d!==l;d+=u){if(1===h===this.image.get(o?f:d,o?d:f)){if(2===h)return et.distance(d,f,t,e);h++}if(s+=a,s>0){if(f===n)break;f+=c,s-=i}}return 2===h?et.distance(r+u,n,t,e):NaN}findAlignmentInRegion(t,e,r,n){const o=Math.floor(n*t),i=Math.max(0,e-o),a=Math.min(this.image.getWidth()-1,e+o);if(a-i<3*t)throw new T("Alignment top exceeds estimated module size.");const s=Math.max(0,r-o),u=Math.min(this.image.getHeight()-1,r+o);if(u-s<3*t)throw new T("Alignment bottom exceeds estimated module size.");return new ve(this.image,i,s,a-i,u-s,t,this.resultPointCallback).find()}}class be{constructor(){this.decoder=new Ie}getDecoder(){return this.decoder}decode(t,e){let r,n;if(null!=e&&void 0!==e.get(A.PURE_BARCODE)){const o=be.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,e),n=be.NO_POINTS}else{const o=new Ne(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(o.getBits(),e),n=o.getPoints()}r.getOther()instanceof ye&&r.getOther().applyMirroredCorrection(n);const o=new F(r.getText(),r.getRawBytes(),void 0,n,x.QR_CODE,void 0),i=r.getByteSegments();null!==i&&o.putMetadata(z.BYTE_SEGMENTS,i);const a=r.getECLevel();return null!==a&&o.putMetadata(z.ERROR_CORRECTION_LEVEL,a),r.hasStructuredAppend()&&(o.putMetadata(z.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(z.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null===e||null===r)throw new T;const n=this.moduleSize(e,t);let o=e[1],i=r[1],a=e[0],s=r[0];if(a>=s||o>=i)throw new T;if(i-o!=s-a&&(s=a+(i-o),s>=t.getWidth()))throw new T;const u=Math.round((s-a+1)/n),c=Math.round((i-o+1)/n);if(u<=0||c<=0)throw new T;if(c!==u)throw new T;const h=Math.floor(n/2);o+=h,a+=h;const l=a+Math.floor((u-1)*n)-s;if(l>0){if(l>h)throw new T;a-=l}const d=o+Math.floor((c-1)*n)-i;if(d>0){if(d>h)throw new T;o-=d}const f=new v(u,c);for(let g=0;g<c;g++){const e=o+Math.floor(g*n);for(let r=0;r<u;r++)t.get(a+Math.floor(r*n),e)&&f.set(r,g)}return f}static moduleSize(t,e){const r=e.getHeight(),n=e.getWidth();let o=t[0],i=t[1],a=!0,s=0;for(;o<n&&i<r;){if(a!==e.get(o,i)){if(5==++s)break;a=!a}o++,i++}if(o===n||i===r)throw new T;return(o-t[0])/7}}be.NO_POINTS=new Array;class De{PDF417Common(){}static getBitCountSum(t){return et.sum(t)}static toIntArray(t){if(null==t||!t.length)return De.EMPTY_INT_ARRAY;const e=new Int32Array(t.length);let r=0;for(const n of t)e[r++]=n;return e}static getCodeword(t){const e=g.binarySearch(De.SYMBOL_TABLE,262143&t);return e<0?-1:(De.CODEWORD_TABLE[e]-1)%De.NUMBER_OF_CODEWORDS}}De.NUMBER_OF_CODEWORDS=929,De.MAX_CODEWORDS_IN_BARCODE=De.NUMBER_OF_CODEWORDS-1,De.MIN_ROWS_IN_BARCODE=3,De.MAX_ROWS_IN_BARCODE=90,De.MODULES_IN_CODEWORD=17,De.MODULES_IN_STOP_PATTERN=18,De.BARS_IN_MODULE=8,De.EMPTY_INT_ARRAY=new Int32Array([]),De.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),De.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Me{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class Pe{static detectMultiple(t,e,r){let n=t.getBlackMatrix(),o=Pe.detect(r,n);return o.length||(n=n.clone(),n.rotate180(),o=Pe.detect(r,n)),new Me(n,o)}static detect(t,e){const r=new Array;let n=0,o=0,i=!1;for(;n<e.getHeight();){const a=Pe.findVertices(e,n,o);if(null!=a[0]||null!=a[3]){if(i=!0,r.push(a),!t)break;null!=a[2]?(o=Math.trunc(a[2].getX()),n=Math.trunc(a[2].getY())):(o=Math.trunc(a[4].getX()),n=Math.trunc(a[4].getY()))}else{if(!i)break;i=!1,o=0;for(const t of r)null!=t[1]&&(n=Math.trunc(Math.max(n,t[1].getY()))),null!=t[3]&&(n=Math.max(n,Math.trunc(t[3].getY())));n+=Pe.ROW_STEP}}return r}static findVertices(t,e,r){const n=t.getHeight(),o=t.getWidth(),i=new Array(8);return Pe.copyToResult(i,Pe.findRowsWithPattern(t,n,o,e,r,Pe.START_PATTERN),Pe.INDEXES_START_PATTERN),null!=i[4]&&(r=Math.trunc(i[4].getX()),e=Math.trunc(i[4].getY())),Pe.copyToResult(i,Pe.findRowsWithPattern(t,n,o,e,r,Pe.STOP_PATTERN),Pe.INDEXES_STOP_PATTERN),i}static copyToResult(t,e,r){for(let n=0;n<r.length;n++)t[r[n]]=e[n]}static findRowsWithPattern(t,e,r,n,o,i){const a=new Array(4);let s=!1;const u=new Int32Array(i.length);for(;n<e;n+=Pe.ROW_STEP){let e=Pe.findGuardPattern(t,o,n,r,!1,i,u);if(null!=e){for(;n>0;){const a=Pe.findGuardPattern(t,o,--n,r,!1,i,u);if(null==a){n++;break}e=a}a[0]=new nt(e[0],n),a[1]=new nt(e[1],n),s=!0;break}}let c=n+1;if(s){let n=0,o=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);for(;c<e;c++){const e=Pe.findGuardPattern(t,o[0],c,r,!1,i,u);if(null!=e&&Math.abs(o[0]-e[0])<Pe.MAX_PATTERN_DRIFT&&Math.abs(o[1]-e[1])<Pe.MAX_PATTERN_DRIFT)o=e,n=0;else{if(n>Pe.SKIPPED_ROW_COUNT_MAX)break;n++}}c-=n+1,a[2]=new nt(o[0],c),a[3]=new nt(o[1],c)}return c-n<Pe.BARCODE_MIN_HEIGHT&&g.fill(a,null),a}static findGuardPattern(t,e,r,n,o,i,a){g.fillWithin(a,0,a.length,0);let s=e,u=0;for(;t.get(s,r)&&s>0&&u++<Pe.MAX_PIXEL_DRIFT;)s--;let c=s,h=0,d=i.length;for(let f=o;c<n;c++)if(t.get(c,r)!==f)a[h]++;else{if(h===d-1){if(Pe.patternMatchVariance(a,i,Pe.MAX_INDIVIDUAL_VARIANCE)<Pe.MAX_AVG_VARIANCE)return new Int32Array([s,c]);s+=a[0]+a[1],l.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,f=!f}return h===d-1&&Pe.patternMatchVariance(a,i,Pe.MAX_INDIVIDUAL_VARIANCE)<Pe.MAX_AVG_VARIANCE?new Int32Array([s,c-1]):null}static patternMatchVariance(t,e,r){let n=t.length,o=0,i=0;for(let u=0;u<n;u++)o+=t[u],i+=e[u];if(o<i)return 1/0;let a=o/i;r*=a;let s=0;for(let u=0;u<n;u++){let n=t[u],o=e[u]*a,i=n>o?n-o:o-n;if(i>r)return 1/0;s+=i}return s/o}}Pe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Pe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Pe.MAX_AVG_VARIANCE=.42,Pe.MAX_INDIVIDUAL_VARIANCE=.8,Pe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Pe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Pe.MAX_PIXEL_DRIFT=3,Pe.MAX_PATTERN_DRIFT=5,Pe.SKIPPED_ROW_COUNT_MAX=25,Pe.ROW_STEP=5,Pe.BARCODE_MIN_HEIGHT=10;class Be{constructor(t,e){if(0===e.length)throw new s;this.field=t;let r=e.length;if(r>1&&0===e[0]){let t=1;for(;t<r&&0===e[t];)t++;t===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-t),l.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);if(1===t){let t=0;for(let e of this.coefficients)t=this.field.add(t,e);return t}let e=this.coefficients[0],r=this.coefficients.length;for(let n=1;n<r;n++)e=this.field.add(this.field.multiply(t,e),this.coefficients[n]);return e}add(t){if(!this.field.equals(t.field))throw new s("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,r=t.coefficients;if(e.length>r.length){let t=e;e=r,r=t}let n=new Int32Array(r.length),o=r.length-e.length;l.arraycopy(r,0,n,0,o);for(let i=o;i<r.length;i++)n[i]=this.field.add(e[i-o],r[i]);return new Be(this.field,n)}subtract(t){if(!this.field.equals(t.field))throw new s("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Be?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new s("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Be(this.field,new Int32Array([0]));let e=this.coefficients,r=e.length,n=t.coefficients,o=n.length,i=new Int32Array(r+o-1);for(let a=0;a<r;a++){let t=e[a];for(let e=0;e<o;e++)i[a+e]=this.field.add(i[a+e],this.field.multiply(t,n[e]))}return new Be(this.field,i)}negative(){let t=this.coefficients.length,e=new Int32Array(t);for(let r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new Be(this.field,e)}multiplyScalar(t){if(0===t)return new Be(this.field,new Int32Array([0]));if(1===t)return this;let e=this.coefficients.length,r=new Int32Array(e);for(let n=0;n<e;n++)r[n]=this.field.multiply(this.coefficients[n],t);return new Be(this.field,r)}multiplyByMonomial(t,e){if(t<0)throw new s;if(0===e)return new Be(this.field,new Int32Array([0]));let r=this.coefficients.length,n=new Int32Array(r+t);for(let o=0;o<r;o++)n[o]=this.field.multiply(this.coefficients[o],e);return new Be(this.field,n)}toString(){let t=new S;for(let e=this.getDegree();e>=0;e--){let r=this.getCoefficient(e);0!==r&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),0!==e&&1===r||t.append(r),0!==e&&(1===e?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()}}class Le extends class{add(t,e){return(t+e)%this.modulus}subtract(t,e){return(this.modulus+t-e)%this.modulus}exp(t){return this.expTable[t]}log(t){if(0===t)throw new s;return this.logTable[t]}inverse(t){if(0===t)throw new K;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}{constructor(t,e){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let r=1;for(let n=0;n<t;n++)this.expTable[n]=r,r=r*e%t;for(let n=0;n<t-1;n++)this.logTable[this.expTable[n]]=n;this.zero=new Be(this,new Int32Array([0])),this.one=new Be(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new s;if(0===e)return this.zero;let r=new Int32Array(t+1);return r[0]=e,new Be(this,r)}}Le.PDF417_GF=new Le(De.NUMBER_OF_CODEWORDS,3);class Fe{constructor(){this.field=Le.PDF417_GF}decode(t,e,r){let n=new Be(this.field,t),o=new Int32Array(e),i=!1;for(let c=e;c>0;c--){let t=n.evaluateAt(this.field.exp(c));o[e-c]=t,0!==t&&(i=!0)}if(!i)return 0;let a=this.field.getOne();if(null!=r)for(const c of r){let e=this.field.exp(t.length-1-c),r=new Be(this.field,new Int32Array([this.field.subtract(0,e),1]));a=a.multiply(r)}let s=new Be(this.field,o),u=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),s,e),h=u[0],l=u[1],d=this.findErrorLocations(h),f=this.findErrorMagnitudes(l,h,d);for(let g=0;g<d.length;g++){let e=t.length-1-this.field.log(d[g]);if(e<0)throw c.getChecksumInstance();t[e]=this.field.subtract(t[e],f[g])}return d.length}runEuclideanAlgorithm(t,e,r){if(t.getDegree()<e.getDegree()){let r=t;t=e,e=r}let n=t,o=e,i=this.field.getZero(),a=this.field.getOne();for(;o.getDegree()>=Math.round(r/2);){let t=n,e=i;if(n=o,i=a,n.isZero())throw c.getChecksumInstance();o=t;let r=this.field.getZero(),s=n.getCoefficient(n.getDegree()),u=this.field.inverse(s);for(;o.getDegree()>=n.getDegree()&&!o.isZero();){let t=o.getDegree()-n.getDegree(),e=this.field.multiply(o.getCoefficient(o.getDegree()),u);r=r.add(this.field.buildMonomial(t,e)),o=o.subtract(n.multiplyByMonomial(t,e))}a=r.multiply(i).subtract(e).negative()}let s=a.getCoefficient(0);if(0===s)throw c.getChecksumInstance();let u=this.field.inverse(s);return[a.multiply(u),o.multiply(u)]}findErrorLocations(t){let e=t.getDegree(),r=new Int32Array(e),n=0;for(let o=1;o<this.field.getSize()&&n<e;o++)0===t.evaluateAt(o)&&(r[n]=this.field.inverse(o),n++);if(n!==e)throw c.getChecksumInstance();return r}findErrorMagnitudes(t,e,r){let n=e.getDegree(),o=new Int32Array(n);for(let u=1;u<=n;u++)o[n-u]=this.field.multiply(u,e.getCoefficient(u));let i=new Be(this.field,o),a=r.length,s=new Int32Array(a);for(let u=0;u<a;u++){let e=this.field.inverse(r[u]),n=this.field.subtract(0,t.evaluateAt(e)),o=this.field.inverse(i.evaluateAt(e));s[u]=this.field.multiply(n,o)}return s}}class ke{constructor(t,e,r,n,o){t instanceof ke?this.constructor_2(t):this.constructor_1(t,e,r,n,o)}constructor_1(t,e,r,n,o){const i=null==e||null==r,a=null==n||null==o;if(i&&a)throw new T;i?(e=new nt(0,n.getY()),r=new nt(0,o.getY())):a&&(n=new nt(t.getWidth()-1,e.getY()),o=new nt(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=n,this.bottomRight=o,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),o.getX())),this.minY=Math.trunc(Math.min(e.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,e){return null==t?e:null==e?t:new ke(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)}addMissingRows(t,e,r){let n=this.topLeft,o=this.bottomLeft,i=this.topRight,a=this.bottomRight;if(t>0){let e=r?this.topLeft:this.topRight,o=Math.trunc(e.getY()-t);o<0&&(o=0);let a=new nt(e.getX(),o);r?n=a:i=a}if(e>0){let t=r?this.bottomLeft:this.bottomRight,n=Math.trunc(t.getY()+e);n>=this.image.getHeight()&&(n=this.image.getHeight()-1);let i=new nt(t.getX(),n);r?o=i:a=i}return new ke(this.image,n,o,i,a)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class xe{constructor(t,e,r,n){this.columnCount=t,this.errorCorrectionLevel=n,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ve{constructor(){this.buffer=""}static form(t,e){let r=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(t,n,o,i,a,s){if("%%"===t)return"%";if(void 0===e[++r])return;t=i?parseInt(i.substr(1)):void 0;let u,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":u=e[r];break;case"c":u=e[r][0];break;case"f":u=parseFloat(e[r]).toFixed(t);break;case"p":u=parseFloat(e[r]).toPrecision(t);break;case"e":u=parseFloat(e[r]).toExponential(t);break;case"x":u=parseInt(e[r]).toString(c||16);break;case"d":u=parseFloat(parseInt(e[r],c||10).toPrecision(t)).toFixed(0)}u="object"==typeof u?JSON.stringify(u):(+u).toString(c);let h=parseInt(o),l=o&&o[0]+""=="0"?"0":" ";for(;u.length<h;)u=void 0!==n?u+l:l+u;return u})}format(t,...e){this.buffer+=Ve.form(t,e)}toString(){return this.buffer}}class Ue{constructor(t){this.boundingBox=new ke(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let e=this.getCodeword(t);if(null!=e)return e;for(let r=1;r<Ue.MAX_NEARBY_DISTANCE;r++){let n=this.imageRowToCodewordIndex(t)-r;if(n>=0&&(e=this.codewords[n],null!=e))return e;if(n=this.imageRowToCodewordIndex(t)+r,n<this.codewords.length&&(e=this.codewords[n],null!=e))return e}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Ve;let e=0;for(const r of this.codewords)null!=r?t.format("%3d: %3d|%3d%n",e++,r.getRowNumber(),r.getValue()):t.format("%3d:    |   %n",e++);return t.toString()}}Ue.MAX_NEARBY_DISTANCE=5;class He{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let e=this.values.get(t);null==e&&(e=0),e++,this.values.set(t,e)}getValue(){let t=-1,e=new Array;for(const[r,n]of this.values.entries()){const o={getKey:()=>r,getValue:()=>n};o.getValue()>t?(t=o.getValue(),e=[],e.push(o.getKey())):o.getValue()===t&&e.push(o.getKey())}return De.toIntArray(e)}getConfidence(t){return this.values.get(t)}}class Ge extends Ue{constructor(t,e){super(t),this._isLeft=e}setRowNumbers(){for(let t of this.getCodewords())null!=t&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let e=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(e,t);let r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),s=-1,u=1,c=0;for(let h=i;h<a;h++){if(null==e[h])continue;let r=e[h],n=r.getRowNumber()-s;if(0===n)c++;else if(1===n)u=Math.max(u,c),c=1,s=r.getRowNumber();else if(n<0||r.getRowNumber()>=t.getRowCount()||n>h)e[h]=null;else{let t;t=u>2?(u-2)*n:n;let o=t>=h;for(let r=1;r<=t&&!o;r++)o=null!=e[h-r];o?e[h]=null:(s=r.getRowNumber(),c=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(null==t)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let e=new Int32Array(t.getRowCount());for(let r of this.getCodewords())if(null!=r){let t=r.getRowNumber();if(t>=e.length)continue;e[t]++}return e}adjustIncompleteIndicatorColumnRowNumbers(t){let e=this.getBoundingBox(),r=this._isLeft?e.getTopLeft():e.getTopRight(),n=this._isLeft?e.getBottomLeft():e.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.getCodewords(),s=-1;for(let u=o;u<i;u++){if(null==a[u])continue;let e=a[u];e.setRowNumberAsRowIndicatorColumn();let r=e.getRowNumber()-s;0===r||(1===r?s=e.getRowNumber():e.getRowNumber()>=t.getRowCount()?a[u]=null:s=e.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),e=new He,r=new He,n=new He,o=new He;for(let a of t){if(null==a)continue;a.setRowNumberAsRowIndicatorColumn();let t=a.getValue()%30,i=a.getRowNumber();switch(this._isLeft||(i+=2),i%3){case 0:r.setValue(3*t+1);break;case 1:o.setValue(t/3),n.setValue(t%3);break;case 2:e.setValue(t+1)}}if(0===e.getValue().length||0===r.getValue().length||0===n.getValue().length||0===o.getValue().length||e.getValue()[0]<1||r.getValue()[0]+n.getValue()[0]<De.MIN_ROWS_IN_BARCODE||r.getValue()[0]+n.getValue()[0]>De.MAX_ROWS_IN_BARCODE)return null;let i=new xe(e.getValue()[0],r.getValue()[0],n.getValue()[0],o.getValue()[0]);return this.removeIncorrectCodewords(t,i),i}removeIncorrectCodewords(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(null==t[r])continue;let o=n.getValue()%30,i=n.getRowNumber();if(i>e.getRowCount())t[r]=null;else switch(this._isLeft||(i+=2),i%3){case 0:3*o+1!==e.getRowCountUpperPart()&&(t[r]=null);break;case 1:Math.trunc(o/3)===e.getErrorCorrectionLevel()&&o%3===e.getRowCountLowerPart()||(t[r]=null);break;case 2:o+1!==e.getColumnCount()&&(t[r]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class Xe{constructor(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t,e=De.MAX_CODEWORDS_IN_BARCODE;do{t=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){null!=t&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(0===t)return 0;for(let e=1;e<this.barcodeColumnCount+1;e++){let t=this.detectionResultColumns[e].getCodewords();for(let r=0;r<t.length;r++)null!=t[r]&&(t[r].hasValidRowNumber()||this.adjustRowNumbers(e,r,t))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<t.length;r++)if(null!=t[r]&&null!=e[r]&&t[r].getRowNumber()===e[r].getRowNumber())for(let e=1;e<=this.barcodeColumnCount;e++){let n=this.detectionResultColumns[e].getCodewords()[r];null!=n&&(n.setRowNumber(t[r].getRowNumber()),n.hasValidRowNumber()||(this.detectionResultColumns[e].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++){if(null==e[r])continue;let n=e[r].getRowNumber(),o=0;for(let e=this.barcodeColumnCount+1;e>0&&o<this.ADJUST_ROW_NUMBER_SKIP;e--){let i=this.detectionResultColumns[e].getCodewords()[r];null!=i&&(o=Xe.adjustRowNumberIfValid(n,o,i),i.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let t=0,e=this.detectionResultColumns[0].getCodewords();for(let r=0;r<e.length;r++){if(null==e[r])continue;let n=e[r].getRowNumber(),o=0;for(let e=1;e<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;e++){let i=this.detectionResultColumns[e].getCodewords()[r];null!=i&&(o=Xe.adjustRowNumberIfValid(n,o,i),i.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,e,r){return null==r||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e}adjustRowNumbers(t,e,r){let n=r[e],o=this.detectionResultColumns[t-1].getCodewords(),i=o;null!=this.detectionResultColumns[t+1]&&(i=this.detectionResultColumns[t+1].getCodewords());let a=new Array(14);a[2]=o[e],a[3]=i[e],e>0&&(a[0]=r[e-1],a[4]=o[e-1],a[5]=i[e-1]),e>1&&(a[8]=r[e-2],a[10]=o[e-2],a[11]=i[e-2]),e<r.length-1&&(a[1]=r[e+1],a[6]=o[e+1],a[7]=i[e+1]),e<r.length-2&&(a[9]=r[e+2],a[12]=o[e+2],a[13]=i[e+2]);for(let s of a)if(Xe.adjustRowNumber(n,s))return}static adjustRowNumber(t,e){return!(null==e||!e.hasValidRowNumber()||e.getBucket()!==t.getBucket()||(t.setRowNumber(e.getRowNumber()),0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,e){this.detectionResultColumns[t]=e}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];null==t&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let e=new Ve;for(let r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(let t=0;t<this.barcodeColumnCount+2;t++){if(null==this.detectionResultColumns[t]){e.format("    |   ");continue}let n=this.detectionResultColumns[t].getCodewords()[r];null!=n?e.format(" %3d|%3d",n.getRowNumber(),n.getValue()):e.format("    |   ")}e.format("%n")}return e.toString()}}class We{constructor(t,e,r,n){this.rowNumber=We.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(n)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==We.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}We.BARCODE_ROW_UNKNOWN=-1;class ze{static initialize(){for(let t=0;t<De.SYMBOL_TABLE.length;t++){let e=De.SYMBOL_TABLE[t],r=1&e;for(let n=0;n<De.BARS_IN_MODULE;n++){let o=0;for(;(1&e)===r;)o+=1,e>>=1;r=1&e,ze.RATIOS_TABLE[t]||(ze.RATIOS_TABLE[t]=new Array(De.BARS_IN_MODULE)),ze.RATIOS_TABLE[t][De.BARS_IN_MODULE-n-1]=Math.fround(o/De.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let e=ze.getDecodedCodewordValue(ze.sampleBitCounts(t));return-1!==e?e:ze.getClosestDecodedValue(t)}static sampleBitCounts(t){let e=et.sum(t),r=new Int32Array(De.BARS_IN_MODULE),n=0,o=0;for(let i=0;i<De.MODULES_IN_CODEWORD;i++)o+t[n]<=e/(2*De.MODULES_IN_CODEWORD)+i*e/De.MODULES_IN_CODEWORD&&(o+=t[n],n++),r[n]++;return r}static getDecodedCodewordValue(t){let e=ze.getBitValue(t);return-1===De.getCodeword(e)?-1:e}static getBitValue(t){let e=0;for(let r=0;r<t.length;r++)for(let n=0;n<t[r];n++)e=e<<1|(r%2==0?1:0);return Math.trunc(e)}static getClosestDecodedValue(t){let e=et.sum(t),r=new Array(De.BARS_IN_MODULE);if(e>1)for(let i=0;i<r.length;i++)r[i]=Math.fround(t[i]/e);let n=rt.MAX_VALUE,o=-1;this.bSymbolTableReady||ze.initialize();for(let i=0;i<ze.RATIOS_TABLE.length;i++){let t=0,e=ze.RATIOS_TABLE[i];for(let o=0;o<De.BARS_IN_MODULE;o++){let i=Math.fround(e[o]-r[o]);if(t+=Math.fround(i*i),t>=n)break}t<n&&(n=t,o=De.SYMBOL_TABLE[i])}return o}}ze.bSymbolTableReady=!1,ze.RATIOS_TABLE=new Array(De.SYMBOL_TABLE.length).map(t=>new Array(De.BARS_IN_MODULE));class Ye{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Ze{static parseLong(t,e){return parseInt(t,e)}}class je extends i{}je.kind="NullPointerException";class Ke extends i{}class qe extends class{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,e,r){if(null==t)throw new je;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new d;if(0!==r)for(let n=0;n<r;n++)this.write(t[e+n])}flush(){}close(){}}{constructor(t=32){if(super(),this.count=0,t<0)throw new s("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let e=this.buf.length<<1;if(e-t<0&&(e=t),e<0){if(t<0)throw new Ke;e=p.MAX_VALUE}this.buf=g.copyOfUint8Array(this.buf,e)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,e,r){if(e<0||e>t.length||r<0||e+r-t.length>0)throw new d;this.ensureCapacity(this.count+r),l.arraycopy(t,e,this.buf,this.count,r),this.count+=r}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return g.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?"string"==typeof t?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}function Qe(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Je;function $e(t){if(void 0===Je&&(Je=Qe()),null===Je)throw new Error("BigInt is not supported!");return Je(t)}!function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(W||(W={}));class tr{static decode(t,e){let r=new S(""),n=C.ISO8859_1;r.enableDecoding(n);let o=1,i=t[o++],a=new Ye;for(;o<t[0];){switch(i){case tr.TEXT_COMPACTION_MODE_LATCH:o=tr.textCompaction(t,o,r);break;case tr.BYTE_COMPACTION_MODE_LATCH:case tr.BYTE_COMPACTION_MODE_LATCH_6:o=tr.byteCompaction(i,t,n,o,r);break;case tr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o++]);break;case tr.NUMERIC_COMPACTION_MODE_LATCH:o=tr.numericCompaction(t,o,r);break;case tr.ECI_CHARSET:C.getCharacterSetECIByValue(t[o++]);break;case tr.ECI_GENERAL_PURPOSE:o+=2;break;case tr.ECI_USER_DEFINED:o++;break;case tr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=tr.decodeMacroBlock(t,o,a);break;case tr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tr.MACRO_PDF417_TERMINATOR:throw new _;default:o--,o=tr.textCompaction(t,o,r)}if(!(o<t.length))throw _.getFormatInstance();i=t[o++]}if(0===r.length())throw _.getFormatInstance();let s=new Y(null,r.toString(),null,e);return s.setOther(a),s}static decodeMacroBlock(t,e,r){if(e+tr.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw _.getFormatInstance();let n=new Int32Array(tr.NUMBER_OF_SEQUENCE_CODEWORDS);for(let a=0;a<tr.NUMBER_OF_SEQUENCE_CODEWORDS;a++,e++)n[a]=t[e];r.setSegmentIndex(p.parseInt(tr.decodeBase900toBase10(n,tr.NUMBER_OF_SEQUENCE_CODEWORDS)));let o=new S;e=tr.textCompaction(t,e,o),r.setFileId(o.toString());let i=-1;for(t[e]===tr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(i=e+1);e<t[0];)switch(t[e]){case tr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++e]){case tr.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let n=new S;e=tr.textCompaction(t,e+1,n),r.setFileName(n.toString());break;case tr.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let o=new S;e=tr.textCompaction(t,e+1,o),r.setSender(o.toString());break;case tr.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let i=new S;e=tr.textCompaction(t,e+1,i),r.setAddressee(i.toString());break;case tr.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let a=new S;e=tr.numericCompaction(t,e+1,a),r.setSegmentCount(p.parseInt(a.toString()));break;case tr.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let s=new S;e=tr.numericCompaction(t,e+1,s),r.setTimestamp(Ze.parseLong(s.toString()));break;case tr.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let u=new S;e=tr.numericCompaction(t,e+1,u),r.setChecksum(p.parseInt(u.toString()));break;case tr.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new S;e=tr.numericCompaction(t,e+1,c),r.setFileSize(Ze.parseLong(c.toString()));break;default:throw _.getFormatInstance()}break;case tr.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw _.getFormatInstance()}if(-1!==i){let n=e-i;r.isLastSegment()&&n--,r.setOptionalData(g.copyOfRange(t,i,i+n))}return e}static textCompaction(t,e,r){let n=new Int32Array(2*(t[0]-e)),o=new Int32Array(2*(t[0]-e)),i=0,a=!1;for(;e<t[0]&&!a;){let r=t[e++];if(r<tr.TEXT_COMPACTION_MODE_LATCH)n[i]=r/30,n[i+1]=r%30,i+=2;else switch(r){case tr.TEXT_COMPACTION_MODE_LATCH:n[i++]=tr.TEXT_COMPACTION_MODE_LATCH;break;case tr.BYTE_COMPACTION_MODE_LATCH:case tr.BYTE_COMPACTION_MODE_LATCH_6:case tr.NUMERIC_COMPACTION_MODE_LATCH:case tr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tr.MACRO_PDF417_TERMINATOR:e--,a=!0;break;case tr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n[i]=tr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,r=t[e++],o[i]=r,i++}}return tr.decodeTextCompaction(n,o,i,r),e}static decodeTextCompaction(t,e,r,n){let o=W.ALPHA,i=W.ALPHA,a=0;for(;a<r;){let r=t[a],s="";switch(o){case W.ALPHA:if(r<26)s=String.fromCharCode(65+r);else switch(r){case 26:s=" ";break;case tr.LL:o=W.LOWER;break;case tr.ML:o=W.MIXED;break;case tr.PS:i=o,o=W.PUNCT_SHIFT;break;case tr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a]);break;case tr.TEXT_COMPACTION_MODE_LATCH:o=W.ALPHA}break;case W.LOWER:if(r<26)s=String.fromCharCode(97+r);else switch(r){case 26:s=" ";break;case tr.AS:i=o,o=W.ALPHA_SHIFT;break;case tr.ML:o=W.MIXED;break;case tr.PS:i=o,o=W.PUNCT_SHIFT;break;case tr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a]);break;case tr.TEXT_COMPACTION_MODE_LATCH:o=W.ALPHA}break;case W.MIXED:if(r<tr.PL)s=tr.MIXED_CHARS[r];else switch(r){case tr.PL:o=W.PUNCT;break;case 26:s=" ";break;case tr.LL:o=W.LOWER;break;case tr.AL:o=W.ALPHA;break;case tr.PS:i=o,o=W.PUNCT_SHIFT;break;case tr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a]);break;case tr.TEXT_COMPACTION_MODE_LATCH:o=W.ALPHA}break;case W.PUNCT:if(r<tr.PAL)s=tr.PUNCT_CHARS[r];else switch(r){case tr.PAL:o=W.ALPHA;break;case tr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a]);break;case tr.TEXT_COMPACTION_MODE_LATCH:o=W.ALPHA}break;case W.ALPHA_SHIFT:if(o=i,r<26)s=String.fromCharCode(65+r);else switch(r){case 26:s=" ";break;case tr.TEXT_COMPACTION_MODE_LATCH:o=W.ALPHA}break;case W.PUNCT_SHIFT:if(o=i,r<tr.PAL)s=tr.PUNCT_CHARS[r];else switch(r){case tr.PAL:o=W.ALPHA;break;case tr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a]);break;case tr.TEXT_COMPACTION_MODE_LATCH:o=W.ALPHA}}""!==s&&n.append(s),a++}}static byteCompaction(t,e,r,n,o){let i=new qe,a=0,s=0,u=!1;switch(t){case tr.BYTE_COMPACTION_MODE_LATCH:let t=new Int32Array(6),r=e[n++];for(;n<e[0]&&!u;)switch(t[a++]=r,s=900*s+r,r=e[n++],r){case tr.TEXT_COMPACTION_MODE_LATCH:case tr.BYTE_COMPACTION_MODE_LATCH:case tr.NUMERIC_COMPACTION_MODE_LATCH:case tr.BYTE_COMPACTION_MODE_LATCH_6:case tr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tr.MACRO_PDF417_TERMINATOR:n--,u=!0;break;default:if(a%5==0&&a>0){for(let t=0;t<6;++t)i.write(Number($e(s)>>$e(8*(5-t))));s=0,a=0}}n===e[0]&&r<tr.TEXT_COMPACTION_MODE_LATCH&&(t[a++]=r);for(let e=0;e<a;e++)i.write(t[e]);break;case tr.BYTE_COMPACTION_MODE_LATCH_6:for(;n<e[0]&&!u;){let t=e[n++];if(t<tr.TEXT_COMPACTION_MODE_LATCH)a++,s=900*s+t;else switch(t){case tr.TEXT_COMPACTION_MODE_LATCH:case tr.BYTE_COMPACTION_MODE_LATCH:case tr.NUMERIC_COMPACTION_MODE_LATCH:case tr.BYTE_COMPACTION_MODE_LATCH_6:case tr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tr.MACRO_PDF417_TERMINATOR:n--,u=!0}if(a%5==0&&a>0){for(let t=0;t<6;++t)i.write(Number($e(s)>>$e(8*(5-t))));s=0,a=0}}}return o.append(y.decode(i.toByteArray(),r)),n}static numericCompaction(t,e,r){let n=0,o=!1,i=new Int32Array(tr.MAX_NUMERIC_CODEWORDS);for(;e<t[0]&&!o;){let a=t[e++];if(e===t[0]&&(o=!0),a<tr.TEXT_COMPACTION_MODE_LATCH)i[n]=a,n++;else switch(a){case tr.TEXT_COMPACTION_MODE_LATCH:case tr.BYTE_COMPACTION_MODE_LATCH:case tr.BYTE_COMPACTION_MODE_LATCH_6:case tr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tr.MACRO_PDF417_TERMINATOR:e--,o=!0}(n%tr.MAX_NUMERIC_CODEWORDS==0||a===tr.NUMERIC_COMPACTION_MODE_LATCH||o)&&n>0&&(r.append(tr.decodeBase900toBase10(i,n)),n=0)}return e}static decodeBase900toBase10(t,e){let r=$e(0);for(let o=0;o<e;o++)r+=tr.EXP900[e-o-1]*$e(t[o]);let n=r.toString();if("1"!==n.charAt(0))throw new _;return n.substring(1)}}tr.TEXT_COMPACTION_MODE_LATCH=900,tr.BYTE_COMPACTION_MODE_LATCH=901,tr.NUMERIC_COMPACTION_MODE_LATCH=902,tr.BYTE_COMPACTION_MODE_LATCH_6=924,tr.ECI_USER_DEFINED=925,tr.ECI_GENERAL_PURPOSE=926,tr.ECI_CHARSET=927,tr.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,tr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,tr.MACRO_PDF417_TERMINATOR=922,tr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,tr.MAX_NUMERIC_CODEWORDS=15,tr.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,tr.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,tr.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,tr.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,tr.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,tr.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,tr.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,tr.PL=25,tr.LL=27,tr.AS=27,tr.ML=28,tr.AL=28,tr.PS=29,tr.PAL=29,tr.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",tr.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",tr.EXP900=Qe()?function(){let t=[];t[0]=$e(1);let e=$e(900);t[1]=e;for(let r=2;r<16;r++)t[r]=t[r-1]*e;return t}():[],tr.NUMBER_OF_SEQUENCE_CODEWORDS=2;class er{constructor(){}static decode(t,e,r,n,o,i,a){let s,u=new ke(t,e,r,n,o),c=null,h=null;for(let f=!0;;f=!1){if(null!=e&&(c=er.getRowIndicatorColumn(t,u,e,!0,i,a)),null!=n&&(h=er.getRowIndicatorColumn(t,u,n,!1,i,a)),s=er.merge(c,h),null==s)throw T.getNotFoundInstance();let r=s.getBoundingBox();if(!f||null==r||!(r.getMinY()<u.getMinY()||r.getMaxY()>u.getMaxY()))break;u=r}s.setBoundingBox(u);let l=s.getBarcodeColumnCount()+1;s.setDetectionResultColumn(0,c),s.setDetectionResultColumn(l,h);let d=null!=c;for(let f=1;f<=l;f++){let e,r=d?f:l-f;if(void 0!==s.getDetectionResultColumn(r))continue;e=0===r||r===l?new Ge(u,0===r):new Ue(u),s.setDetectionResultColumn(r,e);let n=-1,o=n;for(let c=u.getMinY();c<=u.getMaxY();c++){if(n=er.getStartColumn(s,r,c,d),n<0||n>u.getMaxX()){if(-1===o)continue;n=o}let h=er.detectCodeword(t,u.getMinX(),u.getMaxX(),d,n,c,i,a);null!=h&&(e.setCodeword(c,h),o=n,i=Math.min(i,h.getWidth()),a=Math.max(a,h.getWidth()))}}return er.createDecoderResult(s)}static merge(t,e){if(null==t&&null==e)return null;let r=er.getBarcodeMetadata(t,e);if(null==r)return null;let n=ke.merge(er.adjustBoundingBox(t),er.adjustBoundingBox(e));return new Xe(r,n)}static adjustBoundingBox(t){if(null==t)return null;let e=t.getRowHeights();if(null==e)return null;let r=er.getMax(e),n=0;for(let a of e)if(n+=r-a,a>0)break;let o=t.getCodewords();for(let a=0;n>0&&null==o[a];a++)n--;let i=0;for(let a=e.length-1;a>=0&&(i+=r-e[a],!(e[a]>0));a--);for(let a=o.length-1;i>0&&null==o[a];a--)i--;return t.getBoundingBox().addMissingRows(n,i,t.isLeft())}static getMax(t){let e=-1;for(let r of t)e=Math.max(e,r);return e}static getBarcodeMetadata(t,e){let r,n;return null==t||null==(r=t.getBarcodeMetadata())?null==e?null:e.getBarcodeMetadata():null==e||null==(n=e.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r}static getRowIndicatorColumn(t,e,r,n,o,i){let a=new Ge(e,n);for(let s=0;s<2;s++){let u=0===s?1:-1,c=Math.trunc(Math.trunc(r.getX()));for(let s=Math.trunc(Math.trunc(r.getY()));s<=e.getMaxY()&&s>=e.getMinY();s+=u){let e=er.detectCodeword(t,0,t.getWidth(),n,c,s,o,i);null!=e&&(a.setCodeword(s,e),c=n?e.getStartX():e.getEndX())}}return a}static adjustCodewordCount(t,e){let r=e[0][1],n=r.getValue(),o=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-er.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===n.length){if(o<1||o>De.MAX_CODEWORDS_IN_BARCODE)throw T.getNotFoundInstance();r.setValue(o)}else n[0]!==o&&r.setValue(o)}static createDecoderResult(t){let e=er.createBarcodeMatrix(t);er.adjustCodewordCount(t,e);let r=new Array,n=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),o=[],i=new Array;for(let s=0;s<t.getBarcodeRowCount();s++)for(let a=0;a<t.getBarcodeColumnCount();a++){let u=e[s][a+1].getValue(),c=s*t.getBarcodeColumnCount()+a;0===u.length?r.push(c):1===u.length?n[c]=u[0]:(i.push(c),o.push(u))}let a=new Array(o.length);for(let s=0;s<a.length;s++)a[s]=o[s];return er.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),n,De.toIntArray(r),De.toIntArray(i),a)}static createDecoderResultFromAmbiguousValues(t,e,r,n,o){let i=new Int32Array(n.length),a=100;for(;a-- >0;){for(let t=0;t<i.length;t++)e[n[t]]=o[t][i[t]];try{return er.decodeCodewords(e,t,r)}catch(s){if(!(s instanceof c))throw s}if(0===i.length)throw c.getChecksumInstance();for(let t=0;t<i.length;t++){if(i[t]<o[t].length-1){i[t]++;break}if(i[t]=0,t===i.length-1)throw c.getChecksumInstance()}}throw c.getChecksumInstance()}static createBarcodeMatrix(t){let e=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++)e[n][t]=new He;let r=0;for(let n of t.getDetectionResultColumns()){if(null!=n)for(let t of n.getCodewords())if(null!=t){let n=t.getRowNumber();if(n>=0){if(n>=e.length)continue;e[n][r].setValue(t.getValue())}}r++}return e}static isValidBarcodeColumn(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1}static getStartColumn(t,e,r,n){let o=n?1:-1,i=null;if(er.isValidBarcodeColumn(t,e-o)&&(i=t.getDetectionResultColumn(e-o).getCodeword(r)),null!=i)return n?i.getEndX():i.getStartX();if(i=t.getDetectionResultColumn(e).getCodewordNearby(r),null!=i)return n?i.getStartX():i.getEndX();if(er.isValidBarcodeColumn(t,e-o)&&(i=t.getDetectionResultColumn(e-o).getCodewordNearby(r)),null!=i)return n?i.getEndX():i.getStartX();let a=0;for(;er.isValidBarcodeColumn(t,e-o);){e-=o;for(let r of t.getDetectionResultColumn(e).getCodewords())if(null!=r)return(n?r.getEndX():r.getStartX())+o*a*(r.getEndX()-r.getStartX());a++}return n?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,e,r,n,o,i,a,s){o=er.adjustCodewordStartColumn(t,e,r,n,o,i);let u,c=er.getModuleBitCount(t,e,r,n,o,i);if(null==c)return null;let h=et.sum(c);if(n)u=o+h;else{for(let t=0;t<c.length/2;t++){let e=c[t];c[t]=c[c.length-1-t],c[c.length-1-t]=e}u=o,o=u-h}if(!er.checkCodewordSkew(h,a,s))return null;let l=ze.getDecodedValue(c),d=De.getCodeword(l);return-1===d?null:new We(o,u,er.getCodewordBucketNumber(l),d)}static getModuleBitCount(t,e,r,n,o,i){let a=o,s=new Int32Array(8),u=0,c=n?1:-1,h=n;for(;(n?a<r:a>=e)&&u<s.length;)t.get(a,i)===h?(s[u]++,a+=c):(u++,h=!h);return u===s.length||a===(n?r:e)&&u===s.length-1?s:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,e,r,n,o,i){let a=o,s=n?-1:1;for(let u=0;u<2;u++){for(;(n?a>=e:a<r)&&n===t.get(a,i);){if(Math.abs(o-a)>er.CODEWORD_SKEW_SIZE)return o;a+=s}s=-s,n=!n}return a}static checkCodewordSkew(t,e,r){return e-er.CODEWORD_SKEW_SIZE<=t&&t<=r+er.CODEWORD_SKEW_SIZE}static decodeCodewords(t,e,r){if(0===t.length)throw _.getFormatInstance();let n=1<<e+1,o=er.correctErrors(t,r,n);er.verifyCodewordCount(t,n);let i=tr.decode(t,""+e);return i.setErrorsCorrected(o),i.setErasures(r.length),i}static correctErrors(t,e,r){if(null!=e&&e.length>r/2+er.MAX_ERRORS||r<0||r>er.MAX_EC_CODEWORDS)throw c.getChecksumInstance();return er.errorCorrection.decode(t,r,e)}static verifyCodewordCount(t,e){if(t.length<4)throw _.getFormatInstance();let r=t[0];if(r>t.length)throw _.getFormatInstance();if(0===r){if(!(e<t.length))throw _.getFormatInstance();t[0]=t.length-e}}static getBitCountForCodeword(t){let e=new Int32Array(8),r=0,n=e.length-1;for(;!((1&t)!==r&&(r=1&t,n--,n<0));)e[n]++,t>>=1;return e}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return er.getCodewordBucketNumber(er.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let e=new Ve;for(let r=0;r<t.length;r++){e.format("Row %2d: ",r);for(let n=0;n<t[r].length;n++){let o=t[r][n];0===o.getValue().length?e.format("        ",null):e.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}e.format("%n")}return e.toString()}}er.CODEWORD_SKEW_SIZE=2,er.MAX_ERRORS=3,er.MAX_EC_CODEWORDS=512,er.errorCorrection=new Fe;class rr{decode(t,e=null){let r=rr.decode(t,e,!1);if(null==r||0===r.length||null==r[0])throw T.getNotFoundInstance();return r[0]}decodeMultiple(t,e=null){try{return rr.decode(t,e,!0)}catch(r){if(r instanceof _||r instanceof c)throw T.getNotFoundInstance();throw r}}static decode(t,e,r){const n=new Array,o=Pe.detectMultiple(t,e,r);for(const i of o.getPoints()){const t=er.decode(o.getBits(),i[4],i[5],i[6],i[7],rr.getMinCodewordWidth(i),rr.getMaxCodewordWidth(i)),e=new F(t.getText(),t.getRawBytes(),void 0,i,x.PDF_417);e.putMetadata(z.ERROR_CORRECTION_LEVEL,t.getECLevel());const r=t.getOther();null!=r&&e.putMetadata(z.PDF417_EXTRA_METADATA,r),n.push(e)}return n.map(t=>t)}static getMaxWidth(t,e){return null==t||null==e?0:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMinWidth(t,e){return null==t||null==e?p.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(rr.getMaxWidth(t[0],t[4]),rr.getMaxWidth(t[6],t[2])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN),Math.max(rr.getMaxWidth(t[1],t[5]),rr.getMaxWidth(t[7],t[3])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(rr.getMinWidth(t[0],t[4]),rr.getMinWidth(t[6],t[2])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN),Math.min(rr.getMinWidth(t[1],t[5]),rr.getMinWidth(t[7],t[3])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN)))}reset(){}}class nr extends i{}nr.kind="ReaderException";class or{decode(t,e){return this.setHints(e),this.decodeInternal(t)}decodeWithState(t){return null==this.readers&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const e=null!=t&&void 0!==t.get(A.TRY_HARDER),r=null==t?null:t.get(A.POSSIBLE_FORMATS),n=new Array;if(null!=r){const o=r.some(t=>t===x.UPC_A||t===x.UPC_E||t===x.EAN_13||t===x.EAN_8||t===x.CODABAR||t===x.CODE_39||t===x.CODE_93||t===x.CODE_128||t===x.ITF||t===x.RSS_14||t===x.RSS_EXPANDED);o&&!e&&n.push(new ee(t)),r.includes(x.QR_CODE)&&n.push(new be),r.includes(x.DATA_MATRIX)&&n.push(new le),r.includes(x.AZTEC)&&n.push(new ft),r.includes(x.PDF_417)&&n.push(new rr),o&&e&&n.push(new ee(t))}0===n.length&&(e||n.push(new ee(t)),n.push(new be),n.push(new le),n.push(new ft),n.push(new rr),e&&n.push(new ee(t))),this.readers=n}reset(){if(null!==this.readers)for(const t of this.readers)t.reset()}decodeInternal(t){if(null===this.readers)throw new nr("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(e){if(e instanceof nr)continue}throw new T("No MultiFormat Readers were able to detect the code.")}}var ir;!function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.MIN_SIZE=3]="MIN_SIZE",t[t.MAX_SIZE=4]="MAX_SIZE",t[t.MARGIN=5]="MARGIN",t[t.PDF417_COMPACT=6]="PDF417_COMPACT",t[t.PDF417_COMPACTION=7]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=9]="AZTEC_LAYERS",t[t.QR_VERSION=10]="QR_VERSION"}(ir||(ir={}));var ar=ir;class sr{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new j(t,Int32Array.from([1])))}buildGenerator(t){const e=this.cachedGenerators;if(t>=e.length){let r=e[e.length-1];const n=this.field;for(let o=e.length;o<=t;o++){const t=r.multiply(new j(n,Int32Array.from([1,n.exp(o-1+n.getGeneratorBase())])));e.push(t),r=t}}return e[t]}encode(t,e){if(0===e)throw new s("No error correction bytes");const r=t.length-e;if(r<=0)throw new s("No data bytes provided");const n=this.buildGenerator(e),o=new Int32Array(r);l.arraycopy(t,0,o,0,r);let i=new j(this.field,o);i=i.multiplyByMonomial(e,1);const a=i.divide(n)[1].getCoefficients(),u=e-a.length;for(let s=0;s<u;s++)t[r+s]=0;l.arraycopy(a,0,t,r+u,a.length)}}class ur{constructor(){}static applyMaskPenaltyRule1(t){return ur.applyMaskPenaltyRule1Internal(t,!0)+ur.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let e=0;const r=t.getArray(),n=t.getWidth(),o=t.getHeight();for(let i=0;i<o-1;i++){const t=r[i];for(let o=0;o<n-1;o++){const n=t[o];n===t[o+1]&&n===r[i+1][o]&&n===r[i+1][o+1]&&e++}}return ur.N2*e}static applyMaskPenaltyRule3(t){let e=0;const r=t.getArray(),n=t.getWidth(),o=t.getHeight();for(let i=0;i<o;i++)for(let t=0;t<n;t++){const a=r[i];t+6<n&&1===a[t]&&0===a[t+1]&&1===a[t+2]&&1===a[t+3]&&1===a[t+4]&&0===a[t+5]&&1===a[t+6]&&(ur.isWhiteHorizontal(a,t-4,t)||ur.isWhiteHorizontal(a,t+7,t+11))&&e++,i+6<o&&1===r[i][t]&&0===r[i+1][t]&&1===r[i+2][t]&&1===r[i+3][t]&&1===r[i+4][t]&&0===r[i+5][t]&&1===r[i+6][t]&&(ur.isWhiteVertical(r,t,i-4,i)||ur.isWhiteVertical(r,t,i+7,i+11))&&e++}return e*ur.N3}static isWhiteHorizontal(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(let n=e;n<r;n++)if(1===t[n])return!1;return!0}static isWhiteVertical(t,e,r,n){r=Math.max(r,0),n=Math.min(n,t.length);for(let o=r;o<n;o++)if(1===t[o][e])return!1;return!0}static applyMaskPenaltyRule4(t){let e=0;const r=t.getArray(),n=t.getWidth(),o=t.getHeight();for(let a=0;a<o;a++){const t=r[a];for(let r=0;r<n;r++)1===t[r]&&e++}const i=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*e-i)/i)*ur.N4}static getDataMaskBit(t,e,r){let n,o;switch(t){case 0:n=r+e&1;break;case 1:n=1&r;break;case 2:n=e%3;break;case 3:n=(r+e)%3;break;case 4:n=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:o=r*e,n=(1&o)+o%3;break;case 6:o=r*e,n=(1&o)+o%3&1;break;case 7:o=r*e,n=o%3+(r+e&1)&1;break;default:throw new s("Invalid mask pattern: "+t)}return 0===n}static applyMaskPenaltyRule1Internal(t,e){let r=0;const n=e?t.getHeight():t.getWidth(),o=e?t.getWidth():t.getHeight(),i=t.getArray();for(let a=0;a<n;a++){let t=0,n=-1;for(let s=0;s<o;s++){const o=e?i[a][s]:i[s][a];o===n?t++:(t>=5&&(r+=ur.N1+(t-5)),t=1,n=o)}t>=5&&(r+=ur.N1+(t-5))}return r}}ur.N1=3,ur.N2=3,ur.N3=40,ur.N4=10;class cr{constructor(t,e){this.width=t,this.height=e;const r=new Array(e);for(let n=0;n!==e;n++)r[n]=new Uint8Array(t);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(t,e){return this.bytes[e][t]}getArray(){return this.bytes}setNumber(t,e,r){this.bytes[e][t]=r}setBoolean(t,e,r){this.bytes[e][t]=r?1:0}clear(t){for(const e of this.bytes)g.fill(e,t)}equals(t){if(!(t instanceof cr))return!1;const e=t;if(this.width!==e.width)return!1;if(this.height!==e.height)return!1;for(let r=0,n=this.height;r<n;++r){const t=this.bytes[r],n=e.bytes[r];for(let e=0,r=this.width;e<r;++e)if(t[e]!==n[e])return!1}return!0}toString(){const t=new S;for(let e=0,r=this.height;e<r;++e){const r=this.bytes[e];for(let e=0,n=this.width;e<n;++e)switch(r[e]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ")}t.append("\n")}return t.toString()}}class hr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new S;return t.append("<<\n"),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append("\n ecLevel: "),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append("\n version: "),t.append(this.version?this.version.toString():"null"),t.append("\n maskPattern: "),t.append(this.maskPattern.toString()),this.matrix?(t.append("\n matrix:\n"),t.append(this.matrix.toString())):t.append("\n matrix: null\n"),t.append(">>\n"),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<hr.NUM_MASK_PATTERNS}}hr.NUM_MASK_PATTERNS=8;class lr extends i{}lr.kind="WriterException";class dr{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,e,r,n,o){dr.clearMatrix(o),dr.embedBasicPatterns(r,o),dr.embedTypeInfo(e,n,o),dr.maybeEmbedVersionInfo(r,o),dr.embedDataBits(t,n,o)}static embedBasicPatterns(t,e){dr.embedPositionDetectionPatternsAndSeparators(e),dr.embedDarkDotAtLeftBottomCorner(e),dr.maybeEmbedPositionAdjustmentPatterns(t,e),dr.embedTimingPatterns(e)}static embedTypeInfo(t,e,r){const n=new w;dr.makeTypeInfoBits(t,e,n);for(let o=0,i=n.getSize();o<i;++o){const t=n.get(n.getSize()-1-o),e=dr.TYPE_INFO_COORDINATES[o];if(r.setBoolean(e[0],e[1],t),o<8){const e=r.getWidth()-o-1;r.setBoolean(e,8,t)}else{const e=8,n=r.getHeight()-7+(o-8);r.setBoolean(e,n,t)}}}static maybeEmbedVersionInfo(t,e){if(t.getVersionNumber()<7)return;const r=new w;dr.makeVersionInfoBits(t,r);let n=17;for(let o=0;o<6;++o)for(let t=0;t<3;++t){const i=r.get(n);n--,e.setBoolean(o,e.getHeight()-11+t,i),e.setBoolean(e.getHeight()-11+t,o,i)}}static embedDataBits(t,e,r){let n=0,o=-1,i=r.getWidth()-1,a=r.getHeight()-1;for(;i>0;){for(6===i&&(i-=1);a>=0&&a<r.getHeight();){for(let o=0;o<2;++o){const s=i-o;if(!dr.isEmpty(r.get(s,a)))continue;let u;n<t.getSize()?(u=t.get(n),++n):u=!1,255!==e&&ur.getDataMaskBit(e,s,a)&&(u=!u),r.setBoolean(s,a,u)}a+=o}o=-o,a+=o,i-=2}if(n!==t.getSize())throw new lr("Not all bits consumed: "+n+"/"+t.getSize())}static findMSBSet(t){return 32-p.numberOfLeadingZeros(t)}static calculateBCHCode(t,e){if(0===e)throw new s("0 polynomial");const r=dr.findMSBSet(e);for(t<<=r-1;dr.findMSBSet(t)>=r;)t^=e<<dr.findMSBSet(t)-r;return t}static makeTypeInfoBits(t,e,r){if(!hr.isValidMaskPattern(e))throw new lr("Invalid mask pattern");const n=t.getBits()<<3|e;r.appendBits(n,5);const o=dr.calculateBCHCode(n,dr.TYPE_INFO_POLY);r.appendBits(o,10);const i=new w;if(i.appendBits(dr.TYPE_INFO_MASK_PATTERN,15),r.xor(i),15!==r.getSize())throw new lr("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(t,e){e.appendBits(t.getVersionNumber(),6);const r=dr.calculateBCHCode(t.getVersionNumber(),dr.VERSION_INFO_POLY);if(e.appendBits(r,12),18!==e.getSize())throw new lr("should not happen but we got: "+e.getSize())}static isEmpty(t){return 255===t}static embedTimingPatterns(t){for(let e=8;e<t.getWidth()-8;++e){const r=(e+1)%2;dr.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),dr.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}}static embedDarkDotAtLeftBottomCorner(t){if(0===t.get(8,t.getHeight()-8))throw new lr;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,e,r){for(let n=0;n<8;++n){if(!dr.isEmpty(r.get(t+n,e)))throw new lr;r.setNumber(t+n,e,0)}}static embedVerticalSeparationPattern(t,e,r){for(let n=0;n<7;++n){if(!dr.isEmpty(r.get(t,e+n)))throw new lr;r.setNumber(t,e+n,0)}}static embedPositionAdjustmentPattern(t,e,r){for(let n=0;n<5;++n){const o=dr.POSITION_ADJUSTMENT_PATTERN[n];for(let i=0;i<5;++i)r.setNumber(t+i,e+n,o[i])}}static embedPositionDetectionPattern(t,e,r){for(let n=0;n<7;++n){const o=dr.POSITION_DETECTION_PATTERN[n];for(let i=0;i<7;++i)r.setNumber(t+i,e+n,o[i])}}static embedPositionDetectionPatternsAndSeparators(t){const e=dr.POSITION_DETECTION_PATTERN[0].length;dr.embedPositionDetectionPattern(0,0,t),dr.embedPositionDetectionPattern(t.getWidth()-e,0,t),dr.embedPositionDetectionPattern(0,t.getWidth()-e,t),dr.embedHorizontalSeparationPattern(0,7,t),dr.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),dr.embedHorizontalSeparationPattern(0,t.getWidth()-8,t),dr.embedVerticalSeparationPattern(7,0,t),dr.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),dr.embedVerticalSeparationPattern(7,t.getHeight()-7,t)}static maybeEmbedPositionAdjustmentPatterns(t,e){if(t.getVersionNumber()<2)return;const r=t.getVersionNumber()-1,n=dr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let o=0,i=n.length;o!==i;o++){const t=n[o];if(t>=0)for(let r=0;r!==i;r++){const o=n[r];o>=0&&dr.isEmpty(e.get(o,t))&&dr.embedPositionAdjustmentPattern(o-2,t-2,e)}}}}dr.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),dr.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),dr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),dr.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),dr.VERSION_INFO_POLY=7973,dr.TYPE_INFO_POLY=1335,dr.TYPE_INFO_MASK_PATTERN=21522;class fr{constructor(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class gr{constructor(){}static calculateMaskPenalty(t){return ur.applyMaskPenaltyRule1(t)+ur.applyMaskPenaltyRule2(t)+ur.applyMaskPenaltyRule3(t)+ur.applyMaskPenaltyRule4(t)}static encode(t,e,r=null){let n=gr.DEFAULT_BYTE_MODE_ENCODING;const o=null!==r&&void 0!==r.get(ar.CHARACTER_SET);o&&(n=r.get(ar.CHARACTER_SET).toString());const i=this.chooseMode(t,n),a=new w;if(i===Ce.BYTE&&(o||gr.DEFAULT_BYTE_MODE_ENCODING!==n)){const t=C.getCharacterSetECIByName(n);void 0!==t&&this.appendECI(t,a)}this.appendModeInfo(i,a);const s=new w;let u;if(this.appendBytes(t,i,s,n),null!==r&&void 0!==r.get(ar.QR_VERSION)){const t=Number.parseInt(r.get(ar.QR_VERSION).toString(),10);u=we.getVersionForNumber(t);const n=this.calculateBitsNeeded(i,a,s,u);if(!this.willFit(n,u,e))throw new lr("Data too big for requested version")}else u=this.recommendVersion(e,i,a,s);const c=new w;c.appendBitArray(a);const h=i===Ce.BYTE?s.getSizeInBytes():t.length;this.appendLengthInfo(h,u,i,c),c.appendBitArray(s);const l=u.getECBlocksForLevel(e),d=u.getTotalCodewords()-l.getTotalECCodewords();this.terminateBits(d,c);const f=this.interleaveWithECBytes(c,u.getTotalCodewords(),d,l.getNumBlocks()),g=new hr;g.setECLevel(e),g.setMode(i),g.setVersion(u);const p=u.getDimensionForVersion(),m=new cr(p,p),A=this.chooseMaskPattern(f,e,u,m);return g.setMaskPattern(A),dr.buildMatrix(f,e,u,A,m),g.setMatrix(m),g}static recommendVersion(t,e,r,n){const o=this.calculateBitsNeeded(e,r,n,we.getVersionForNumber(1)),i=this.chooseVersion(o,t),a=this.calculateBitsNeeded(e,r,n,i);return this.chooseVersion(a,t)}static calculateBitsNeeded(t,e,r,n){return e.getSize()+t.getCharacterCountBits(n)+r.getSize()}static getAlphanumericCode(t){return t<gr.ALPHANUMERIC_TABLE.length?gr.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,e=null){if(C.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return Ce.KANJI;let r=!1,n=!1;for(let o=0,i=t.length;o<i;++o){const e=t.charAt(o);if(gr.isDigit(e))r=!0;else{if(-1===this.getAlphanumericCode(e.charCodeAt(0)))return Ce.BYTE;n=!0}}return n?Ce.ALPHANUMERIC:r?Ce.NUMERIC:Ce.BYTE}static isOnlyDoubleByteKanji(t){let e;try{e=y.encode(t,C.SJIS)}catch(n){return!1}const r=e.length;if(r%2!=0)return!1;for(let o=0;o<r;o+=2){const t=255&e[o];if((t<129||t>159)&&(t<224||t>235))return!1}return!0}static chooseMaskPattern(t,e,r,n){let o=Number.MAX_SAFE_INTEGER,i=-1;for(let a=0;a<hr.NUM_MASK_PATTERNS;a++){dr.buildMatrix(t,e,r,a,n);let s=this.calculateMaskPenalty(n);s<o&&(o=s,i=a)}return i}static chooseVersion(t,e){for(let r=1;r<=40;r++){const n=we.getVersionForNumber(r);if(gr.willFit(t,n,e))return n}throw new lr("Data too big")}static willFit(t,e,r){return e.getTotalCodewords()-e.getECBlocksForLevel(r).getTotalECCodewords()>=(t+7)/8}static terminateBits(t,e){const r=8*t;if(e.getSize()>r)throw new lr("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(let i=0;i<4&&e.getSize()<r;++i)e.appendBit(!1);const n=7&e.getSize();if(n>0)for(let i=n;i<8;i++)e.appendBit(!1);const o=t-e.getSizeInBytes();for(let i=0;i<o;++i)e.appendBits(0==(1&i)?236:17,8);if(e.getSize()!==r)throw new lr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,e,r,n,o,i){if(n>=r)throw new lr("Block ID too large");const a=t%r,s=r-a,u=Math.floor(t/r),c=u+1,h=Math.floor(e/r),l=h+1,d=u-h,f=c-l;if(d!==f)throw new lr("EC bytes mismatch");if(r!==s+a)throw new lr("RS blocks mismatch");if(t!==(h+d)*s+(l+f)*a)throw new lr("Total bytes mismatch");n<s?(o[0]=h,i[0]=d):(o[0]=l,i[0]=f)}static interleaveWithECBytes(t,e,r,n){if(t.getSizeInBytes()!==r)throw new lr("Number of bits and data bytes does not match");let o=0,i=0,a=0;const s=new Array;for(let c=0;c<n;++c){const u=new Int32Array(1),h=new Int32Array(1);gr.getNumDataBytesAndNumECBytesForBlockID(e,r,n,c,u,h);const l=u[0],d=new Uint8Array(l);t.toBytes(8*o,d,0,l);const f=gr.generateECBytes(d,h[0]);s.push(new fr(d,f)),i=Math.max(i,l),a=Math.max(a,f.length),o+=u[0]}if(r!==o)throw new lr("Data bytes does not match offset");const u=new w;for(let c=0;c<i;++c)for(const t of s){const e=t.getDataBytes();c<e.length&&u.appendBits(e[c],8)}for(let c=0;c<a;++c)for(const t of s){const e=t.getErrorCorrectionBytes();c<e.length&&u.appendBits(e[c],8)}if(e!==u.getSizeInBytes())throw new lr("Interleaving error: "+e+" and "+u.getSizeInBytes()+" differ.");return u}static generateECBytes(t,e){const r=t.length,n=new Int32Array(r+e);for(let i=0;i<r;i++)n[i]=255&t[i];new sr(q.QR_CODE_FIELD_256).encode(n,e);const o=new Uint8Array(e);for(let i=0;i<e;i++)o[i]=n[r+i];return o}static appendModeInfo(t,e){e.appendBits(t.getBits(),4)}static appendLengthInfo(t,e,r,n){const o=r.getCharacterCountBits(e);if(t>=1<<o)throw new lr(t+" is bigger than "+((1<<o)-1));n.appendBits(t,o)}static appendBytes(t,e,r,n){switch(e){case Ce.NUMERIC:gr.appendNumericBytes(t,r);break;case Ce.ALPHANUMERIC:gr.appendAlphanumericBytes(t,r);break;case Ce.BYTE:gr.append8BitBytes(t,r,n);break;case Ce.KANJI:gr.appendKanjiBytes(t,r);break;default:throw new lr("Invalid mode: "+e)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const e=gr.getDigit(t);return e>=0&&e<=9}static appendNumericBytes(t,e){const r=t.length;let n=0;for(;n<r;){const o=gr.getDigit(t.charAt(n));if(n+2<r){const r=gr.getDigit(t.charAt(n+1)),i=gr.getDigit(t.charAt(n+2));e.appendBits(100*o+10*r+i,10),n+=3}else if(n+1<r){const r=gr.getDigit(t.charAt(n+1));e.appendBits(10*o+r,7),n+=2}else e.appendBits(o,4),n++}}static appendAlphanumericBytes(t,e){const r=t.length;let n=0;for(;n<r;){const o=gr.getAlphanumericCode(t.charCodeAt(n));if(-1===o)throw new lr;if(n+1<r){const r=gr.getAlphanumericCode(t.charCodeAt(n+1));if(-1===r)throw new lr;e.appendBits(45*o+r,11),n+=2}else e.appendBits(o,6),n++}}static append8BitBytes(t,e,r){let n;try{n=y.encode(t,r)}catch(o){throw new lr(o)}for(let i=0,a=n.length;i!==a;i++)e.appendBits(n[i],8)}static appendKanjiBytes(t,e){let r;try{r=y.encode(t,C.SJIS)}catch(o){throw new lr(o)}const n=r.length;for(let i=0;i<n;i+=2){const t=(255&r[i])<<8&4294967295|255&r[i+1];let n=-1;if(t>=33088&&t<=40956?n=t-33088:t>=57408&&t<=60351&&(n=t-49472),-1===n)throw new lr("Invalid byte sequence");e.appendBits(192*(n>>8)+(255&n),13)}}static appendECI(t,e){e.appendBits(Ce.ECI.getBits(),4),e.appendBits(t.getValue(),8)}}gr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),gr.DEFAULT_BYTE_MODE_ENCODING=C.UTF8.getName();class pr{write(t,e,r,n=null){if(0===t.length)throw new s("Found empty contents");if(e<0||r<0)throw new s("Requested dimensions are too small: "+e+"x"+r);let o=de.L,i=pr.QUIET_ZONE_SIZE;null!==n&&(void 0!==n.get(ar.ERROR_CORRECTION)&&(o=de.fromString(n.get(ar.ERROR_CORRECTION).toString())),void 0!==n.get(ar.MARGIN)&&(i=Number.parseInt(n.get(ar.MARGIN).toString(),10)));const a=gr.encode(t,o,n);return this.renderResult(a,e,r,i)}writeToDom(t,e,r,n,o=null){"string"==typeof t&&(t=document.querySelector(t));const i=this.write(e,r,n,o);t&&t.appendChild(i)}renderResult(t,e,r,n){const o=t.getMatrix();if(null===o)throw new J;const i=o.getWidth(),a=o.getHeight(),s=i+2*n,u=a+2*n,c=Math.max(e,s),h=Math.max(r,u),l=Math.min(Math.floor(c/s),Math.floor(h/u)),d=Math.floor((c-i*l)/2),f=Math.floor((h-a*l)/2),g=this.createSVGElement(c,h);for(let p=0,w=f;p<a;p++,w+=l)for(let t=0,e=d;t<i;t++,e+=l)if(1===o.get(t,p)){const t=this.createSvgRectElement(e,w,l,l);g.appendChild(t)}return g}createSVGElement(t,e){const r=document.createElementNS(pr.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",e.toString()),r}createSvgRectElement(t,e,r,n){const o=document.createElementNS(pr.SVG_NS,"rect");return o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",e.toString()),o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",n.toString()),o.setAttributeNS(null,"fill","#000000"),o}}pr.QUIET_ZONE_SIZE=4,pr.SVG_NS="http://www.w3.org/2000/svg";class wr{encode(t,e,r,n,o){if(0===t.length)throw new s("Found empty contents");if(e!==x.QR_CODE)throw new s("Can only encode QR_CODE, but got "+e);if(r<0||n<0)throw new s(`Requested dimensions are too small: ${r}x${n}`);let i=de.L,a=wr.QUIET_ZONE_SIZE;null!==o&&(void 0!==o.get(ar.ERROR_CORRECTION)&&(i=de.fromString(o.get(ar.ERROR_CORRECTION).toString())),void 0!==o.get(ar.MARGIN)&&(a=Number.parseInt(o.get(ar.MARGIN).toString(),10)));const u=gr.encode(t,i,o);return wr.renderResult(u,r,n,a)}static renderResult(t,e,r,n){const o=t.getMatrix();if(null===o)throw new J;const i=o.getWidth(),a=o.getHeight(),s=i+2*n,u=a+2*n,c=Math.max(e,s),h=Math.max(r,u),l=Math.min(Math.floor(c/s),Math.floor(h/u)),d=Math.floor((c-i*l)/2),f=Math.floor((h-a*l)/2),g=new v(c,h);for(let p=0,w=f;p<a;p++,w+=l)for(let t=0,e=d;t<i;t++,e+=l)1===o.get(t,p)&&g.setRegion(e,w,l,l);return g}}wr.QUIET_ZONE_SIZE=4;class mr extends N{constructor(t,e,r,n,o,i,a,u){if(super(i,a),this.yuvData=t,this.dataWidth=e,this.dataHeight=r,this.left=n,this.top=o,n+i>e||o+a>r)throw new s("Crop rectangle does not fit within image data.");u&&this.reverseHorizontal(i,a)}getRow(t,e){if(t<0||t>=this.getHeight())throw new s("Requested row is outside the image: "+t);const r=this.getWidth();return(null==e||e.length<r)&&(e=new Uint8ClampedArray(r)),l.arraycopy(this.yuvData,(t+this.top)*this.dataWidth+this.left,e,0,r),e}getMatrix(){const t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.yuvData;const r=t*e,n=new Uint8ClampedArray(r);let o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return l.arraycopy(this.yuvData,o,n,0,r),n;for(let i=0;i<e;i++)l.arraycopy(this.yuvData,o,n,i*t,t),o+=this.dataWidth;return n}isCropSupported(){return!0}crop(t,e,r,n){return new mr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+e,r,n,!1)}renderThumbnail(){const t=this.getWidth()/mr.THUMBNAIL_SCALE_FACTOR,e=this.getHeight()/mr.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(t*e),n=this.yuvData;let o=this.top*this.dataWidth+this.left;for(let i=0;i<e;i++){const e=i*t;for(let i=0;i<t;i++)r[e+i]=4278190080|65793*(255&n[o+i*mr.THUMBNAIL_SCALE_FACTOR]);o+=this.dataWidth*mr.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/mr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/mr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,e){const r=this.yuvData;for(let n=0,o=this.top*this.dataWidth+this.left;n<e;n++,o+=this.dataWidth){const e=o+t/2;for(let n=o,i=o+t-1;n<e;n++,i--){const t=r[n];r[n]=r[i],r[i]=t}}}invert(){return new b(this)}}mr.THUMBNAIL_SCALE_FACTOR=2;class Ar extends N{constructor(t,e,r,n,o,i,a){if(super(e,r),this.dataWidth=n,this.dataHeight=o,this.left=i,this.top=a,4===t.BYTES_PER_ELEMENT){const n=e*r,o=new Uint8ClampedArray(n);for(let e=0;e<n;e++){const r=t[e];o[e]=((r>>16&255)+(r>>7&510)+(255&r))/4&255}this.luminances=o}else this.luminances=t;if(void 0===n&&(this.dataWidth=e),void 0===o&&(this.dataHeight=r),void 0===i&&(this.left=0),void 0===a&&(this.top=0),this.left+e>this.dataWidth||this.top+r>this.dataHeight)throw new s("Crop rectangle does not fit within image data.")}getRow(t,e){if(t<0||t>=this.getHeight())throw new s("Requested row is outside the image: "+t);const r=this.getWidth();return(null==e||e.length<r)&&(e=new Uint8ClampedArray(r)),l.arraycopy(this.luminances,(t+this.top)*this.dataWidth+this.left,e,0,r),e}getMatrix(){const t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.luminances;const r=t*e,n=new Uint8ClampedArray(r);let o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return l.arraycopy(this.luminances,o,n,0,r),n;for(let i=0;i<e;i++)l.arraycopy(this.luminances,o,n,i*t,t),o+=this.dataWidth;return n}isCropSupported(){return!0}crop(t,e,r,n){return new Ar(this.luminances,r,n,this.dataWidth,this.dataHeight,this.left+t,this.top+e)}invert(){return new b(this)}}class _r extends C{static forName(t){return this.getCharacterSetECIByName(t)}}class Cr{}Cr.ISO_8859_1=C.ISO8859_1;class Er{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class yr{static singletonList(t){return[t]}static min(t,e){return t.sort(e)[0]}}class Ir extends class{constructor(t){this.previous=t}getPrevious(){return this.previous}}{constructor(t,e,r){super(t),this.value=e,this.bitCount=r}appendTo(t,e){t.appendBits(this.value,this.bitCount)}add(t,e){return new Ir(this,t,e)}addBinaryShift(t,e){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ir(this,t,e)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+p.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class Sr extends Ir{constructor(t,e,r){super(t,0,0),this.binaryShiftStart=e,this.binaryShiftByteCount=r}appendTo(t,e){for(let r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):t.appendBits(0===r?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),t.appendBits(e[this.binaryShiftStart+r],8)}addBinaryShift(t,e){return new Sr(this,t,e)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function vr(t,e,r){return new Ir(t,e,r)}const Tr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Rr=new Ir(null,0,0),Or=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],Nr=function(t){for(let e of t)g.fill(e,-1);return t[0][4]=0,t[1][4]=0,t[1][0]=28,t[3][4]=0,t[2][4]=0,t[2][0]=15,t}(g.createInt32Array(6,6));class br{constructor(t,e,r,n){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=n}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,e){let r=this.bitCount,n=this.token;if(t!==this.mode){let e=Or[this.mode][t];n=vr(n,65535&e,e>>16),r+=e>>16}let o=2===t?4:5;return n=vr(n,e,o),new br(n,t,0,r+o)}shiftAndAppend(t,e){let r=this.token,n=2===this.mode?4:5;return r=vr(r,Nr[this.mode][t],n),r=vr(r,e,5),new br(r,this.mode,0,this.bitCount+n+5)}addBinaryShiftChar(t){let e=this.token,r=this.mode,n=this.bitCount;if(4===this.mode||2===this.mode){let t=Or[r][0];e=vr(e,65535&t,t>>16),n+=t>>16,r=0}let o=new br(e,r,this.binaryShiftByteCount+1,n+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(t+1)),o}endBinaryShift(t){if(0===this.binaryShiftByteCount)return this;let e=this.token;return e=function(t,e,r){return new Sr(t,e,r)}(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new br(e,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let e=this.bitCount+(Or[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=br.calculateBinaryShiftCost(t)-br.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount}toBitArray(t){let e=[];for(let n=this.endBinaryShift(t.length).token;null!==n;n=n.getPrevious())e.unshift(n);let r=new w;for(const n of e)n.appendTo(r,t);return r}toString(){return I.format("%s bits=%d bytes=%d",Tr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}br.INITIAL_STATE=new br(Rr,0,0,0);const Dr=function(t){const e=I.getCharCode(" "),r=I.getCharCode("."),n=I.getCharCode(",");t[0][e]=1;const o=I.getCharCode("Z"),i=I.getCharCode("A");for(let d=i;d<=o;d++)t[0][d]=d-i+2;t[1][e]=1;const a=I.getCharCode("z"),s=I.getCharCode("a");for(let d=s;d<=a;d++)t[1][d]=d-s+2;t[2][e]=1;const u=I.getCharCode("9"),c=I.getCharCode("0");for(let d=c;d<=u;d++)t[2][d]=d-c+2;t[2][n]=12,t[2][r]=13;const h=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let d=0;d<h.length;d++)t[3][I.getCharCode(h[d])]=d;const l=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let d=0;d<l.length;d++)I.getCharCode(l[d])>0&&(t[4][I.getCharCode(l[d])]=d);return t}(g.createInt32Array(5,256));class Mr{constructor(t){this.text=t}encode(){const t=I.getCharCode(" "),e=I.getCharCode("\n");let r=yr.singletonList(br.INITIAL_STATE);for(let n=0;n<this.text.length;n++){let o,i=n+1<this.text.length?this.text[n+1]:0;switch(this.text[n]){case I.getCharCode("\r"):o=i===e?2:0;break;case I.getCharCode("."):o=i===t?3:0;break;case I.getCharCode(","):o=i===t?4:0;break;case I.getCharCode(":"):o=i===t?5:0;break;default:o=0}o>0?(r=Mr.updateStateListForPair(r,n,o),n++):r=this.updateStateListForChar(r,n)}return yr.min(r,(t,e)=>t.getBitCount()-e.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,e){const r=[];for(let n of t)this.updateStateForChar(n,e,r);return Mr.simplifyStates(r)}updateStateForChar(t,e,r){let n=255&this.text[e],o=Dr[t.getMode()][n]>0,i=null;for(let a=0;a<=4;a++){let s=Dr[a][n];if(s>0){if(null==i&&(i=t.endBinaryShift(e)),!o||a===t.getMode()||2===a){const t=i.latchAndAppend(a,s);r.push(t)}if(!o&&Nr[t.getMode()][a]>=0){const t=i.shiftAndAppend(a,s);r.push(t)}}}if(t.getBinaryShiftByteCount()>0||0===Dr[t.getMode()][n]){let n=t.addBinaryShiftChar(e);r.push(n)}}static updateStateListForPair(t,e,r){const n=[];for(let o of t)this.updateStateForPair(o,e,r,n);return this.simplifyStates(n)}static updateStateForPair(t,e,r,n){let o=t.endBinaryShift(e);if(n.push(o.latchAndAppend(4,r)),4!==t.getMode()&&n.push(o.shiftAndAppend(4,r)),3===r||4===r){let t=o.latchAndAppend(2,16-r).latchAndAppend(2,1);n.push(t)}if(t.getBinaryShiftByteCount()>0){let r=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);n.push(r)}}static simplifyStates(t){let e=[];for(const r of t){let t=!0;for(const n of e){if(n.isBetterThanOrEqualTo(r)){t=!1;break}r.isBetterThanOrEqualTo(n)&&(e=e.filter(t=>t!==n))}t&&e.push(r)}return e}}class Pr{constructor(){}static encodeBytes(t){return Pr.encode(t,Pr.DEFAULT_EC_PERCENT,Pr.DEFAULT_AZTEC_LAYERS)}static encode(t,e,r){let n,o,i,a,u,c=new Mr(t).encode(),h=p.truncDivision(c.getSize()*e,100)+11,l=c.getSize()+h;if(r!==Pr.DEFAULT_AZTEC_LAYERS){if(n=r<0,o=Math.abs(r),o>(n?Pr.MAX_NB_BITS_COMPACT:Pr.MAX_NB_BITS))throw new s(I.format("Illegal value %s for layers",r));i=Pr.totalBitsInLayer(o,n),a=Pr.WORD_SIZE[o];let t=i-i%a;if(u=Pr.stuffBits(c,a),u.getSize()+h>t)throw new s("Data to large for user specified layer");if(n&&u.getSize()>64*a)throw new s("Data to large for user specified layer")}else{a=0,u=null;for(let t=0;;t++){if(t>Pr.MAX_NB_BITS)throw new s("Data too large for an Aztec code");if(n=t<=3,o=n?t+1:t,i=Pr.totalBitsInLayer(o,n),l>i)continue;null!=u&&a===Pr.WORD_SIZE[o]||(a=Pr.WORD_SIZE[o],u=Pr.stuffBits(c,a));let e=i-i%a;if(!(n&&u.getSize()>64*a)&&u.getSize()+h<=e)break}}let d,f=Pr.generateCheckWords(u,i,a),g=u.getSize()/a,w=Pr.generateModeMessage(n,o,g),m=(n?11:14)+4*o,A=new Int32Array(m);if(n){d=m;for(let t=0;t<A.length;t++)A[t]=t}else{d=m+1+2*p.truncDivision(p.truncDivision(m,2)-1,15);let t=p.truncDivision(m,2),e=p.truncDivision(d,2);for(let r=0;r<t;r++){let n=r+p.truncDivision(r,15);A[t-r-1]=e-n-1,A[t+r]=e+n+1}}let _=new v(d);for(let s=0,p=0;s<o;s++){let t=4*(o-s)+(n?9:12);for(let e=0;e<t;e++){let r=2*e;for(let n=0;n<2;n++)f.get(p+r+n)&&_.set(A[2*s+n],A[2*s+e]),f.get(p+2*t+r+n)&&_.set(A[2*s+e],A[m-1-2*s-n]),f.get(p+4*t+r+n)&&_.set(A[m-1-2*s-n],A[m-1-2*s-e]),f.get(p+6*t+r+n)&&_.set(A[m-1-2*s-e],A[2*s+n])}p+=8*t}if(Pr.drawModeMessage(_,n,d,w),n)Pr.drawBullsEye(_,p.truncDivision(d,2),5);else{Pr.drawBullsEye(_,p.truncDivision(d,2),7);for(let t=0,e=0;t<p.truncDivision(m,2)-1;t+=15,e+=16)for(let r=1&p.truncDivision(d,2);r<d;r+=2)_.set(p.truncDivision(d,2)-e,r),_.set(p.truncDivision(d,2)+e,r),_.set(r,p.truncDivision(d,2)-e),_.set(r,p.truncDivision(d,2)+e)}let C=new Er;return C.setCompact(n),C.setSize(d),C.setLayers(o),C.setCodeWords(g),C.setMatrix(_),C}static drawBullsEye(t,e,r){for(let n=0;n<r;n+=2)for(let r=e-n;r<=e+n;r++)t.set(r,e-n),t.set(r,e+n),t.set(e-n,r),t.set(e+n,r);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)}static generateModeMessage(t,e,r){let n=new w;return t?(n.appendBits(e-1,2),n.appendBits(r-1,6),n=Pr.generateCheckWords(n,28,4)):(n.appendBits(e-1,5),n.appendBits(r-1,11),n=Pr.generateCheckWords(n,40,4)),n}static drawModeMessage(t,e,r,n){let o=p.truncDivision(r,2);if(e)for(let i=0;i<7;i++){let e=o-3+i;n.get(i)&&t.set(e,o-5),n.get(i+7)&&t.set(o+5,e),n.get(20-i)&&t.set(e,o+5),n.get(27-i)&&t.set(o-5,e)}else for(let i=0;i<10;i++){let e=o-5+i+p.truncDivision(i,5);n.get(i)&&t.set(e,o-7),n.get(i+10)&&t.set(o+7,e),n.get(29-i)&&t.set(e,o+7),n.get(39-i)&&t.set(o-7,e)}}static generateCheckWords(t,e,r){let n=t.getSize()/r,o=new sr(Pr.getGF(r)),i=p.truncDivision(e,r),a=Pr.bitsToWords(t,r,i);o.encode(a,i-n);let s=e%r,u=new w;u.appendBits(0,s);for(const c of Array.from(a))u.appendBits(c,r);return u}static bitsToWords(t,e,r){let n,o,i=new Int32Array(r);for(n=0,o=t.getSize()/e;n<o;n++){let r=0;for(let o=0;o<e;o++)r|=t.get(n*e+o)?1<<e-o-1:0;i[n]=r}return i}static getGF(t){switch(t){case 4:return q.AZTEC_PARAM;case 6:return q.AZTEC_DATA_6;case 8:return q.AZTEC_DATA_8;case 10:return q.AZTEC_DATA_10;case 12:return q.AZTEC_DATA_12;default:throw new s("Unsupported word size "+t)}}static stuffBits(t,e){let r=new w,n=t.getSize(),o=(1<<e)-2;for(let i=0;i<n;i+=e){let a=0;for(let r=0;r<e;r++)(i+r>=n||t.get(i+r))&&(a|=1<<e-1-r);(a&o)===o?(r.appendBits(a&o,e),i--):0==(a&o)?(r.appendBits(1|a,e),i--):r.appendBits(a,e)}return r}static totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}Pr.DEFAULT_EC_PERCENT=33,Pr.DEFAULT_AZTEC_LAYERS=0,Pr.MAX_NB_BITS=32,Pr.MAX_NB_BITS_COMPACT=4,Pr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Br{encode(t,e,r,n){return this.encodeWithHints(t,e,r,n,null)}encodeWithHints(t,e,r,n,o){let i=Cr.ISO_8859_1,a=Pr.DEFAULT_EC_PERCENT,s=Pr.DEFAULT_AZTEC_LAYERS;return null!=o&&(o.has(ar.CHARACTER_SET)&&(i=_r.forName(o.get(ar.CHARACTER_SET).toString())),o.has(ar.ERROR_CORRECTION)&&(a=p.parseInt(o.get(ar.ERROR_CORRECTION).toString())),o.has(ar.AZTEC_LAYERS)&&(s=p.parseInt(o.get(ar.AZTEC_LAYERS).toString()))),Br.encodeLayers(t,e,r,n,i,a,s)}static encodeLayers(t,e,r,n,o,i,a){if(e!==x.AZTEC)throw new s("Can only encode AZTEC, but got "+e);let u=Pr.encode(I.getBytes(t,o),i,a);return Br.renderResult(u,r,n)}static renderResult(t,e,r){let n=t.getMatrix();if(null==n)throw new J;let o=n.getWidth(),i=n.getHeight(),a=Math.max(e,o),s=Math.max(r,i),u=Math.min(a/o,s/i),c=(a-o*u)/2,h=(s-i*u)/2,l=new v(a,s);for(let d=0,f=h;d<i;d++,f+=u)for(let t=0,e=c;t<o;t++,e+=u)n.get(t,d)&&l.setRegion(e,f,u,u);return l}}t.ArgumentException=a,t.ArithmeticException=K,t.AztecCode=Er,t.AztecCodeReader=ft,t.AztecCodeWriter=Br,t.AztecDecoder=tt,t.AztecDetector=dt,t.AztecDetectorResult=it,t.AztecEncoder=Pr,t.AztecHighLevelEncoder=Mr,t.AztecPoint=lt,t.BarcodeFormat=x,t.Binarizer=h,t.BinaryBitmap=u,t.BitArray=w,t.BitMatrix=v,t.BitSource=se,t.BrowserAztecCodeReader=class extends L{constructor(t=500){super(new ft,t)}},t.BrowserBarcodeReader=class extends L{constructor(t=500,e){super(new ee(e),t,e)}},t.BrowserCodeReader=L,t.BrowserDatamatrixCodeReader=class extends L{constructor(t=500){super(new le,t)}},t.BrowserMultiFormatReader=class extends L{constructor(t=null,e=500){const r=new or;r.setHints(t),super(r,e)}decodeBitmap(t){return this.reader.decodeWithState(t)}},t.BrowserPDF417Reader=class extends L{constructor(t=500){super(new rr,t)}},t.BrowserQRCodeReader=class extends L{constructor(t=500){super(new be,t)}},t.BrowserQRCodeSvgWriter=pr,t.CharacterSetECI=C,t.ChecksumException=c,t.Code128Reader=pt,t.Code39Reader=wt,t.DataMatrixDecodedBitStreamParser=ue,t.DataMatrixReader=le,t.DecodeHintType=A,t.DecoderResult=Y,t.DefaultGridSampler=ct,t.DetectorResult=ot,t.EAN13Reader=It,t.EncodeHintType=ar,t.Exception=i,t.FormatException=_,t.GenericGF=q,t.GenericGFPoly=j,t.GlobalHistogramBinarizer=R,t.GridSampler=st,t.GridSamplerInstance=ht,t.HTMLCanvasElementLuminanceSource=D,t.HybridBinarizer=O,t.ITFReader=mt,t.IllegalArgumentException=s,t.IllegalStateException=J,t.InvertedLuminanceSource=b,t.LuminanceSource=N,t.MathUtils=et,t.MultiFormatOneDReader=ee,t.MultiFormatReader=or,t.MultiFormatWriter=class{encode(t,e,r,n,o){let i;switch(e){case x.QR_CODE:i=new wr;break;default:throw new s("No encoder available for format "+e)}return i.encode(t,e,r,n,o)}},t.NotFoundException=T,t.OneDReader=gt,t.PDF417DecodedBitStreamParser=tr,t.PDF417DecoderErrorCorrection=Fe,t.PDF417Reader=rr,t.PDF417ResultMetadata=Ye,t.PerspectiveTransform=ut,t.PlanarYUVLuminanceSource=mr,t.QRCodeByteMatrix=cr,t.QRCodeDataMask=me,t.QRCodeDecodedBitStreamParser=Ee,t.QRCodeDecoderErrorCorrectionLevel=de,t.QRCodeDecoderFormatInformation=fe,t.QRCodeEncoder=gr,t.QRCodeEncoderQRCode=hr,t.QRCodeMaskUtil=ur,t.QRCodeMatrixUtil=dr,t.QRCodeMode=Ce,t.QRCodeReader=be,t.QRCodeVersion=we,t.QRCodeWriter=wr,t.RGBLuminanceSource=Ar,t.RSS14Reader=te,t.RSSExpandedReader=Jt,t.ReaderException=nr,t.ReedSolomonDecoder=$,t.ReedSolomonEncoder=sr,t.ReedSolomonException=Q,t.Result=F,t.ResultMetadataType=z,t.ResultPoint=nt,t.StringUtils=I,t.UnsupportedOperationException=E,t.VideoInputDevice=M,t.WhiteRectangleDetector=at,t.WriterException=lr,t.ZXingArrays=g,t.ZXingCharset=_r,t.ZXingInteger=p,t.ZXingStandardCharsets=Cr,t.ZXingStringBuilder=S,t.ZXingStringEncoding=y,t.ZXingSystem=l,Object.defineProperty(t,"__esModule",{value:!0})}(e)},R7y3:function(t,e,r){!function(t){"use strict";var e,r,n=(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,r)},function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),o=function(t){function e(e){var r,n,o,i=this.constructor,a=t.call(this,e)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),r=a,n=i.prototype,(o=Object.setPrototypeOf)?o(r,n):r.__proto__=n,function(t,e){void 0===e&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}(a),a}return n(e,t),e}(Error),i=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=function(t){function e(e){void 0===e&&(e=void 0);var r=t.call(this,e)||this;return r.message=e,r}return i(e,t),e.prototype.getKind=function(){return this.constructor.kind},e.kind="Exception",e}(o),s=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.kind="ArgumentException",e}(a),c=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.kind="IllegalArgumentException",e}(a),l=function(){function t(t){if(this.binarizer=t,null===t)throw new h("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(t,e){return this.binarizer.getBlackRow(t,e)},t.prototype.getBlackMatrix=function(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,o){var i=this.binarizer.getLuminanceSource().crop(e,r,n,o);return new t(this.binarizer.createBinarizer(i))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(t){return""}},t}(),d=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(a),g=function(){function t(t){this.source=t}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),p=function(){function t(){}return t.arraycopy=function(t,e,r,n,o){for(;o--;)r[n++]=t[e++]},t.currentTimeMillis=function(){return Date.now()},t}(),w=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.kind="IndexOutOfBoundsException",e}(a),A=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_=function(t){function e(e,r){void 0===e&&(e=void 0),void 0===r&&(r=void 0);var n=t.call(this,r)||this;return n.index=e,n.message=r,n}return A(e,t),e.kind="ArrayIndexOutOfBoundsException",e}(m),C=function(){function t(){}return t.fill=function(t,e){for(var r=0,n=t.length;r<n;r++)t[r]=e},t.fillWithin=function(e,r,n,o){t.rangeCheck(e.length,r,n);for(var i=r;i<n;i++)e[i]=o},t.rangeCheck=function(t,e,r){if(e>r)throw new h("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new _(e);if(r>t)throw new _(r)},t.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},t.create=function(t,e,r){return Array.from({length:t}).map(function(t){return Array.from({length:e}).fill(r)})},t.createInt32Array=function(t,e,r){return Array.from({length:t}).map(function(t){return Int32Array.from({length:e}).fill(r)})},t.equals=function(t,e){if(!t)return!1;if(!e)return!1;if(!t.length)return!1;if(!e.length)return!1;if(t.length!==e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0},t.hashCode=function(t){var e,r;if(null===t)return 0;var n=1;try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),i=o.next();!i.done;i=o.next())n=31*n+i.value}catch(a){e={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},t.copyOf=function(t,e){return t.slice(0,e)},t.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},t.copyOfRange=function(t,e,r){var n=r-e,o=new Int32Array(n);return p.arraycopy(t,e,o,0,n),o},t.binarySearch=function(e,r,n){void 0===n&&(n=t.numberComparator);for(var o=0,i=e.length-1;o<=i;){var a=i+o>>1,s=n(r,e[a]);if(s>0)o=a+1;else{if(!(s<0))return a;i=a-1}}return-o-1},t.numberComparator=function(t,e){return t-e},t}(),E=function(){function t(){}return t.numberOfTrailingZeros=function(t){var e;if(0===t)return 32;var r=31;return 0!=(e=t<<16)&&(r-=16,t=e),0!=(e=t<<8)&&(r-=8,t=e),0!=(e=t<<4)&&(r-=4,t=e),0!=(e=t<<2)&&(r-=2,t=e),r-(t<<1>>>31)},t.numberOfLeadingZeros=function(t){if(0===t)return 32;var e=1;return t>>>16==0&&(e+=16,t<<=16),t>>>24==0&&(e+=8,t<<=8),t>>>28==0&&(e+=4,t<<=4),t>>>30==0&&(e+=2,t<<=2),e-(t>>>31)},t.toHexString=function(t){return t.toString(16)},t.toBinaryString=function(t){return String(parseInt(String(t),2))},t.bitCount=function(t){return t=(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135,63&(t+=t>>>8)+(t>>>16)},t.truncDivision=function(t,e){return Math.trunc(t/e)},t.parseInt=function(t,e){return void 0===e&&(e=void 0),parseInt(t,e)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),y=function(){function t(e,r){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=null==r?t.makeArray(e):r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>32*this.bits.length){var r=t.makeArray(e);p.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(t){return 0!=(this.bits[Math.floor(t/32)]&1<<(31&t))},t.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(31&t)},t.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(31&t)},t.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,n=Math.floor(t/32),o=r[n];o&=~((1<<(31&t))-1);for(var i=r.length;0===o;){if(++n===i)return e;o=r[n]}var a=32*n+E.numberOfTrailingZeros(o);return a>e?e:a},t.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,n=Math.floor(t/32),o=~r[n];o&=~((1<<(31&t))-1);for(var i=r.length;0===o;){if(++n===i)return e;o=~r[n]}var a=32*n+E.numberOfTrailingZeros(o);return a>e?e:a},t.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},t.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new h;if(e!==t){e--;for(var r=Math.floor(t/32),n=Math.floor(e/32),o=this.bits,i=r;i<=n;i++)o[i]|=(2<<(i<n?31:31&e))-(1<<(i>r?0:31&t))}},t.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},t.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new h;if(e===t)return!0;e--;for(var n=Math.floor(t/32),o=Math.floor(e/32),i=this.bits,a=n;a<=o;a++){var s=(2<<(a<o?31:31&e))-(1<<(a>n?0:31&t))&4294967295;if((i[a]&s)!==(r?s:0))return!1}return!0},t.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},t.prototype.appendBits=function(t,e){if(e<0||e>32)throw new h("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit(1==(t>>r-1&1))},t.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},t.prototype.xor=function(t){if(this.size!==t.size)throw new h("Sizes don't match");for(var e=this.bits,r=0,n=e.length;r<n;r++)e[r]^=t.bits[r]},t.prototype.toBytes=function(t,e,r,n){for(var o=0;o<n;o++){for(var i=0,a=0;a<8;a++)this.get(t)&&(i|=1<<7-a),t++;e[r+o]=i}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,n=this.bits,o=0;o<r;o++){var i=n[o];t[e-o]=i=(i=(i=(i=(i=i>>1&1431655765|(1431655765&i)<<1)>>2&858993459|(858993459&i)<<2)>>4&252645135|(252645135&i)<<4)>>8&16711935|(16711935&i)<<8)>>16&65535|(65535&i)<<16}if(this.size!==32*r){var a=32*r-this.size,s=t[0]>>>a;for(o=1;o<r;o++){var u=t[o];t[o-1]=s|=u<<32-a,s=u>>>a}t[r-1]=s}this.bits=t},t.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},t.prototype.equals=function(e){return e instanceof t&&this.size===e.size&&C.equals(this.bits,e.bits)},t.prototype.hashCode=function(){return 31*this.size+C.hashCode(this.bits)},t.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)0==(7&e)&&(t+=" "),t+=this.get(e)?"X":".";return t},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t}();!function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ASSUME_GS1=7]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(r||(r={}));var I,S=r,v=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(a),R=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"}(I||(I={}));var O,N=function(){function t(e,r,n){for(var o,i,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,this.values="number"==typeof r?Int32Array.from([r]):r,this.otherEncodingNames=a,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var u=this.values,c=0,h=u.length;c!==h;c++){var l=u[c];t.VALUES_TO_ECI.set(l,this)}try{for(var d=R(a),f=d.next();!f.done;f=d.next()){var g=f.value;t.NAME_TO_ECI.set(g,this)}}catch(p){o={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new T("incorect value");var r=t.VALUES_TO_ECI.get(e);if(void 0===r)throw new T("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(void 0===r)throw new T("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(I.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(I.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(I.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(I.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(I.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(I.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(I.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(I.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(I.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(I.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(I.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(I.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(I.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(I.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(I.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(I.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(I.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(I.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(I.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(I.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(I.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(I.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(I.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(I.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(I.Big5,28,"Big5"),t.GB18030=new t(I.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(I.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),b=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return b(e,t),e.kind="UnsupportedOperationException",e}(a),M=function(){function t(){}return t.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&"ISO-8859-1"===e},t.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):"undefined"==typeof TextEncoder?this.encodeFallback(t):(new TextEncoder).encode(t)},t.isBrowser=function(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)},t.encodingName=function(t){return"string"==typeof t?t:t.getName()},t.encodingCharacterSet=function(t){return t instanceof N?t:N.getCharacterSetECIByName(t)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var o="",i=0,a=e.length;i<a;i++){var s=e[i].toString(16);s.length<2&&(s="0"+s),o+="%"+s}return decodeURIComponent(o)}if(n.equals(N.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new D("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(t){return t.equals(N.UTF8)||t.equals(N.ISO8859_1)||t.equals(N.ASCII)},t.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))).split(""),r=[],n=0;n<e.length;n++)r.push(e[n].charCodeAt(0));return new Uint8Array(r)},t}(),P=function(){function t(){}return t.castAsNonUtf8Char=function(t,e){void 0===e&&(e=null);var r=e?e.getName():this.ISO88591;return M.decode(new Uint8Array([t]),r)},t.guessEncoding=function(e,r){if(null!=r&&void 0!==r.get(S.CHARACTER_SET))return r.get(S.CHARACTER_SET).toString();for(var n=e.length,o=!0,i=!0,a=!0,s=0,u=0,c=0,h=0,l=0,d=0,f=0,g=0,p=0,w=0,m=0,A=e.length>3&&239===e[0]&&187===e[1]&&191===e[2],_=0;_<n&&(o||i||a);_++){var C=255&e[_];a&&(s>0?0==(128&C)?a=!1:s--:0!=(128&C)&&(0==(64&C)?a=!1:(s++,0==(32&C)?u++:(s++,0==(16&C)?c++:(s++,0==(8&C)?h++:a=!1))))),o&&(C>127&&C<160?o=!1:C>159&&(C<192||215===C||247===C)&&m++),i&&(l>0?C<64||127===C||C>252?i=!1:l--:128===C||160===C||C>239?i=!1:C>160&&C<224?(d++,g=0,++f>p&&(p=f)):C>127?(l++,f=0,++g>w&&(w=g)):(f=0,g=0))}return a&&s>0&&(a=!1),i&&l>0&&(i=!1),a&&(A||u+c+h>0)?t.UTF8:i&&(t.ASSUME_SHIFT_JIS||p>=3||w>=3)?t.SHIFT_JIS:o&&i?2===p&&2===d||10*m>=n?t.SHIFT_JIS:t.ISO88591:o?t.ISO88591:i?t.SHIFT_JIS:a?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=-1;function o(t,r,o,i,a,s){if("%%"===t)return"%";if(void 0!==e[++n]){t=i?parseInt(i.substr(1)):void 0;var u,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":u=e[n];break;case"c":u=e[n][0];break;case"f":u=parseFloat(e[n]).toFixed(t);break;case"p":u=parseFloat(e[n]).toPrecision(t);break;case"e":u=parseFloat(e[n]).toExponential(t);break;case"x":u=parseInt(e[n]).toString(c||16);break;case"d":u=parseFloat(parseInt(e[n],c||10).toPrecision(t)).toFixed(0)}u="object"==typeof u?JSON.stringify(u):(+u).toString(c);for(var h=parseInt(o),l=o&&o[0]+""=="0"?"0":" ";u.length<h;)u=void 0!==r?u+l:l+u;return u}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(i,o)},t.getBytes=function(t,e){return M.encode(t,e)},t.getCharCode=function(t,e){return void 0===e&&(e=0),t.charCodeAt(e)},t.getCharAt=function(t){return String.fromCharCode(t)},t.SHIFT_JIS=N.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=N.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=N.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),B=function(){function t(t){void 0===t&&(t=""),this.value=t}return t.prototype.enableDecoding=function(t){return this.encoding=t,this},t.prototype.append=function(t){return this.value+="string"==typeof t?t.toString():this.encoding?P.castAsNonUtf8Char(t,this.encoding):String.fromCharCode(t),this},t.prototype.appendChars=function(t,e,r){for(var n=e;e<e+r;n++)this.append(t[n]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(t){return this.value.charAt(t)},t.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},t.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},t.prototype.substring=function(t,e){return this.value.substring(t,e)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+e.length)},t}(),L=function(){function t(t,e,r,n){if(this.width=t,this.height=e,this.rowSize=r,this.bits=n,null==e&&(e=t),this.height=e,t<1||e<1)throw new h("Both dimensions must be greater than 0");null==r&&(r=Math.floor((t+31)/32)),this.rowSize=r,null==n&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,o=new t(n,r),i=0;i<r;i++)for(var a=e[i],s=0;s<n;s++)a[s]&&o.set(s,i);return o},t.parseFromString=function(e,r,n){if(null===e)throw new h("stringRepresentation cannot be null");for(var o=new Array(e.length),i=0,a=0,s=-1,u=0,c=0;c<e.length;)if("\n"===e.charAt(c)||"\r"===e.charAt(c)){if(i>a){if(-1===s)s=i-a;else if(i-a!==s)throw new h("row lengths do not match");a=i,u++}c++}else if(e.substring(c,c+r.length)===r)c+=r.length,o[i]=!0,i++;else{if(e.substring(c,c+n.length)!==n)throw new h("illegal character encountered: "+e.substring(c));c+=n.length,o[i]=!1,i++}if(i>a){if(-1===s)s=i-a;else if(i-a!==s)throw new h("row lengths do not match");u++}for(var l=new t(s,u),d=0;d<i;d++)o[d]&&l.set(Math.floor(d%s),Math.floor(d/s));return l},t.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return 0!=(this.bits[r]>>>(31&t)&1)},t.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(31&t)&4294967295},t.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(31&t)&4294967295)},t.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(31&t)&4294967295},t.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new h("input matrix dimensions do not match");for(var e=new y(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits,o=0,i=this.height;o<i;o++)for(var a=o*r,s=t.getRow(o,e).getBitArray(),u=0;u<r;u++)n[a+u]^=s[u]},t.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},t.prototype.setRegion=function(t,e,r,n){if(e<0||t<0)throw new h("Left and top must be nonnegative");if(n<1||r<1)throw new h("Height and width must be at least 1");var o=t+r,i=e+n;if(i>this.height||o>this.width)throw new h("The region must fit inside the matrix");for(var a=this.rowSize,s=this.bits,u=e;u<i;u++)for(var c=u*a,l=t;l<o;l++)s[c+Math.floor(l/32)]|=1<<(31&l)&4294967295},t.prototype.getRow=function(t,e){null==e||e.getSize()<this.width?e=new y(this.width):e.clear();for(var r=this.rowSize,n=this.bits,o=t*r,i=0;i<r;i++)e.setBulk(32*i,n[o+i]);return e},t.prototype.setRow=function(t,e){p.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new y(t),n=new y(t),o=0,i=Math.floor((e+1)/2);o<i;o++)r=this.getRow(o,r),n=this.getRow(e-1-o,n),r.reverse(),n.reverse(),this.setRow(o,n),this.setRow(e-1-o,r)},t.prototype.getEnclosingRectangle=function(){for(var t=this.height,e=this.rowSize,r=this.bits,n=this.width,o=t,i=-1,a=-1,s=0;s<t;s++)for(var u=0;u<e;u++){var c=r[s*e+u];if(0!==c){if(s<o&&(o=s),s>a&&(a=s),32*u<n){for(var h=0;0==(c<<31-h&4294967295);)h++;32*u+h<n&&(n=32*u+h)}if(32*u+31>i){for(h=31;c>>>h==0;)h--;32*u+h>i&&(i=32*u+h)}}}return i<n||a<o?null:Int32Array.from([n,o,i-n+1,a-o+1])},t.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&0===e[r];)r++;if(r===e.length)return null;for(var n=r/t,o=r%t*32,i=e[r],a=0;0==(i<<31-a&4294967295);)a++;return Int32Array.from([o+=a,n])},t.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&0===e[r];)r--;if(r<0)return null;for(var n=Math.floor(r/t),o=32*Math.floor(r%t),i=e[r],a=31;i>>>a==0;)a--;return Int32Array.from([o+=a,n])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){return e instanceof t&&this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&C.equals(this.bits,e.bits)},t.prototype.hashCode=function(){var t=this.width;return 31*(t=31*(t=31*(t=31*t+this.width)+this.height)+this.rowSize)+C.hashCode(this.bits)},t.prototype.toString=function(t,e,r){return void 0===t&&(t="X "),void 0===e&&(e="  "),void 0===r&&(r="\n"),this.buildToString(t,e,r)},t.prototype.buildToString=function(t,e,r){for(var n=new B,o=0,i=this.height;o<i;o++){for(var a=0,s=this.width;a<s;a++)n.append(this.get(a,o)?t:e);n.append(r)}return n.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),F=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(a),x=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),V=function(t){function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return x(e,t),e.prototype.getBlackRow=function(t,r){var n=this.getLuminanceSource(),o=n.getWidth();null==r||r.getSize()<o?r=new y(o):r.clear(),this.initArrays(o);for(var i=n.getRow(t,this.luminances),a=this.buckets,s=0;s<o;s++)a[(255&i[s])>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(a);if(o<3)for(s=0;s<o;s++)(255&i[s])<u&&r.set(s);else{var c=255&i[0],h=255&i[1];for(s=1;s<o-1;s++){var l=255&i[s+1];(4*h-c-l)/2<u&&r.set(s),c=h,h=l}}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),n=t.getHeight(),o=new L(r,n);this.initArrays(r);for(var i=this.buckets,a=1;a<5;a++)for(var s=Math.floor(n*a/5),u=t.getRow(s,this.luminances),c=Math.floor(4*r/5),h=Math.floor(r/5);h<c;h++)i[(255&u[h])>>e.LUMINANCE_SHIFT]++;var l=e.estimateBlackPoint(i),d=t.getMatrix();for(a=0;a<n;a++){var f=a*r;for(h=0;h<r;h++)(255&d[f+h])<l&&o.set(h,a)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,n=0;n<e.LUMINANCE_BUCKETS;n++)r[n]=0},e.estimateBlackPoint=function(t){for(var r=t.length,n=0,o=0,i=0,a=0;a<r;a++)t[a]>i&&(o=a,i=t[a]),t[a]>n&&(n=t[a]);var s=0,u=0;for(a=0;a<r;a++){var c=a-o;(f=t[a]*c*c)>u&&(s=a,u=f)}if(o>s){var h=o;o=s,s=h}if(s-o<=r/16)throw new k;var l=s-1,d=-1;for(a=s-1;a>o;a--){var f,g=a-o;(f=g*g*(s-a)*(n-t[a]))>d&&(l=a,d=f)}return l<<e.LUMINANCE_SHIFT},e.LUMINANCE_SHIFT=8-(e.LUMINANCE_BITS=5),e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(g),U=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),H=function(t){function e(e){var r=t.call(this,e)||this;return r.matrix=null,r}return U(e,t),e.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),o=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&o>=e.MINIMUM_DIMENSION){var i=r.getMatrix(),a=n>>e.BLOCK_SIZE_POWER;0!=(n&e.BLOCK_SIZE_MASK)&&a++;var s=o>>e.BLOCK_SIZE_POWER;0!=(o&e.BLOCK_SIZE_MASK)&&s++;var u=e.calculateBlackPoints(i,a,s,n,o),c=new L(n,o);e.calculateThresholdForBlock(i,a,s,n,o,u,c),this.matrix=c}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,n,o,i,a,s){for(var u=i-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,h=0;h<n;h++){var l=h<<e.BLOCK_SIZE_POWER;l>u&&(l=u);for(var d=e.cap(h,2,n-3),f=0;f<r;f++){var g=f<<e.BLOCK_SIZE_POWER;g>c&&(g=c);for(var p=e.cap(f,2,r-3),w=0,m=-2;m<=2;m++){var A=a[d+m];w+=A[p-2]+A[p-1]+A[p]+A[p+1]+A[p+2]}e.thresholdBlock(t,g,l,w/25,o,s)}}},e.cap=function(t,e,r){return t<e?e:t>r?r:t},e.thresholdBlock=function(t,r,n,o,i,a){for(var s=0,u=n*i+r;s<e.BLOCK_SIZE;s++,u+=i)for(var c=0;c<e.BLOCK_SIZE;c++)(255&t[u+c])<=o&&a.set(r+c,n+s)},e.calculateBlackPoints=function(t,r,n,o,i){for(var a=i-e.BLOCK_SIZE,s=o-e.BLOCK_SIZE,u=new Array(n),c=0;c<n;c++){u[c]=new Int32Array(r);var h=c<<e.BLOCK_SIZE_POWER;h>a&&(h=a);for(var l=0;l<r;l++){var d=l<<e.BLOCK_SIZE_POWER;d>s&&(d=s);for(var f=0,g=255,p=0,w=0,m=h*o+d;w<e.BLOCK_SIZE;w++,m+=o){for(var A=0;A<e.BLOCK_SIZE;A++){var _=255&t[m+A];f+=_,_<g&&(g=_),_>p&&(p=_)}if(p-g>e.MIN_DYNAMIC_RANGE)for(w++,m+=o;w<e.BLOCK_SIZE;w++,m+=o)for(A=0;A<e.BLOCK_SIZE;A++)f+=255&t[m+A]}var C=f>>2*e.BLOCK_SIZE_POWER;if(p-g<=e.MIN_DYNAMIC_RANGE&&(C=g/2,c>0&&l>0)){var E=(u[c-1][l]+2*u[c][l-1]+u[c-1][l-1])/4;g<E&&(C=E)}u[c][l]=C}}return u},e.BLOCK_SIZE_MASK=(e.BLOCK_SIZE=1<<(e.BLOCK_SIZE_POWER=3))-1,e.MINIMUM_DIMENSION=5*e.BLOCK_SIZE,e.MIN_DYNAMIC_RANGE=24,e}(V),G=function(){function t(t,e){this.width=t,this.height=e}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(t,e,r,n){throw new D("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new D("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new D("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),e=new B,r=0;r<this.height;r++){for(var n=this.getRow(r,t),o=0;o<this.width;o++){var i=255&n[o];e.append(i<64?"#":i<128?"+":i<192?".":" ")}e.append("\n")}return e.toString()},t}(),X=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),W=function(t){function e(e){var r=t.call(this,e.getWidth(),e.getHeight())||this;return r.delegate=e,r}return X(e,t),e.prototype.getRow=function(t,e){for(var r=this.delegate.getRow(t,e),n=this.getWidth(),o=0;o<n;o++)r[o]=255-(255&r[o]);return r},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),e=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(e),n=0;n<e;n++)r[n]=255-(255&t[n]);return r},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,n,o){return new e(this.delegate.crop(t,r,n,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(G),z=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y=function(t){function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return z(e,t),e.makeBufferFromCanvasImageData=function(t){var r=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(r.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,e,r){for(var n=new Uint8ClampedArray(e*r),o=0,i=0,a=t.length;o<a;o+=4,i++)n[i]=0===t[o+3]?255:306*t[o]+601*t[o+1]+117*t[o+2]+512>>10;return n},e.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new h("Requested row is outside the image: "+t);var r=this.getWidth(),n=t*r;return null===e?e=this.buffer.slice(n,n+r):(e.length<r&&(e=new Uint8ClampedArray(r)),e.set(this.buffer.slice(n,n+r))),e},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(e,r,n,o){return t.prototype.crop.call(this,e,r,n,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),n=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,i=this.canvas.width,a=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(o))*i+Math.abs(Math.sin(o))*a),u=Math.ceil(Math.abs(Math.sin(o))*i+Math.abs(Math.cos(o))*a);return r.width=s,r.height=u,n.translate(s/2,u/2),n.rotate(o),n.drawImage(this.canvas,i/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new W(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e}(G),Z=function(){function t(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),j=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(e){i(e)}}function s(t){try{u(n.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})},K=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},q=function(){function t(t,e,r){void 0===e&&(e=500),this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return"undefined"!=typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return j(this,void 0,void 0,function(){var t,e,r,n,o,i,a,s;return K(this,function(u){switch(u.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=u.sent(),e=[];try{for(r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n=r.next();!n.done;n=r.next())"videoinput"===(i="video"===(o=n.value).kind?"videoinput":o.kind)&&e.push({deviceId:o.deviceId||o.id,label:o.label||"Video device "+(e.length+1),kind:i,groupId:o.groupId})}catch(c){a={error:c}}finally{try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(a)throw a.error}}return[2,e]}})})},t.prototype.getVideoInputDevices=function(){return j(this,void 0,void 0,function(){return K(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,t.sent().map(function(t){return new Z(t.deviceId,t.label)})]}})})},t.prototype.findDeviceById=function(t){return j(this,void 0,void 0,function(){var e;return K(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(e=r.sent())?[2,e.find(function(e){return e.deviceId===t})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(t,e){return j(this,void 0,void 0,function(){return K(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,e)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(t,e){return j(this,void 0,void 0,function(){return K(this,function(r){switch(r.label){case 0:return this.reset(),[4,this.decodeOnceFromConstraints({video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},e)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(t,e){return j(this,void 0,void 0,function(){var r;return K(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=n.sent(),[4,this.decodeOnceFromStream(r,e)];case 2:return[2,n.sent()]}})})},t.prototype.decodeOnceFromStream=function(t,e){return j(this,void 0,void 0,function(){var r;return K(this,function(n){switch(n.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return r=n.sent(),[4,this.decodeOnce(r)];case 2:return[2,n.sent()]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(t,e,r){return j(this,void 0,void 0,function(){return K(this,function(n){switch(n.label){case 0:return[4,this.decodeFromVideoDevice(t,e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromVideoDevice=function(t,e,r){return j(this,void 0,void 0,function(){return K(this,function(n){switch(n.label){case 0:return[4,this.decodeFromConstraints({video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromConstraints=function(t,e,r){return j(this,void 0,void 0,function(){var n;return K(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=o.sent(),[4,this.decodeFromStream(n,e,r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeFromStream=function(t,e,r){return j(this,void 0,void 0,function(){var n;return K(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return n=o.sent(),[4,this.decodeContinuously(n,r)];case 2:return[2,o.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(t,e){return j(this,void 0,void 0,function(){var r;return K(this,function(n){switch(n.label){case 0:return r=this.prepareVideoElement(e),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return n.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(t){var e=this;return new Promise(function(r,n){return e.playVideoOnLoad(t,function(){return r()})})},t.prototype.playVideoOnLoad=function(t,e){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)},t.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},t.prototype.tryPlayVideo=function(t){return j(this,void 0,void 0,function(){return K(this,function(e){switch(e.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.play()];case 2:return e.sent(),[3,4];case 3:return e.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(t,e){var r=document.getElementById(t);if(!r)throw new u("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new u("element with id '"+t+"' must be an "+e+" element");return r},t.prototype.decodeFromImage=function(t,e){if(!t&&!e)throw new u("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)},t.prototype.decodeFromVideo=function(t,e){if(!t&&!e)throw new u("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)},t.prototype.decodeFromVideoContinuously=function(t,e,r){if(void 0===t&&void 0===e)throw new u("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)},t.prototype.decodeFromImageElement=function(t){if(!t)throw new u("An image element must be provided.");this.reset();var e=this.prepareImageElement(t);return this.imageElement=e,this.isImageLoaded(e)?this.decodeOnce(e,!1,!0):this._decodeOnLoadImage(e)},t.prototype.decodeFromVideoElement=function(t){var e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)},t.prototype.decodeFromVideoElementContinuously=function(t,e){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)},t.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new u("A video element must be provided.");this.reset();var e=this.prepareVideoElement(t);return this.videoElement=e,e},t.prototype.decodeFromImageUrl=function(t){if(!t)throw new u("An URL must be provided.");this.reset();var e=this.prepareImageElement();this.imageElement=e;var r=this._decodeOnLoadImage(e);return e.src=t,r},t.prototype.decodeFromVideoUrl=function(t){if(!t)throw new u("An URL must be provided.");this.reset();var e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r},t.prototype.decodeFromVideoUrlContinuously=function(t,e){if(!t)throw new u("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,e);return r.src=t,n},t.prototype._decodeOnLoadImage=function(t){var e=this;return new Promise(function(r,n){e.imageLoadedListener=function(){return e.decodeOnce(t,!1,!0).then(r,n)},t.addEventListener("load",e.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(t){return j(this,void 0,void 0,function(){return K(this,function(e){switch(e.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return e.sent(),[4,this.decodeOnce(t)];case 2:return[2,e.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(t,e){return j(this,void 0,void 0,function(){return K(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,e),[2]}})})},t.prototype.isImageLoaded=function(t){return!!t.complete&&0!==t.naturalWidth},t.prototype.prepareImageElement=function(t){var e;return void 0===t&&((e=document.createElement("img")).width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e},t.prototype.prepareVideoElement=function(t){var e;return t||"undefined"==typeof document||((e=document.createElement("video")).width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e},t.prototype.decodeOnce=function(t,e,r){var n=this;void 0===e&&(e=!0),void 0===r&&(r=!0),this._stopAsyncDecode=!1;var o=function(i,a){if(n._stopAsyncDecode)return a(new k("Video stream has ended before any code could be detected.")),void(n._stopAsyncDecode=void 0);try{i(n.decode(t))}catch(s){if(e&&s instanceof k||(s instanceof f||s instanceof T)&&r)return setTimeout(o,n._timeBetweenDecodingAttempts,i,a);a(s)}};return new Promise(function(t,e){return o(t,e)})},t.prototype.decodeContinuously=function(t,e){var r=this;this._stopContinuousDecode=!1;var n=function(){if(r._stopContinuousDecode)r._stopContinuousDecode=void 0;else try{var o=r.decode(t);e(o,null),setTimeout(n,r.timeBetweenScansMillis)}catch(i){e(null,i),(i instanceof f||i instanceof T||i instanceof k)&&setTimeout(n,r._timeBetweenDecodingAttempts)}};n()},t.prototype.decode=function(t){var e=this.createBinaryBitmap(t);return this.decodeBitmap(e)},t.prototype.createBinaryBitmap=function(t){var e=this.getCaptureCanvasContext(t);this.drawImageOnCanvas(e,t);var r=this.getCaptureCanvas(t),n=new Y(r),o=new H(n);return new l(o)},t.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var e=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=e}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas},t.prototype.drawImageOnCanvas=function(t,e){t.drawImage(e,0,0)},t.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},t.prototype.createCaptureCanvas=function(t){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;var e,r,n=document.createElement("canvas");return void 0!==t&&(t instanceof HTMLVideoElement?(e=t.videoWidth,r=t.videoHeight):t instanceof HTMLImageElement&&(e=t.naturalWidth||t.width,r=t.naturalHeight||t.height)),n.style.width=e+"px",n.style.height=r+"px",n.width=e,n.height=r,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(t,e){try{t.srcObject=e}catch(r){t.src=URL.createObjectURL(e)}},t.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch(e){t.src=""}this.videoElement.removeAttribute("src")},t}(),Q=function(){function t(t,e,r,n,o,i){void 0===r&&(r=null==e?0:8*e.length),void 0===i&&(i=p.currentTimeMillis()),this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=n,this.format=o,this.timestamp=i,this.text=t,this.rawBytes=e,this.numBits=null==r?null==e?0:8*e.length:r,this.resultPoints=n,this.format=o,this.resultMetadata=null,this.timestamp=null==i?p.currentTimeMillis():i}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(t,e){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)},t.prototype.putAllMetadata=function(t){null!==t&&(this.resultMetadata=null===this.resultMetadata?t:new Map(t))},t.prototype.addResultPoints=function(t){var e=this.resultPoints;if(null===e)this.resultPoints=t;else if(null!==t&&t.length>0){var r=new Array(e.length+t.length);p.arraycopy(e,0,r,0,e.length),p.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}();!function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(O||(O={}));var J,$=O;!function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(J||(J={}));var tt,et=J,rt=function(){function t(t,e,r,n,o,i){void 0===o&&(o=-1),void 0===i&&(i=-1),this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=i,this.numBits=null==t?0:8*t.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(t){this.numBits=t},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(t){this.erasures=t},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(t){this.other=t},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),nt=function(){function t(){}return t.prototype.exp=function(t){return this.expTable[t]},t.prototype.log=function(t){if(0===t)throw new h;return this.logTable[t]},t.addOrSubtract=function(t,e){return t^e},t}(),ot=function(){function t(t,e){if(0===e.length)throw new h;this.field=t;var r=e.length;if(r>1&&0===e[0]){for(var n=1;n<r&&0===e[n];)n++;n===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-n),p.arraycopy(e,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return 0===this.coefficients[0]},t.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},t.prototype.evaluateAt=function(t){if(0===t)return this.getCoefficient(0);var e,r=this.coefficients;if(1===t){e=0;for(var n=0,o=r.length;n!==o;n++)e=nt.addOrSubtract(e,r[n]);return e}e=r[0];var i=r.length,a=this.field;for(n=1;n<i;n++)e=nt.addOrSubtract(a.multiply(t,e),r[n]);return e},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var o=r;r=n,n=o}var i=new Int32Array(n.length),a=n.length-r.length;p.arraycopy(n,0,i,0,a);for(var s=a;s<n.length;s++)i[s]=nt.addOrSubtract(r[s-a],n[s]);return new t(this.field,i)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,o=e.coefficients,i=o.length,a=new Int32Array(n+i-1),s=this.field,u=0;u<n;u++)for(var c=r[u],l=0;l<i;l++)a[u+l]=nt.addOrSubtract(a[u+l],s.multiply(c,o[l]));return new t(s,a)},t.prototype.multiplyScalar=function(e){if(0===e)return this.field.getZero();if(1===e)return this;for(var r=this.coefficients.length,n=this.field,o=new Int32Array(r),i=this.coefficients,a=0;a<r;a++)o[a]=n.multiply(i[a],e);return new t(n,o)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new h;if(0===r)return this.field.getZero();for(var n=this.coefficients,o=n.length,i=new Int32Array(o+e),a=this.field,s=0;s<o;s++)i[s]=a.multiply(n[s],r);return new t(a,i)},t.prototype.divide=function(t){if(!this.field.equals(t.field))throw new h("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new h("Divide by 0");for(var e=this.field,r=e.getZero(),n=this,o=t.getCoefficient(t.getDegree()),i=e.inverse(o);n.getDegree()>=t.getDegree()&&!n.isZero();){var a=n.getDegree()-t.getDegree(),s=e.multiply(n.getCoefficient(n.getDegree()),i),u=t.multiplyByMonomial(a,s),c=e.buildMonomial(a,s);r=r.addOrSubtract(c),n=n.addOrSubtract(u)}return[r,n]},t.prototype.toString=function(){for(var t="",e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);if(0!==r){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),0===e||1!==r){var n=this.field.log(r);0===n?t+="1":1===n?t+="a":(t+="a^",t+=n)}0!==e&&(1===e?t+="x":(t+="x^",t+=e))}}return t},t}(),it=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return it(e,t),e.kind="ArithmeticException",e}(a),st=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ut=function(t){function e(e,r,n){var o=t.call(this)||this;o.primitive=e,o.size=r,o.generatorBase=n;for(var i=new Int32Array(r),a=1,s=0;s<r;s++)i[s]=a,(a*=2)>=r&&(a^=e,a&=r-1);o.expTable=i;var u=new Int32Array(r);for(s=0;s<r-1;s++)u[i[s]]=s;return o.logTable=u,o.zero=new ot(o,Int32Array.from([0])),o.one=new ot(o,Int32Array.from([1])),o}return st(e,t),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,e){if(t<0)throw new h;if(0===e)return this.zero;var r=new Int32Array(t+1);return r[0]=e,new ot(this,r)},e.prototype.inverse=function(t){if(0===t)throw new at;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+E.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(nt),ct=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ct(e,t),e.kind="ReedSolomonException",e}(a),lt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lt(e,t),e.kind="IllegalStateException",e}(a),ft=function(){function t(t){this.field=t}return t.prototype.decode=function(t,e){for(var r=this.field,n=new ot(r,t),o=new Int32Array(e),i=!0,a=0;a<e;a++){var s=n.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=s,0!==s&&(i=!1)}if(!i){var u=new ot(r,o),c=this.runEuclideanAlgorithm(r.buildMonomial(e,1),u,e),h=c[1],l=this.findErrorLocations(c[0]),d=this.findErrorMagnitudes(h,l);for(a=0;a<l.length;a++){var f=t.length-1-r.log(l[a]);if(f<0)throw new ht("Bad error location");t[f]=ut.addOrSubtract(t[f],d[a])}}},t.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var n=t;t=e,e=n}for(var o=this.field,i=t,a=e,s=o.getZero(),u=o.getOne();a.getDegree()>=(r/2|0);){var c=i,h=s;if(s=u,(i=a).isZero())throw new ht("r_{i-1} was zero");a=c;for(var l=o.getZero(),d=i.getCoefficient(i.getDegree()),f=o.inverse(d);a.getDegree()>=i.getDegree()&&!a.isZero();){var g=a.getDegree()-i.getDegree(),p=o.multiply(a.getCoefficient(a.getDegree()),f);l=l.addOrSubtract(o.buildMonomial(g,p)),a=a.addOrSubtract(i.multiplyByMonomial(g,p))}if(u=l.multiply(s).addOrSubtract(h),a.getDegree()>=i.getDegree())throw new dt("Division algorithm failed to reduce polynomial?")}var w=u.getCoefficient(0);if(0===w)throw new ht("sigmaTilde(0) was zero");var m=o.inverse(w);return[u.multiplyScalar(m),a.multiplyScalar(m)]},t.prototype.findErrorLocations=function(t){var e=t.getDegree();if(1===e)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(e),n=0,o=this.field,i=1;i<o.getSize()&&n<e;i++)0===t.evaluateAt(i)&&(r[n]=o.inverse(i),n++);if(n!==e)throw new ht("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(t,e){for(var r=e.length,n=new Int32Array(r),o=this.field,i=0;i<r;i++){for(var a=o.inverse(e[i]),s=1,u=0;u<r;u++)if(i!==u){var c=o.multiply(e[u],a);s=o.multiply(s,0==(1&c)?1|c:-2&c)}n[i]=o.multiply(t.evaluateAt(a),o.inverse(s)),0!==o.getGeneratorBase()&&(n[i]=o.multiply(n[i],a))}return n},t}();!function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"}(tt||(tt={}));var gt,pt,wt=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),o=this.correctBits(n),i=t.convertBoolArrayToByteArray(o),a=t.getEncodedData(o),s=new rt(i,a,null,null);return s.setNumBits(o.length),s},t.highLevelDecode=function(t){return this.getEncodedData(t)},t.getEncodedData=function(e){for(var r=e.length,n=tt.UPPER,o=tt.UPPER,i="",a=0;a<r;)if(o===tt.BINARY){if(r-a<5)break;var s=t.readCode(e,a,5);if(a+=5,0===s){if(r-a<11)break;s=t.readCode(e,a,11)+31,a+=11}for(var u=0;u<s;u++){if(r-a<8){a=r;break}var c=t.readCode(e,a,8);i+=P.castAsNonUtf8Char(c),a+=8}o=n}else{var h=o===tt.DIGIT?4:5;if(r-a<h)break;c=t.readCode(e,a,h),a+=h;var l=t.getCharacter(o,c);l.startsWith("CTRL_")?(n=o,o=t.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=o)):(i+=l,o=n)}return i},t.getTable=function(t){switch(t){case"L":return tt.LOWER;case"P":return tt.PUNCT;case"M":return tt.MIXED;case"D":return tt.DIGIT;case"B":return tt.BINARY;case"U":default:return tt.UPPER}},t.getCharacter=function(e,r){switch(e){case tt.UPPER:return t.UPPER_TABLE[r];case tt.LOWER:return t.LOWER_TABLE[r];case tt.MIXED:return t.MIXED_TABLE[r];case tt.PUNCT:return t.PUNCT_TABLE[r];case tt.DIGIT:return t.DIGIT_TABLE[r];default:throw new dt("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=ut.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=ut.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=ut.AZTEC_DATA_10):(n=12,r=ut.AZTEC_DATA_12);var o=this.ddata.getNbDatablocks(),i=e.length/n;if(i<o)throw new T;for(var a=e.length%n,s=new Int32Array(i),u=0;u<i;u++,a+=n)s[u]=t.readCode(e,a,n);try{new ft(r).decode(s,i-o)}catch(p){throw new T(p)}var c=(1<<n)-1,h=0;for(u=0;u<o;u++){if(0===(f=s[u])||f===c)throw new T;1!==f&&f!==c-1||h++}var l=new Array(o*n-h),d=0;for(u=0;u<o;u++){var f;if(1===(f=s[u])||f===c-1)l.fill(f>1,d,d+n-1),d+=n-1;else for(var g=n-1;g>=0;--g)l[d++]=0!=(f&1<<g)}return l},t.prototype.extractBits=function(t){var e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(e?11:14)+4*r,o=new Int32Array(n),i=new Array(this.totalBitsInLayer(r,e));if(e)for(var a=0;a<o.length;a++)o[a]=a;else{var s=n+1+2*E.truncDivision(E.truncDivision(n,2)-1,15),u=n/2,c=E.truncDivision(s,2);for(a=0;a<u;a++){var h=a+E.truncDivision(a,15);o[u-a-1]=c-h-1,o[u+a]=c+h+1}}a=0;for(var l=0;a<r;a++){for(var d=4*(r-a)+(e?9:12),f=2*a,g=n-1-f,p=0;p<d;p++)for(var w=2*p,m=0;m<2;m++)i[l+w+m]=t.get(o[f+m],o[f+p]),i[l+2*d+w+m]=t.get(o[f+p],o[g-m]),i[l+4*d+w+m]=t.get(o[g-m],o[g-p]),i[l+6*d+w+m]=t.get(o[g-p],o[f+m]);l+=8*d}return i},t.readCode=function(t,e,r){for(var n=0,o=e;o<e+r;o++)n<<=1,t[o]&&(n|=1);return n},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),mt=function(){function t(){}return t.round=function(t){return NaN===t?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},t.distance=function(t,e,r,n){var o=t-r,i=e-n;return Math.sqrt(o*o+i*i)},t.sum=function(t){for(var e=0,r=0,n=t.length;r!==n;r++)e+=t[r];return e},t}(),At=function(){function t(){}return t.floatToIntBits=function(t){return t},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),_t=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){return e instanceof t&&this.x===e.x&&this.y===e.y},t.prototype.hashCode=function(){return 31*At.floatToIntBits(this.x)+At.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(t){var e,r,n,o=this.distance(t[0],t[1]),i=this.distance(t[1],t[2]),a=this.distance(t[0],t[2]);if(i>=o&&i>=a?(r=t[0],e=t[1],n=t[2]):a>=i&&a>=o?(r=t[1],e=t[0],n=t[2]):(r=t[2],e=t[0],n=t[1]),this.crossProductZ(e,r,n)<0){var s=e;e=n,n=s}t[0]=e,t[1]=r,t[2]=n},t.distance=function(t,e){return mt.distance(t.x,t.y,e.x,e.y)},t.crossProductZ=function(t,e,r){var n=e.x,o=e.y;return(r.x-n)*(t.y-o)-(r.y-o)*(t.x-n)},t}(),Ct=function(){function t(t,e){this.bits=t,this.points=e}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),Et=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yt=function(t){function e(e,r,n,o,i){var a=t.call(this,e,r)||this;return a.compact=n,a.nbDatablocks=o,a.nbLayers=i,a}return Et(e,t),e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Ct),It=function(){function t(e,r,n,o){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),null==r&&(r=t.INIT_SIZE),null==n&&(n=e.getWidth()/2|0),null==o&&(o=e.getHeight()/2|0);var i=r/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=o-i,this.downInit=o+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new k}return t.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,r=this.upInit,n=this.downInit,o=!1,i=!0,a=!1,s=!1,u=!1,c=!1,h=!1,l=this.width,d=this.height;i;){i=!1;for(var f=!0;(f||!s)&&e<l;)(f=this.containsBlackPoint(r,n,e,!1))?(e++,i=!0,s=!0):s||e++;if(e>=l){o=!0;break}for(var g=!0;(g||!u)&&n<d;)(g=this.containsBlackPoint(t,e,n,!0))?(n++,i=!0,u=!0):u||n++;if(n>=d){o=!0;break}for(var p=!0;(p||!c)&&t>=0;)(p=this.containsBlackPoint(r,n,t,!1))?(t--,i=!0,c=!0):c||t--;if(t<0){o=!0;break}for(var w=!0;(w||!h)&&r>=0;)(w=this.containsBlackPoint(t,e,r,!0))?(r--,i=!0,h=!0):h||r--;if(r<0){o=!0;break}i&&(a=!0)}if(!o&&a){for(var m=e-t,A=null,_=1;null===A&&_<m;_++)A=this.getBlackPointOnSegment(t,n-_,t+_,n);if(null==A)throw new k;var C=null;for(_=1;null===C&&_<m;_++)C=this.getBlackPointOnSegment(t,r+_,t+_,r);if(null==C)throw new k;var E=null;for(_=1;null===E&&_<m;_++)E=this.getBlackPointOnSegment(e,r+_,e-_,r);if(null==E)throw new k;var y=null;for(_=1;null===y&&_<m;_++)y=this.getBlackPointOnSegment(e,n-_,e-_,n);if(null==y)throw new k;return this.centerEdges(y,A,E,C)}throw new k},t.prototype.getBlackPointOnSegment=function(t,e,r,n){for(var o=mt.round(mt.distance(t,e,r,n)),i=(r-t)/o,a=(n-e)/o,s=this.image,u=0;u<o;u++){var c=mt.round(t+u*i),h=mt.round(e+u*a);if(s.get(c,h))return new _t(c,h)}return null},t.prototype.centerEdges=function(e,r,n,o){var i=e.getX(),a=e.getY(),s=r.getX(),u=r.getY(),c=n.getX(),h=n.getY(),l=o.getX(),d=o.getY(),f=t.CORR;return i<this.width/2?[new _t(l-f,d+f),new _t(s+f,u+f),new _t(c-f,h-f),new _t(i+f,a-f)]:[new _t(l+f,d+f),new _t(s+f,u-f),new _t(c-f,h+f),new _t(i-f,a-f)]},t.prototype.containsBlackPoint=function(t,e,r,n){var o=this.image;if(n){for(var i=t;i<=e;i++)if(o.get(i,r))return!0}else for(var a=t;a<=e;a++)if(o.get(r,a))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),St=function(){function t(){}return t.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),n=t.getHeight(),o=!0,i=0;i<e.length&&o;i+=2){var a=Math.floor(e[i]),s=Math.floor(e[i+1]);if(a<-1||a>r||s<-1||s>n)throw new k;o=!1,-1===a?(e[i]=0,o=!0):a===r&&(e[i]=r-1,o=!0),-1===s?(e[i+1]=0,o=!0):s===n&&(e[i+1]=n-1,o=!0)}for(o=!0,i=e.length-2;i>=0&&o;i-=2){if(a=Math.floor(e[i]),s=Math.floor(e[i+1]),a<-1||a>r||s<-1||s>n)throw new k;o=!1,-1===a?(e[i]=0,o=!0):a===r&&(e[i]=r-1,o=!0),-1===s?(e[i+1]=0,o=!0):s===n&&(e[i+1]=n-1,o=!0)}},t}(),vt=function(){function t(t,e,r,n,o,i,a,s,u){this.a11=t,this.a21=e,this.a31=r,this.a12=n,this.a22=o,this.a32=i,this.a13=a,this.a23=s,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,o,i,a,s,u,c,h,l,d,f,g,p,w){var m=t.quadrilateralToSquare(e,r,n,o,i,a,s,u);return t.squareToQuadrilateral(c,h,l,d,f,g,p,w).times(m)},t.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,n=this.a12,o=this.a13,i=this.a21,a=this.a22,s=this.a23,u=this.a31,c=this.a32,h=this.a33,l=0;l<e;l+=2){var d=t[l],f=t[l+1],g=o*d+s*f+h;t[l]=(r*d+i*f+u)/g,t[l+1]=(n*d+a*f+c)/g}},t.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,n=this.a12,o=this.a13,i=this.a21,a=this.a22,s=this.a23,u=this.a31,c=this.a32,h=this.a33,l=t.length,d=0;d<l;d++){var f=t[d],g=e[d],p=o*f+s*g+h;t[d]=(r*f+i*g+u)/p,e[d]=(n*f+a*g+c)/p}},t.squareToQuadrilateral=function(e,r,n,o,i,a,s,u){var c=e-n+i-s,h=r-o+a-u;if(0===c&&0===h)return new t(n-e,i-n,e,o-r,a-o,r,0,0,1);var l=n-i,d=s-i,f=o-a,g=u-a,p=l*g-d*f,w=(c*g-d*h)/p,m=(l*h-c*f)/p;return new t(n-e+w*n,s-e+m*s,e,o-r+w*o,u-r+m*u,r,w,m,1)},t.quadrilateralToSquare=function(e,r,n,o,i,a,s,u){return t.squareToQuadrilateral(e,r,n,o,i,a,s,u).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),Tt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Tt(e,t),e.prototype.sampleGrid=function(t,e,r,n,o,i,a,s,u,c,h,l,d,f,g,p,w,m,A){var _=vt.quadrilateralToQuadrilateral(n,o,i,a,s,u,c,h,l,d,f,g,p,w,m,A);return this.sampleGridWithTransform(t,e,r,_)},e.prototype.sampleGridWithTransform=function(t,e,r,n){if(e<=0||r<=0)throw new k;for(var o=new L(e,r),i=new Float32Array(2*e),a=0;a<r;a++){for(var s=i.length,u=a+.5,c=0;c<s;c+=2)i[c]=c/2+.5,i[c+1]=u;n.transformPoints(i),St.checkAndNudgePoints(t,i);try{for(c=0;c<s;c+=2)t.get(Math.floor(i[c]),Math.floor(i[c+1]))&&o.set(c/2,a)}catch(h){throw new k}}return o},e}(St),Ot=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new Rt,t}(),Nt=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.toResultPoint=function(){return new _t(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),bt=function(){function t(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(t){var e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){var n=r[0];r[0]=r[2],r[2]=n}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),i=this.getMatrixCornerPoints(r);return new yt(o,i,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(t){if(!(this.isValidPoint(t[0])&&this.isValidPoint(t[1])&&this.isValidPoint(t[2])&&this.isValidPoint(t[3])))throw new k;var e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);for(var n=0,o=0;o<4;o++){var i=r[(this.shift+o)%4];this.compact?(n<<=7,n+=i>>1&127):(n<<=10,n+=(i>>2&992)+(i>>1&31))}var a=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=1+(a>>6),this.nbDataBlocks=1+(63&a)):(this.nbLayers=1+(a>>11),this.nbDataBlocks=1+(2047&a))},t.prototype.getRotation=function(t,e){var r=0;t.forEach(function(t,n,o){r=(t>>e-2<<1)+(1&t)+(r<<3)}),r=((1&r)<<11)+(r>>1);for(var n=0;n<4;n++)if(E.bitCount(r^this.EXPECTED_CORNER_BITS[n])<=2)return n;throw new k},t.prototype.getCorrectedParameterData=function(t,e){var r,n;e?(r=7,n=2):(r=10,n=4);for(var o=r-n,i=new Int32Array(r),a=r-1;a>=0;--a)i[a]=15&t,t>>=4;try{new ft(ut.AZTEC_PARAM).decode(i,o)}catch(u){throw new k}var s=0;for(a=0;a<n;a++)s=(s<<4)+i[a];return s},t.prototype.getBullsEyeCorners=function(t){var e=t,r=t,n=t,o=t,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(e,i,1,-1),s=this.getFirstDifferent(r,i,1,1),u=this.getFirstDifferent(n,i,-1,1),c=this.getFirstDifferent(o,i,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(c,a)*this.nbCenterLayers/(this.distancePoint(o,e)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(a,s,u,c))break}e=a,r=s,n=u,o=c,i=!i}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new k;this.compact=5===this.nbCenterLayers;var l=new _t(e.getX()+.5,e.getY()-.5),d=new _t(r.getX()+.5,r.getY()+.5),f=new _t(n.getX()-.5,n.getY()+.5),g=new _t(o.getX()-.5,o.getY()-.5);return this.expandSquare([l,d,f,g],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var t,e,r,n;try{t=(u=new It(this.image).detect())[0],e=u[1],r=u[2],n=u[3]}catch(c){var o=this.image.getWidth()/2,i=this.image.getHeight()/2;t=this.getFirstDifferent(new Nt(o+7,i-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Nt(o+7,i+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Nt(o-7,i+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new Nt(o-7,i-7),!1,-1,-1).toResultPoint()}var a=mt.round((t.getX()+n.getX()+e.getX()+r.getX())/4),s=mt.round((t.getY()+n.getY()+e.getY()+r.getY())/4);try{var u;t=(u=new It(this.image,15,a,s).detect())[0],e=u[1],r=u[2],n=u[3]}catch(c){t=this.getFirstDifferent(new Nt(a+7,s-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Nt(a+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Nt(a-7,s+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new Nt(a-7,s-7),!1,-1,-1).toResultPoint()}return a=mt.round((t.getX()+n.getX()+e.getX()+r.getX())/4),s=mt.round((t.getY()+n.getY()+e.getY()+r.getY())/4),new Nt(a,s)},t.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(t,e,r,n,o){var i=Ot.getInstance(),a=this.getDimension(),s=a/2-this.nbCenterLayers,u=a/2+this.nbCenterLayers;return i.sampleGrid(t,a,a,s,s,u,s,u,u,s,u,e.getX(),e.getY(),r.getX(),r.getY(),n.getX(),n.getY(),o.getX(),o.getY())},t.prototype.sampleLine=function(t,e,r){for(var n=0,o=this.distanceResultPoint(t,e),i=o/r,a=t.getX(),s=t.getY(),u=i*(e.getX()-t.getX())/o,c=i*(e.getY()-t.getY())/o,h=0;h<r;h++)this.image.get(mt.round(a+h*u),mt.round(s+h*c))&&(n|=1<<r-h-1);return n},t.prototype.isWhiteOrBlackRectangle=function(t,e,r,n){t=new Nt(t.getX()-3,t.getY()+3),e=new Nt(e.getX()-3,e.getY()-3),r=new Nt(r.getX()+3,r.getY()-3),n=new Nt(n.getX()+3,n.getY()+3);var o=this.getColor(n,t);if(0===o)return!1;var i=this.getColor(t,e);return i===o&&(i=this.getColor(e,r))===o&&(i=this.getColor(r,n))===o},t.prototype.getColor=function(t,e){for(var r=this.distancePoint(t,e),n=(e.getX()-t.getX())/r,o=(e.getY()-t.getY())/r,i=0,a=t.getX(),s=t.getY(),u=this.image.get(t.getX(),t.getY()),c=Math.ceil(r),h=0;h<c;h++)s+=o,this.image.get(mt.round(a+=n),mt.round(s))!==u&&i++;var l=i/r;return l>.1&&l<.9?0:l<=.1===u?1:-1},t.prototype.getFirstDifferent=function(t,e,r,n){for(var o=t.getX()+r,i=t.getY()+n;this.isValid(o,i)&&this.image.get(o,i)===e;)o+=r,i+=n;for(o-=r,i-=n;this.isValid(o,i)&&this.image.get(o,i)===e;)o+=r;for(o-=r;this.isValid(o,i)&&this.image.get(o,i)===e;)i+=n;return new Nt(o,i-=n)},t.prototype.expandSquare=function(t,e,r){var n=r/(2*e),o=t[0].getX()-t[2].getX(),i=t[0].getY()-t[2].getY(),a=(t[0].getX()+t[2].getX())/2,s=(t[0].getY()+t[2].getY())/2,u=new _t(a+n*o,s+n*i),c=new _t(a-n*o,s-n*i);return o=t[1].getX()-t[3].getX(),i=t[1].getY()-t[3].getY(),a=(t[1].getX()+t[3].getX())/2,s=(t[1].getY()+t[3].getY())/2,[u,new _t(a+n*o,s+n*i),c,new _t(a-n*o,s-n*i)]},t.prototype.isValid=function(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()},t.prototype.isValidPoint=function(t){var e=mt.round(t.getX()),r=mt.round(t.getY());return this.isValid(e,r)},t.prototype.distancePoint=function(t,e){return mt.distance(t.getX(),t.getY(),e.getX(),e.getY())},t.prototype.distanceResultPoint=function(t,e){return mt.distance(t.getX(),t.getY(),e.getX(),e.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(E.truncDivision(this.nbLayers-4,8)+1)+15},t}(),Dt=function(){function t(){}return t.prototype.decode=function(t,e){void 0===e&&(e=null);var r=null,n=new bt(t.getBlackMatrix()),o=null,i=null;try{o=(a=n.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(e,o),i=(new wt).decode(a)}catch(h){r=h}if(null==i)try{var a;o=(a=n.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(e,o),i=(new wt).decode(a)}catch(h){if(null!=r)throw r;throw h}var s=new Q(i.getText(),i.getRawBytes(),i.getNumBits(),o,$.AZTEC,p.currentTimeMillis()),u=i.getByteSegments();null!=u&&s.putMetadata(et.BYTE_SEGMENTS,u);var c=i.getECLevel();return null!=c&&s.putMetadata(et.ERROR_CORRECTION_LEVEL,c),s},t.prototype.reportFoundResultPoints=function(t,e){if(null!=t){var r=t.get(S.NEED_RESULT_POINT_CALLBACK);null!=r&&e.forEach(function(t,e,n){r.foundPossibleResultPoint(t)})}},t.prototype.reset=function(){},t}(),Mt=(function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()(function(t){return void 0===t&&(t=500),pt.call(this,new Dt,t)||this},pt=q),function(){function t(){}return t.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch(c){if(e&&!0===e.get(S.TRY_HARDER)&&t.isRotateSupported()){var r=t.rotateCounterClockwise(),n=this.doDecode(r,e),o=n.getResultMetadata(),i=270;null!==o&&!0===o.get(et.ORIENTATION)&&(i+=o.get(et.ORIENTATION)%360),n.putMetadata(et.ORIENTATION,i);var a=n.getResultPoints();if(null!==a)for(var s=r.getHeight(),u=0;u<a.length;u++)a[u]=new _t(s-a[u].getY()-1,a[u].getX());return n}throw new k}},t.prototype.reset=function(){},t.prototype.doDecode=function(t,e){var r,n=t.getWidth(),o=t.getHeight(),i=new y(n),a=e&&!0===e.get(S.TRY_HARDER),s=Math.max(1,o>>(a?8:5));r=a?o:15;for(var u=Math.trunc(o/2),c=0;c<r;c++){var h=Math.trunc((c+1)/2),l=u+s*(0==(1&c)?h:-h);if(l<0||l>=o)break;try{i=t.getBlackRow(l,i)}catch(w){continue}for(var d=function(t){if(1===t&&(i.reverse(),e&&!0===e.get(S.NEED_RESULT_POINT_CALLBACK))){var r=new Map;e.forEach(function(t,e){return r.set(e,t)}),r.delete(S.NEED_RESULT_POINT_CALLBACK),e=r}try{var o=f.decodeRow(l,i,e);if(1===t){o.putMetadata(et.ORIENTATION,180);var a=o.getResultPoints();null!==a&&(a[0]=new _t(n-a[0].getX()-1,a[0].getY()),a[1]=new _t(n-a[1].getX()-1,a[1].getY()))}return{value:o}}catch(s){}},f=this,g=0;g<2;g++){var p=d(g);if("object"==typeof p)return p.value}}throw new k},t.recordPattern=function(t,e,r){for(var n=r.length,o=0;o<n;o++)r[o]=0;var i=t.getSize();if(e>=i)throw new k;for(var a=!t.get(e),s=0,u=e;u<i;){if(t.get(u)!==a)r[s]++;else{if(++s===n)break;r[s]=1,a=!a}u++}if(s!==n&&(s!==n-1||u!==i))throw new k},t.recordPatternInReverse=function(e,r,n){for(var o=n.length,i=e.get(r);r>0&&o>=0;)e.get(--r)!==i&&(o--,i=!i);if(o>=0)throw new k;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(t,e,r){for(var n=t.length,o=0,i=0,a=0;a<n;a++)o+=t[a],i+=e[a];if(o<i)return Number.POSITIVE_INFINITY;var s=o/i;r*=s;for(var u=0,c=0;c<n;c++){var h=t[c],l=e[c]*s,d=h>l?h-l:l-h;if(d>r)return Number.POSITIVE_INFINITY;u+=d}return u/o},t}()),Pt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pt(e,t),e.findStartPattern=function(t){for(var r=t.getSize(),n=t.getNextSet(0),o=0,i=Int32Array.from([0,0,0,0,0,0]),a=n,s=!1,u=n;u<r;u++)if(t.get(u)!==s)i[o]++;else{if(5===o){for(var c=e.MAX_AVG_VARIANCE,h=-1,l=e.CODE_START_A;l<=e.CODE_START_C;l++){var d=Mt.patternMatchVariance(i,e.CODE_PATTERNS[l],e.MAX_INDIVIDUAL_VARIANCE);d<c&&(c=d,h=l)}if(h>=0&&t.isRange(Math.max(0,a-(u-a)/2),a,!1))return Int32Array.from([a,u,h]);a+=i[0]+i[1],(i=i.slice(2,i.length-1))[o-1]=0,i[o]=0,o--}else o++;i[o]=1,s=!s}throw new k},e.decodeCode=function(t,r,n){Mt.recordPattern(t,n,r);for(var o=e.MAX_AVG_VARIANCE,i=-1,a=0;a<e.CODE_PATTERNS.length;a++){var s=this.patternMatchVariance(r,e.CODE_PATTERNS[a],e.MAX_INDIVIDUAL_VARIANCE);s<o&&(o=s,i=a)}if(i>=0)return i;throw new k},e.prototype.decodeRow=function(t,r,n){var o,i=n&&!0===n.get(S.ASSUME_GS1),a=e.findStartPattern(r),s=a[2],u=0,c=new Uint8Array(20);switch(c[u++]=s,s){case e.CODE_START_A:o=e.CODE_CODE_A;break;case e.CODE_START_B:o=e.CODE_CODE_B;break;case e.CODE_START_C:o=e.CODE_CODE_C;break;default:throw new T}for(var h=!1,l=!1,d="",g=a[0],p=a[1],w=Int32Array.from([0,0,0,0,0,0]),m=0,A=0,_=s,C=0,E=!0,y=!1,I=!1;!h;){var v=l;switch(l=!1,m=A,A=e.decodeCode(r,w,p),c[u++]=A,A!==e.CODE_STOP&&(E=!0),A!==e.CODE_STOP&&(_+=++C*A),g=p,p+=w.reduce(function(t,e){return t+e},0),A){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new T}switch(o){case e.CODE_CODE_A:if(A<64)d+=String.fromCharCode(I===y?" ".charCodeAt(0)+A:" ".charCodeAt(0)+A+128),I=!1;else if(A<96)d+=String.fromCharCode(I===y?A-64:A+64),I=!1;else switch(A!==e.CODE_STOP&&(E=!1),A){case e.CODE_FNC_1:i&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!y&&I?(y=!0,I=!1):y&&I?(y=!1,I=!1):I=!0;break;case e.CODE_SHIFT:l=!0,o=e.CODE_CODE_B;break;case e.CODE_CODE_B:o=e.CODE_CODE_B;break;case e.CODE_CODE_C:o=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0}break;case e.CODE_CODE_B:if(A<96)d+=String.fromCharCode(I===y?" ".charCodeAt(0)+A:" ".charCodeAt(0)+A+128),I=!1;else switch(A!==e.CODE_STOP&&(E=!1),A){case e.CODE_FNC_1:i&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!y&&I?(y=!0,I=!1):y&&I?(y=!1,I=!1):I=!0;break;case e.CODE_SHIFT:l=!0,o=e.CODE_CODE_A;break;case e.CODE_CODE_A:o=e.CODE_CODE_A;break;case e.CODE_CODE_C:o=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0}break;case e.CODE_CODE_C:if(A<100)A<10&&(d+="0"),d+=A;else switch(A!==e.CODE_STOP&&(E=!1),A){case e.CODE_FNC_1:i&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case e.CODE_CODE_A:o=e.CODE_CODE_A;break;case e.CODE_CODE_B:o=e.CODE_CODE_B;break;case e.CODE_STOP:h=!0}}v&&(o=o===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var R=p-g;if(p=r.getNextUnset(p),!r.isRange(p,Math.min(r.getSize(),p+(p-g)/2),!1))throw new k;if((_-=C*m)%103!==m)throw new f;var O=d.length;if(0===O)throw new k;O>0&&E&&(d=d.substring(0,o===e.CODE_CODE_C?O-2:O-1));for(var N=(a[1]+a[0])/2,b=g+R/2,D=c.length,M=new Uint8Array(D),P=0;P<D;P++)M[P]=c[P];var B=[new _t(N,t),new _t(b,t)];return new Q(d,M,0,B,$.CODE_128,(new Date).getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Mt),Lt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ft=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kt=function(t){function e(e,r){void 0===e&&(e=!1),void 0===r&&(r=!1);var n=t.call(this)||this;return n.usingCheckDigit=e,n.extendedMode=r,n.decodeRowResult="",n.counters=new Int32Array(9),n}return Lt(e,t),e.prototype.decodeRow=function(t,r,n){var o,i,a,s,u=this.counters;u.fill(0),this.decodeRowResult="";var c,h,l=e.findAsteriskPattern(r,u),d=r.getNextSet(l[1]),g=r.getSize();do{e.recordPattern(r,d,u);var p=e.toNarrowWidePattern(u);if(p<0)throw new k;c=e.patternToChar(p),this.decodeRowResult+=c,h=d;try{for(var w=(o=void 0,Ft(u)),m=w.next();!m.done;m=w.next())d+=m.value}catch(T){o={error:T}}finally{try{m&&!m.done&&(i=w.return)&&i.call(w)}finally{if(o)throw o.error}}d=r.getNextSet(d)}while("*"!==c);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var A,_=0;try{for(var C=Ft(u),E=C.next();!E.done;E=C.next())_+=E.value}catch(R){a={error:R}}finally{try{E&&!E.done&&(s=C.return)&&s.call(C)}finally{if(a)throw a.error}}if(d!==g&&2*(d-h-_)<_)throw new k;if(this.usingCheckDigit){for(var y=this.decodeRowResult.length-1,I=0,S=0;S<y;S++)I+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(S));if(this.decodeRowResult.charAt(y)!==e.ALPHABET_STRING.charAt(I%43))throw new f;this.decodeRowResult=this.decodeRowResult.substring(0,y)}if(0===this.decodeRowResult.length)throw new k;A=this.extendedMode?e.decodeExtended(this.decodeRowResult):this.decodeRowResult;var v=h+_/2;return new Q(A,null,0,[new _t((l[1]+l[0])/2,t),new _t(v,t)],$.CODE_39,(new Date).getTime())},e.findAsteriskPattern=function(t,r){for(var n=t.getSize(),o=t.getNextSet(0),i=0,a=o,s=!1,u=r.length,c=o;c<n;c++)if(t.get(c)!==s)r[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,a-Math.floor((c-a)/2)),a,!1))return[a,c];a+=r[0]+r[1],r.copyWithin(0,2,2+i-1),r[i-1]=0,r[i]=0,i--}else i++;r[i]=1,s=!s}throw new k},e.toNarrowWidePattern=function(t){var e,r,n,o=t.length,i=0;do{var a=2147483647;try{for(var s=(e=void 0,Ft(t)),u=s.next();!u.done;u=s.next())(d=u.value)<a&&d>i&&(a=d)}catch(f){e={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}i=a,n=0;for(var c=0,h=0,l=0;l<o;l++)(d=t[l])>i&&(h|=1<<o-1-l,n++,c+=d);if(3===n){for(l=0;l<o&&n>0;l++){var d;if((d=t[l])>i&&(n--,2*d>=c))return-1}return h}}while(n>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new k},e.decodeExtended=function(t){for(var e=t.length,r="",n=0;n<e;n++){var o=t.charAt(n);if("+"===o||"$"===o||"%"===o||"/"===o){var i=t.charAt(n+1),a="\0";switch(o){case"+":if(!(i>="A"&&i<="Z"))throw new T;a=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new T;a=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\0";else if("V"===i)a="@";else if("W"===i)a="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new T;a="\x7f"}break;case"/":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new T;a=":"}}r+=a,n++}else r+=o}return r},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Mt),xt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.narrowLineWidth=-1,e}return xt(e,t),e.prototype.decodeRow=function(t,r,n){var o,i,a=this.decodeStart(r),s=this.decodeEnd(r),u=new B;e.decodeMiddle(r,a[1],s[0],u);var c=u.toString(),h=null;null!=n&&(h=n.get(S.ALLOWED_LENGTHS)),null==h&&(h=e.DEFAULT_ALLOWED_LENGTHS);var l=c.length,d=!1,f=0;try{for(var g=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(h),p=g.next();!p.done;p=g.next()){var w=p.value;if(l===w){d=!0;break}w>f&&(f=w)}}catch(A){o={error:A}}finally{try{p&&!p.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}if(!d&&l>f&&(d=!0),!d)throw new T;var m=[new _t(a[1],t),new _t(s[0],t)];return new Q(c,null,0,m,$.ITF,(new Date).getTime())},e.decodeMiddle=function(t,r,n,o){var i=new Int32Array(10),a=new Int32Array(5),s=new Int32Array(5);for(i.fill(0),a.fill(0),s.fill(0);r<n;){Mt.recordPattern(t,r,i);for(var u=0;u<5;u++){var c=2*u;a[u]=i[c],s[u]=i[c+1]}var h=e.decodeDigit(a);o.append(h.toString()),h=this.decodeDigit(s),o.append(h.toString()),i.forEach(function(t){r+=t})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),n=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(t,n[0]),n},e.prototype.validateQuietZone=function(t,e){var r=10*this.narrowLineWidth;r=r<e?r:e;for(var n=e-1;r>0&&n>=0&&!t.get(n);n--)r--;if(0!==r)throw new k},e.skipWhiteSpace=function(t){var e=t.getSize(),r=t.getNextSet(0);if(r===e)throw new k;return r},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),n=void 0;try{n=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(i){i instanceof k&&(n=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,n[0]);var o=n[0];return n[0]=t.getSize()-n[1],n[1]=t.getSize()-o,n}finally{t.reverse()}},e.findGuardPattern=function(t,r,n){var o=n.length,i=new Int32Array(o),a=t.getSize(),s=!1,u=0,c=r;i.fill(0);for(var h=r;h<a;h++)if(t.get(h)!==s)i[u]++;else{if(u===o-1){if(Mt.patternMatchVariance(i,n,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,h];c+=i[0]+i[1],p.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,s=!s}throw new k},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,n=-1,o=e.PATTERNS.length,i=0;i<o;i++){var a=Mt.patternMatchVariance(t,e.PATTERNS[i],e.MAX_INDIVIDUAL_VARIANCE);a<r?(r=a,n=i):a===r&&(n=-1)}if(n>=0)return n%10;throw new k},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Mt),Ut=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.decodeRowStringBuffer="",e}return Ut(e,t),e.findStartGuardPattern=function(t){for(var r,n=!1,o=0,i=Int32Array.from([0,0,0]);!n;){i=Int32Array.from([0,0,0]);var a=(r=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,i))[0],s=a-((o=r[1])-a);s>=0&&(n=t.isRange(s,a,!1))}return r},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(0===r)return!1;var n=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===n},e.getStandardUPCEANChecksum=function(t){for(var e=t.length,r=0,n=e-1;n>=0;n-=2){if((o=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new T;r+=o}for(r*=3,n=e-2;n>=0;n-=2){var o;if((o=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new T;r+=o}return(1e3-r)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,e,r,n){return this.findGuardPattern(t,e,r,n,new Int32Array(n.length))},e.findGuardPattern=function(t,r,n,o,i){for(var a=t.getSize(),s=0,u=r=n?t.getNextUnset(r):t.getNextSet(r),c=o.length,h=n,l=r;l<a;l++)if(t.get(l)!==h)i[s]++;else{if(s===c-1){if(Mt.patternMatchVariance(i,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,l]);u+=i[0]+i[1];for(var d=i.slice(2,i.length-1),f=0;f<s-1;f++)i[f]=d[f];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,h=!h}throw new k},e.decodeDigit=function(t,r,n,o){this.recordPattern(t,n,r);for(var i=this.MAX_AVG_VARIANCE,a=-1,s=o.length,u=0;u<s;u++){var c=Mt.patternMatchVariance(r,o[u],e.MAX_INDIVIDUAL_VARIANCE);c<i&&(i=c,a=u)}if(a>=0)return a;throw new k},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Mt),Gt=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xt=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,o),a=o.toString(),s=t.parseExtensionString(a),u=[new _t((n[0]+n[1])/2,e),new _t(i,e)],c=new Q(a,null,0,u,$.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c},t.prototype.decodeMiddle=function(e,r,n){var o,i,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),u=r[1],c=0,h=0;h<5&&u<s;h++){var l=Ht.decodeDigit(e,a,u,Ht.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+l%10);try{for(var d=(o=void 0,Gt(a)),f=d.next();!f.done;f=d.next())u+=f.value}catch(p){o={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}l>=10&&(c|=1<<4-h),4!==h&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(5!==n.length)throw new k;var g=this.determineCheckDigit(c);if(t.extensionChecksum(n.toString())!==g)throw new k;return u},t.extensionChecksum=function(t){for(var e=t.length,r=0,n=e-2;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);for(r*=3,n=e-1;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);return(r*=3)%10},t.prototype.determineCheckDigit=function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new k},t.parseExtensionString=function(e){if(5!==e.length)return null;var r=t.parseExtension5String(e);return null==r?null:new Map([[et.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(t){var e;switch(t.charAt(0)){case"0":e="\xa3";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e=""}var r=parseInt(t.substring(1)),n=r%100;return e+(r/100).toString()+"."+(n<10?"0"+n:n.toString())},t}(),Wt=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zt=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,o),a=o.toString(),s=t.parseExtensionString(a),u=[new _t((n[0]+n[1])/2,e),new _t(i,e)],c=new Q(a,null,0,u,$.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c},t.prototype.decodeMiddle=function(t,e,r){var n,o,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=e[1],u=0,c=0;c<2&&s<a;c++){var h=Ht.decodeDigit(t,i,s,Ht.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+h%10);try{for(var l=(n=void 0,Wt(i)),d=l.next();!d.done;d=l.next())s+=d.value}catch(f){n={error:f}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}h>=10&&(u|=1<<1-c),1!==c&&(s=t.getNextSet(s),s=t.getNextUnset(s))}if(2!==r.length)throw new k;if(parseInt(r.toString())%4!==u)throw new k;return s},t.parseExtensionString=function(t){return 2!==t.length?null:new Map([[et.ISSUE_NUMBER,parseInt(t)]])},t}(),Yt=function(){function t(){}return t.decodeRow=function(t,e,r){var n=Ht.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Xt).decodeRow(t,e,n)}catch(o){return(new zt).decodeRow(t,e,n)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),Zt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jt=function(t){function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(t){return Int32Array.from(t)});for(var n=10;n<20;n++){for(var o=e.L_PATTERNS[n-10],i=new Int32Array(o.length),a=0;a<o.length;a++)i[a]=o[o.length-a-1];e.L_AND_G_PATTERNS[n]=i}return r}return Zt(e,t),e.prototype.decodeRow=function(t,r,n){var o=e.findStartGuardPattern(r),i=null==n?null:n.get(S.NEED_RESULT_POINT_CALLBACK);if(null!=i){var a=new _t((o[0]+o[1])/2,t);i.foundPossibleResultPoint(a)}var s=this.decodeMiddle(r,o,this.decodeRowStringBuffer),u=s.rowOffset,c=s.resultString;if(null!=i){var h=new _t(u,t);i.foundPossibleResultPoint(h)}var l=e.decodeEnd(r,u);if(null!=i){var d=new _t((l[0]+l[1])/2,t);i.foundPossibleResultPoint(d)}var g=l[1],p=g+(g-l[0]);if(p>=r.getSize()||!r.isRange(g,p,!1))throw new k;var w=c.toString();if(w.length<8)throw new T;if(!e.checkChecksum(w))throw new f;var m=(o[1]+o[0])/2,A=(l[1]+l[0])/2,_=this.getBarcodeFormat(),C=[new _t(m,t),new _t(A,t)],E=new Q(w,null,0,C,_,(new Date).getTime()),y=0;try{var I=Yt.decodeRow(t,r,l[1]);E.putMetadata(et.UPC_EAN_EXTENSION,I.getText()),E.putAllMetadata(I.getResultMetadata()),E.addResultPoints(I.getResultPoints()),y=I.getText().length}catch(N){}var v=null==n?null:n.get(S.ALLOWED_EAN_EXTENSIONS);if(null!=v){var R=!1;for(var O in v)if(y.toString()===O){R=!0;break}if(!R)throw new k}return E},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(0===r)return!1;var n=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===n},e.getStandardUPCEANChecksum=function(t){for(var e=t.length,r=0,n=e-1;n>=0;n-=2){if((o=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new T;r+=o}for(r*=3,n=e-2;n>=0;n-=2){var o;if((o=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new T;r+=o}return(1e3-r)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Ht),Kt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qt=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qt=function(t){function e(){var e=t.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return Kt(e,t),e.prototype.decodeMiddle=function(t,r,n){var o,i,a,s,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=t.getSize(),h=r[1],l=0,d=0;d<6&&h<c;d++){var f=jt.decodeDigit(t,u,h,jt.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+f%10);try{for(var g=(o=void 0,qt(u)),p=g.next();!p.done;p=g.next())h+=p.value}catch(A){o={error:A}}finally{try{p&&!p.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}f>=10&&(l|=1<<5-d)}for(n=e.determineFirstDigit(n,l),h=jt.findGuardPattern(t,h,!0,jt.MIDDLE_PATTERN,new Int32Array(jt.MIDDLE_PATTERN.length).fill(0))[1],d=0;d<6&&h<c;d++){f=jt.decodeDigit(t,u,h,jt.L_PATTERNS),n+=String.fromCharCode("0".charCodeAt(0)+f);try{for(var w=(a=void 0,qt(u)),m=w.next();!m.done;m=w.next())h+=m.value}catch(_){a={error:_}}finally{try{m&&!m.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:n}},e.prototype.getBarcodeFormat=function(){return $.EAN_13},e.determineFirstDigit=function(t,e){for(var r=0;r<10;r++)if(e===this.FIRST_DIGIT_ENCODINGS[r])return String.fromCharCode("0".charCodeAt(0)+r)+t;throw new k},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(jt),Jt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$t=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},te=function(t){function e(){var e=t.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return Jt(e,t),e.prototype.decodeMiddle=function(t,e,r){var n,o,i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=t.getSize(),c=e[1],h=0;h<4&&c<u;h++){var l=jt.decodeDigit(t,s,c,jt.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+l);try{for(var d=(n=void 0,$t(s)),f=d.next();!f.done;f=d.next())c+=f.value}catch(w){n={error:w}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}for(c=jt.findGuardPattern(t,c,!0,jt.MIDDLE_PATTERN,new Int32Array(jt.MIDDLE_PATTERN.length).fill(0))[1],h=0;h<4&&c<u;h++){l=jt.decodeDigit(t,s,c,jt.L_PATTERNS),r+=String.fromCharCode("0".charCodeAt(0)+l);try{for(var g=(i=void 0,$t(s)),p=g.next();!p.done;p=g.next())c+=p.value}catch(m){i={error:m}}finally{try{p&&!p.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return{rowOffset:c,resultString:r}},e.prototype.getBarcodeFormat=function(){return $.EAN_8},e}(jt),ee=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),re=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ean13Reader=new Qt,e}return ee(e,t),e.prototype.getBarcodeFormat=function(){return $.UPC_A},e.prototype.decode=function(t,e){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,e,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,e,r))},e.prototype.decodeMiddle=function(t,e,r){return this.ean13Reader.decodeMiddle(t,e,r)},e.prototype.maybeReturnResult=function(t){var e=t.getText();if("0"===e.charAt(0)){var r=new Q(e.substring(1),null,null,t.getResultPoints(),$.UPC_A);return null!=t.getResultMetadata()&&r.putAllMetadata(t.getResultMetadata()),r}throw new k},e.prototype.reset=function(){this.ean13Reader.reset()},e}(jt),ne=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oe=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ie=function(t){function e(){var e=t.call(this)||this;return e.decodeMiddleCounters=new Int32Array(4),e}return ne(e,t),e.prototype.decodeMiddle=function(t,r,n){var o,i,a=this.decodeMiddleCounters.map(function(t){return t});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=t.getSize(),u=r[1],c=0,h=0;h<6&&u<s;h++){var l=e.decodeDigit(t,a,u,e.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+l%10);try{for(var d=(o=void 0,oe(a)),f=d.next();!f.done;f=d.next())u+=f.value}catch(g){o={error:g}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}l>=10&&(c|=1<<5-h)}return e.determineNumSysAndCheckDigit(new B(n),c),u},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return jt.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,e){for(var r=0;r<=1;r++)for(var n=0;n<10;n++)if(e===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n])return t.insert(0,"0"+r),void t.append("0"+n);throw k.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return $.UPC_E},e.convertUPCEtoUPCA=function(t){var e=t.slice(1,7).split("").map(function(t){return t.charCodeAt(0)}),r=new B;r.append(t.charAt(0));var n=e[5];switch(n){case 0:case 1:case 2:r.appendChars(e,0,2),r.append(n),r.append("0000"),r.appendChars(e,2,3);break;case 3:r.appendChars(e,0,3),r.append("00000"),r.appendChars(e,3,2);break;case 4:r.appendChars(e,0,4),r.append("00000"),r.append(e[4]);break;default:r.appendChars(e,0,5),r.append("0000"),r.append(n)}return t.length>=8&&r.append(t.charAt(7)),r.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(jt),ae=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),se=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ue=function(t){function e(e){var r=t.call(this)||this,n=null==e?null:e.get(S.POSSIBLE_FORMATS),o=[];return null!=n&&(n.indexOf($.EAN_13)>-1?o.push(new Qt):n.indexOf($.UPC_A)>-1&&o.push(new re),n.indexOf($.EAN_8)>-1&&o.push(new te),n.indexOf($.UPC_E)>-1&&o.push(new ie)),0===o.length&&(o.push(new Qt),o.push(new te),o.push(new ie)),r.readers=o,r}return ae(e,t),e.prototype.decodeRow=function(t,e,r){var n,o;try{for(var i=se(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{var u=s.decodeRow(t,e,r),c=u.getBarcodeFormat()===$.EAN_13&&"0"===u.getText().charAt(0),h=null==r?null:r.get(S.POSSIBLE_FORMATS),l=null==h||h.includes($.UPC_A);if(c&&l){var d=u.getRawBytes(),f=new Q(u.getText().substring(1),d,d.length,u.getResultPoints(),$.UPC_A);return f.putAllMetadata(u.getResultMetadata()),f}return u}catch(g){}}}catch(p){n={error:p}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}throw new k},e.prototype.reset=function(){var t,e;try{for(var r=se(this.readers),n=r.next();!n.done;n=r.next())n.value.reset()}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e}(Mt),ce=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),he=function(t){function e(){var e=t.call(this)||this;return e.decodeFinderCounters=new Int32Array(4),e.dataCharacterCounters=new Int32Array(8),e.oddRoundingErrors=new Array(4),e.evenRoundingErrors=new Array(4),e.oddCounts=new Array(e.dataCharacterCounters.length/2),e.evenCounts=new Array(e.dataCharacterCounters.length/2),e}return ce(e,t),e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var n=0;n<r.length;n++)if(Mt.patternMatchVariance(t,r[n],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return n;throw new k},e.count=function(t){return mt.sum(new Int32Array(t))},e.increment=function(t,e){for(var r=0,n=e[0],o=1;o<t.length;o++)e[o]>n&&(n=e[o],r=o);t[r]++},e.decrement=function(t,e){for(var r=0,n=e[0],o=1;o<t.length;o++)e[o]<n&&(n=e[o],r=o);t[r]--},e.isFinderPattern=function(t){var r,n,o=t[0]+t[1],i=o/(o+t[2]+t[3]);if(i>=e.MIN_FINDER_PATTERN_RATIO&&i<=e.MAX_FINDER_PATTERN_RATIO){var a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;try{for(var u=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),c=u.next();!c.done;c=u.next()){var h=c.value;h>s&&(s=h),h<a&&(a=h)}}catch(l){r={error:l}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return s<10*a}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Mt),le=function(){function t(t,e){this.value=t,this.checksumPortion=e}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){return e instanceof t&&this.value===e.value&&this.checksumPortion===e.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),de=function(){function t(t,e,r,n,o){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new _t(r,o)),this.resultPoints.push(new _t(n,o))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){return e instanceof t&&this.value===e.value},t.prototype.hashCode=function(){return this.value},t}(),fe=function(){function t(){}return t.getRSSvalue=function(e,r,n){var o,i,a=0;try{for(var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),u=s.next();!u.done;u=s.next())a+=u.value}catch(m){o={error:m}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}for(var c=0,h=0,l=e.length,d=0;d<l-1;d++){var f=void 0;for(f=1,h|=1<<d;f<e[d];f++,h&=~(1<<d)){var g=t.combins(a-f-1,l-d-2);if(n&&0===h&&a-f-(l-d-1)>=l-d-1&&(g-=t.combins(a-f-(l-d),l-d-2)),l-d-1>1){for(var p=0,w=a-f-(l-d-2);w>r;w--)p+=t.combins(a-f-w-1,l-d-3);g-=p*(l-1-d)}else a-f>r&&g--;c+=g}a-=f}return c},t.combins=function(t,e){var r,n;t-e>e?(n=e,r=t-e):(n=t-e,r=e);for(var o=1,i=1,a=t;a>r;a--)o*=a,i<=n&&(o/=i,i++);for(;i<=n;)o/=i,i++;return o},t}(),ge=function(){function t(){}return t.buildBitArray=function(t){var e=2*t.length-1;null==t[t.length-1].getRightChar()&&(e-=1);for(var r=new y(12*e),n=0,o=t[0].getRightChar().getValue(),i=11;i>=0;--i)0!=(o&1<<i)&&r.set(n),n++;for(i=1;i<t.length;++i){for(var a=t[i],s=a.getLeftChar().getValue(),u=11;u>=0;--u)0!=(s&1<<u)&&r.set(n),n++;if(null!=a.getRightChar()){var c=a.getRightChar().getValue();for(u=11;u>=0;--u)0!=(c&1<<u)&&r.set(n),n++}}return r},t}(),pe=function(){function t(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),we=function(){function t(t){this.newPosition=t}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),me=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ae=function(t){function e(e,r){var n=t.call(this,e)||this;return n.value=r,n}return me(e,t),e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(we),_e=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ce=function(t){function e(e,r,n){var o=t.call(this,e)||this;return n?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return _e(e,t),e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(we),Ee=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ye=function(t){function e(e,r,n){var o=t.call(this,e)||this;if(r<0||r>10||n<0||n>10)throw new T;return o.firstDigit=r,o.secondDigit=n,o}return Ee(e,t),e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(we),Ie=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Se=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,o,i,a,s,u,c;if(!e)return null;if(e.length<2)throw new k;var h=e.substring(0,2);try{for(var l=Ie(t.TWO_DIGIT_DATA_LENGTH),d=l.next();!d.done;d=l.next())if((E=d.value)[0]===h)return E[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,E[2],e):t.processFixedAI(2,E[1],e)}catch(y){r={error:y}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}if(e.length<3)throw new k;var f=e.substring(0,3);try{for(var g=Ie(t.THREE_DIGIT_DATA_LENGTH),p=g.next();!p.done;p=g.next())if((E=p.value)[0]===f)return E[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,E[2],e):t.processFixedAI(3,E[1],e)}catch(I){o={error:I}}finally{try{p&&!p.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}try{for(var w=Ie(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),m=w.next();!m.done;m=w.next())if((E=m.value)[0]===f)return E[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,E[2],e):t.processFixedAI(4,E[1],e)}catch(S){a={error:S}}finally{try{m&&!m.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}if(e.length<4)throw new k;var A=e.substring(0,4);try{for(var _=Ie(t.FOUR_DIGIT_DATA_LENGTH),C=_.next();!C.done;C=_.next()){var E;if((E=C.value)[0]===A)return E[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,E[2],e):t.processFixedAI(4,E[1],e)}}catch(v){u={error:v}}finally{try{C&&!C.done&&(c=_.return)&&c.call(_)}finally{if(u)throw u.error}}throw new k},t.processFixedAI=function(e,r,n){if(n.length<e)throw new k;var o=n.substring(0,e);if(n.length<e+r)throw new k;var i=n.substring(e,e+r),a=n.substring(e+r),s="("+o+")"+i,u=t.parseFieldsInGeneralPurpose(a);return null==u?s:s+u},t.processVariableAI=function(e,r,n){var o,i=n.substring(0,e),a=n.substring(e,o=n.length<e+r?n.length:e+r),s=n.substring(o),u="("+i+")"+a,c=t.parseFieldsInGeneralPurpose(s);return null==c?u:u+c},t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH=[],20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),ve=function(){function t(t){this.buffer=new B,this.information=t}return t.prototype.decodeAllCodes=function(t,e){for(var r=e,n=null;;){var o=this.decodeGeneralPurposeField(r,n),i=Se.parseFieldsInGeneralPurpose(o.getNewString());if(null!=i&&t.append(i),n=o.isRemaining()?""+o.getRemainingValue():null,r===o.getNewPosition())break;r=o.getNewPosition()}return t.toString()},t.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)},t.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var e=this.extractNumericValueFromBitArray(t,4);return new ye(this.information.getSize(),0===e?ye.FNC1:e-1,ye.FNC1)}var r=this.extractNumericValueFromBitArray(t,7);return new ye(t+7,(r-8)/11,(r-8)%11)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(t,e,r){for(var n=0,o=0;o<r;++o)t.get(e+o)&&(n|=1<<r-o-1);return n},t.prototype.decodeGeneralPurposeField=function(t,e){this.buffer.setLengthToZero(),null!=e&&this.buffer.append(e),this.current.setPosition(t);var r=this.parseBlocks();return null!=r&&r.isRemaining()?new Ce(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Ce(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var t,e;do{var r=this.current.getPosition();if(t=this.current.isAlpha()?(e=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(e=this.parseIsoIec646Block()).isFinished():(e=this.parseNumericBlock()).isFinished(),r===this.current.getPosition()&&!t)break}while(!t);return e.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var e=void 0;return e=t.isSecondDigitFNC1()?new Ce(this.current.getPosition(),this.buffer.toString()):new Ce(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new pe(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1())return e=new Ce(this.current.getPosition(),this.buffer.toString()),new pe(!0,e);this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new pe(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new Ce(this.current.getPosition(),this.buffer.toString());return new pe(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new pe(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new Ce(this.current.getPosition(),this.buffer.toString());return new pe(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new pe(!1)},t.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(t,8);return n>=232&&n<253},t.prototype.decodeIsoIec646=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new Ae(t+5,Ae.FNC1);if(e>=5&&e<15)return new Ae(t+5,"0"+(e-5));var r,n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<90)return new Ae(t+7,""+(n+1));if(n>=90&&n<116)return new Ae(t+7,""+(n+7));switch(this.extractNumericValueFromBitArray(t,8)){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new T}return new Ae(t+8,r)},t.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new Ae(t+5,Ae.FNC1);if(e>=5&&e<15)return new Ae(t+5,"0"+(e-5));var r,n=this.extractNumericValueFromBitArray(t,6);if(n>=32&&n<58)return new Ae(t+6,""+(n+33));switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new dt("Decoding invalid alphanumeric value: "+n)}return new Ae(t+6,r)},t.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<5&&e+t<this.information.getSize();++e)if(2===e){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0},t}(),Te=function(){function t(t){this.information=t,this.generalDecoder=new ve(t)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),Re=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oe=function(t){function e(e){return t.call(this,e)||this}return Re(e,t),e.prototype.encodeCompressedGtin=function(t,e){t.append("(01)");var r=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,e,r)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,n){for(var o=0;o<4;++o){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);i/100==0&&t.append("0"),i/10==0&&t.append("0"),t.append(i)}e.appendCheckDigit(t,n)},e.appendCheckDigit=function(t,e){for(var r=0,n=0;n<13;n++){var o=t.charAt(n+e).charCodeAt(0)-"0".charCodeAt(0);r+=0==(1&n)?3*o:o}10==(r=10-r%10)&&(r=0),t.append(r)},e.GTIN_SIZE=40,e}(Te),Ne=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),be=function(t){function e(e){return t.call(this,e)||this}return Ne(e,t),e.prototype.parseInformation=function(){var t=new B;t.append("(01)");var r=t.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(n),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Oe),De=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Me=function(t){function e(e){return t.call(this,e)||this}return De(e,t),e.prototype.parseInformation=function(){var t=new B;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Te),Pe=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Be=function(t){function e(e){return t.call(this,e)||this}return Pe(e,t),e.prototype.encodeCompressedWeight=function(t,e,r){var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e,r);this.addWeightCode(t,n);for(var o=this.checkWeight(n),i=1e5,a=0;a<5;++a)o/i==0&&t.append("0"),i/=10;t.append(o)},e}(Oe),Le=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fe=function(t){function e(e){return t.call(this,e)||this}return Le(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!=e.HEADER_SIZE+Be.GTIN_SIZE+e.WEIGHT_SIZE)throw new k;var t=new B;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Be.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Be),ke=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xe=function(t){function e(e){return t.call(this,e)||this}return ke(e,t),e.prototype.addWeightCode=function(t,e){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(Fe),Ve=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ue=function(t){function e(e){return t.call(this,e)||this}return Ve(e,t),e.prototype.addWeightCode=function(t,e){t.append(e<1e4?"(3202)":"(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(Fe),He=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ge=function(t){function e(e){return t.call(this,e)||this}return He(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Oe.GTIN_SIZE)throw new k;var t=new B;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Oe.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var n=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Oe.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(n.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Oe),Xe=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),We=function(t){function e(e){return t.call(this,e)||this}return Xe(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Oe.GTIN_SIZE)throw new k;var t=new B;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Oe.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Oe.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);n/100==0&&t.append("0"),n/10==0&&t.append("0"),t.append(n);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Oe.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Oe),ze=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ye=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.dateCode=n,o.firstAIdigits=r,o}return ze(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!=e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new k;var t=new B;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var n=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(38400!=n){t.append("("),t.append(this.dateCode),t.append(")");var o=n%32,i=(n/=32)%12+1,a=n/=12;a/10==0&&t.append("0"),t.append(a),i/10==0&&t.append("0"),t.append(i),o/10==0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,e){t.append("("),t.append(this.firstAIdigits),t.append(e/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Be),Ze=function(){function t(t,e,r,n){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=n}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return null==this.rightchar},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t&&t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern)},t.equalsOrNull=function(e,r){return null===e?null===r:t.equals(e,r)},t.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},t}(),je=function(){function t(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t&&this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed},t.prototype.checkEqualitity=function(t,e){var r;if(t&&e)return t.forEach(function(t,n){e.forEach(function(e){t.getLeftChar().getValue()===e.getLeftChar().getValue()&&t.getRightChar().getValue()===e.getRightChar().getValue()&&t.getFinderPatter().getValue()===e.getFinderPatter().getValue()&&(r=!0)})}),r},t}(),Ke=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qe=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qe=function(t){function e(){var r=null!==t&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return Ke(e,t),e.prototype.decodeRow=function(t,r,n){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch(o){console.log(o)}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,e){for(var r,n=!1;!n;)try{this.pairs.push(this.retrieveNextPair(e,this.pairs,t))}catch(i){if(i instanceof k){if(!this.pairs.length)throw new k;n=!0}}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(t,!1),r){var o=this.checkRowsBoolean(!1);if(null!=o)return o;if(null!=(o=this.checkRowsBoolean(!0)))return o}throw new k},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var e=null;try{e=this.checkRows(new Array,0)}catch(r){console.log(r)}return t&&(this.rows=this.rows.reverse()),e},e.prototype.checkRows=function(t,r){for(var n,o,i=r;i<this.rows.length;i++){var a=this.rows[i];this.pairs.length=0;try{for(var s=(n=void 0,qe(t)),u=s.next();!u.done;u=s.next())this.pairs.push(u.value.getPairs())}catch(h){n={error:h}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}if(this.pairs.push(a.getPairs()),e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var c=new Array(t);c.push(a);try{return this.checkRows(c,i+1)}catch(l){console.log(l)}}}throw new k},e.isValidSequence=function(t){var r,n;try{for(var o=qe(e.FINDER_PATTERN_SEQUENCES),i=o.next();!i.done;i=o.next()){var a=i.value;if(!(t.length>a.length)){for(var s=!0,u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!=a[u]){s=!1;break}if(s)return!0}}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var n=0,o=!1,i=!1;n<this.rows.length;){var a=this.rows[n];if(a.getRowNumber()>t){i=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),n++}i||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new je(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,e){var r,n,o,i,a,s;try{for(var u=qe(e),c=u.next();!c.done;c=u.next()){var h=c.value;if(h.getPairs().length!==t.length)try{for(var l=(o=void 0,qe(h.getPairs())),d=l.next();!d.done;d=l.next()){var f=d.value;try{for(var g=(a=void 0,qe(t)),p=g.next();!p.done&&!Ze.equals(f,p.value);p=g.next());}catch(w){a={error:w}}finally{try{p&&!p.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}}}catch(m){o={error:m}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}}}catch(A){r={error:A}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}},e.isPartialRow=function(t,e){var r,n,o,i,a,s;try{for(var u=qe(e),c=u.next();!c.done;c=u.next()){var h=c.value,l=!0;try{for(var d=(o=void 0,qe(t)),f=d.next();!f.done;f=d.next()){var g=f.value,p=!1;try{for(var w=(a=void 0,qe(h.getPairs())),m=w.next();!m.done;m=w.next())if(g.equals(m.value)){p=!0;break}}catch(A){a={error:A}}finally{try{m&&!m.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}if(!p){l=!1;break}}}catch(_){o={error:_}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}if(l)return!0}}catch(C){r={error:C}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var e=function(t){try{if(t.get(1))return new be(t);if(!t.get(2))return new Me(t);switch(ve.extractNumericValueFromBitArray(t,1,4)){case 4:return new xe(t);case 5:return new Ue(t)}switch(ve.extractNumericValueFromBitArray(t,1,5)){case 12:return new Ge(t);case 13:return new We(t)}switch(ve.extractNumericValueFromBitArray(t,1,7)){case 56:return new Ye(t,"310","11");case 57:return new Ye(t,"320","11");case 58:return new Ye(t,"310","13");case 59:return new Ye(t,"320","13");case 60:return new Ye(t,"310","15");case 61:return new Ye(t,"320","15");case 62:return new Ye(t,"310","17");case 63:return new Ye(t,"320","17")}}catch(e){throw console.log(e),new dt("unknown decoder: "+t)}}(ge.buildBitArray(t)).parseInformation(),r=t[0].getFinderPattern().getResultPoints(),n=t[t.length-1].getFinderPattern().getResultPoints();return new Q(e,null,null,[r[0],r[1],n[0],n[1]],$.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),e=t.getLeftChar(),r=t.getRightChar();if(null==r)return!1;for(var n=r.getChecksumPortion(),o=2,i=1;i<this.pairs.size();++i){var a=this.pairs.get(i);n+=a.getLeftChar().getChecksumPortion(),o++;var s=a.getRightChar();null!=s&&(n+=s.getChecksumPortion(),o++)}return 211*(o-4)+(n%=211)==e.getValue()},e.getNextSecondBar=function(t,e){var r;return t.get(e)?(r=t.getNextUnset(e),r=t.getNextSet(r)):(r=t.getNextSet(e),r=t.getNextUnset(r)),r},e.prototype.retrieveNextPair=function(t,r,n){var o,i=r.length%2==0;this.startFromEven&&(i=!i);var a=!0,s=-1;do{this.findNextPair(t,r,s),null==(o=this.parseFoundFinderPattern(t,n,i))?s=e.getNextSecondBar(t,this.startEnd[0]):a=!1}while(a);var u,c=this.decodeDataCharacter(t,o,i,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new k;try{u=this.decodeDataCharacter(t,o,i,!1)}catch(h){u=null,console.log(h)}return new Ze(c,u,o,!0)},e.prototype.isEmptyPair=function(t){return 0===t.length},e.prototype.findNextPair=function(t,r,n){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var i,a=t.getSize();i=n>=0?n:this.isEmptyPair(r)?0:r[r.length-1].getFinderPattern().getStartEnd()[1];var s=r.length%2!=0;this.startFromEven&&(s=!s);for(var u=!1;i<a&&(u=!t.get(i));)i++;for(var c=0,h=i,l=i;l<a;l++)if(t.get(l)!=u)o[c]++;else{if(3==c){if(s&&e.reverseCounters(o),e.isFinderPattern(o))return this.startEnd[0]=h,void(this.startEnd[1]=l);s&&e.reverseCounters(o),h+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,c--}else c++;o[c]=1,u=!u}throw new k},e.reverseCounters=function(t){for(var e=t.length,r=0;r<e/2;++r){var n=t[r];t[r]=t[e-r-1],t[e-r-1]=n}},e.prototype.parseFoundFinderPattern=function(t,r,n){var o,i,a;if(n){for(var s=this.startEnd[0]-1;s>=0&&!t.get(s);)s--;s++,o=this.startEnd[0]-s,i=s,a=this.startEnd[1]}else i=this.startEnd[0],o=(a=t.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var u,c=this.getDecodeFinderCounters();p.arraycopy(c,0,c,1,c.length-1),c[0]=o;try{u=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch(h){return null}return new de(u,[i,a],i,a,r)},e.prototype.decodeDataCharacter=function(t,r,n,o){for(var i=this.getDataCharacterCounters(),a=0;a<i.length;a++)i[a]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],i);else{e.recordPattern(t,r.getStartEnd()[1],i);for(var s=0,u=i.length-1;s<u;s++,u--){var c=i[s];i[s]=i[u],i[u]=c}}var h=mt.sum(new Int32Array(i))/17,l=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(h-l)/l>.3)throw new k;var d=this.getOddCounts(),f=this.getEvenCounts(),g=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors();for(s=0;s<i.length;s++){var w=1*i[s]/h,m=w+.5;if(m<1){if(w<.3)throw new k;m=1}else if(m>8){if(w>8.7)throw new k;m=8}var A=s/2;0==(1&s)?(d[A]=m,g[A]=w-m):(f[A]=m,p[A]=w-m)}this.adjustOddEvenCounts(17);var _=4*r.getValue()+(n?0:2)+(o?0:1)-1,C=0,E=0;for(s=d.length-1;s>=0;s--)e.isNotA1left(r,n,o)&&(E+=d[s]*e.WEIGHTS[_][2*s]),C+=d[s];var y=0;for(s=f.length-1;s>=0;s--)e.isNotA1left(r,n,o)&&(y+=f[s]*e.WEIGHTS[_][2*s+1]);var I=E+y;if(0!=(1&C)||C>13||C<4)throw new k;var S=(13-C)/2,v=e.SYMBOL_WIDEST[S],T=9-v,R=fe.getRSSvalue(d,v,!0),O=fe.getRSSvalue(f,T,!1);return new le(R*e.EVEN_TOTAL_SUBSET[S]+O+e.GSUM[S],I)},e.isNotA1left=function(t,e,r){return!(0==t.getValue()&&e&&r)},e.prototype.adjustOddEvenCounts=function(t){var r=mt.sum(new Int32Array(this.getOddCounts())),n=mt.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1;r>13?i=!0:r<4&&(o=!0);var a=!1,s=!1;n>13?s=!0:n<4&&(a=!0);var u=r+n-t,c=1==(1&r),h=0==(1&n);if(1==u)if(c){if(h)throw new k;i=!0}else{if(!h)throw new k;s=!0}else if(-1==u)if(c){if(h)throw new k;o=!0}else{if(!h)throw new k;a=!0}else{if(0!=u)throw new k;if(c){if(!h)throw new k;r<n?(o=!0,s=!0):(i=!0,a=!0)}else if(h)throw new k}if(o){if(i)throw new k;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new k;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A=0,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B=1,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C=2,e.FINDER_PAT_B,e.FINDER_PAT_D=3],[e.FINDER_PAT_A,e.FINDER_PAT_E=4,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F=5],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(he),Je=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$e=function(t){function e(e,r,n){var o=t.call(this,e,r)||this;return o.count=0,o.finderPattern=n,o}return Je(e,t),e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(le),tr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),er=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.possibleLeftPairs=[],e.possibleRightPairs=[],e}return tr(e,t),e.prototype.decodeRow=function(t,r,n){var o,i,a,s,u=this.decodePair(r,!1,t,n);e.addOrTally(this.possibleLeftPairs,u),r.reverse();var c=this.decodePair(r,!0,t,n);e.addOrTally(this.possibleRightPairs,c),r.reverse();try{for(var h=er(this.possibleLeftPairs),l=h.next();!l.done;l=h.next()){var d=l.value;if(d.getCount()>1)try{for(var f=(a=void 0,er(this.possibleRightPairs)),g=f.next();!g.done;g=f.next()){var p=g.value;if(p.getCount()>1&&e.checkChecksum(d,p))return e.constructResult(d,p)}}catch(w){a={error:w}}finally{try{g&&!g.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}}}catch(m){o={error:m}}finally{try{l&&!l.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}throw new k},e.addOrTally=function(t,e){var r,n;if(null!=e){var o=!1;try{for(var i=er(t),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.getValue()===e.getValue()){s.incrementCount(),o=!0;break}}}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}o||t.push(e)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,e){for(var r=4537077*t.getValue()+e.getValue(),n=new String(r).toString(),o=new B,i=13-n.length;i>0;i--)o.append("0");o.append(n);var a=0;for(i=0;i<13;i++){var s=o.charAt(i).charCodeAt(0)-"0".charCodeAt(0);a+=0==(1&i)?3*s:s}10==(a=10-a%10)&&(a=0),o.append(a.toString());var u=t.getFinderPattern().getResultPoints(),c=e.getFinderPattern().getResultPoints();return new Q(o.toString(),null,0,[u[0],u[1],c[0],c[1]],$.RSS_14,(new Date).getTime())},e.checkChecksum=function(t,e){var r=(t.getChecksumPortion()+16*e.getChecksumPortion())%79,n=9*t.getFinderPattern().getValue()+e.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n},e.prototype.decodePair=function(t,e,r,n){try{var o=this.findFinderPattern(t,e),i=this.parseFoundFinderPattern(t,r,e,o),a=null==n?null:n.get(S.NEED_RESULT_POINT_CALLBACK);if(null!=a){var s=(o[0]+o[1])/2;e&&(s=t.getSize()-1-s),a.foundPossibleResultPoint(new _t(s,r))}var u=this.decodeDataCharacter(t,i,!0),c=this.decodeDataCharacter(t,i,!1);return new $e(1597*u.getValue()+c.getValue(),u.getChecksumPortion()+4*c.getChecksumPortion(),i)}catch(h){return null}},e.prototype.decodeDataCharacter=function(t,r,n){for(var o=this.getDataCharacterCounters(),i=0;i<o.length;i++)o[i]=0;if(n)Mt.recordPatternInReverse(t,r.getStartEnd()[0],o);else{Mt.recordPattern(t,r.getStartEnd()[1]+1,o);for(var a=0,s=o.length-1;a<s;a++,s--){var u=o[a];o[a]=o[s],o[s]=u}}var c=n?16:15,h=mt.sum(new Int32Array(o))/c,l=this.getOddCounts(),d=this.getEvenCounts(),f=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors();for(a=0;a<o.length;a++){var p=o[a]/h,w=Math.floor(p+.5);w<1?w=1:w>8&&(w=8);var m=Math.floor(a/2);0==(1&a)?(l[m]=w,f[m]=p-w):(d[m]=w,g[m]=p-w)}this.adjustOddEvenCounts(n,c);var A=0,_=0;for(a=l.length-1;a>=0;a--)_*=9,_+=l[a],A+=l[a];var C=0,E=0;for(a=d.length-1;a>=0;a--)C*=9,C+=d[a],E+=d[a];var y,I,S=_+3*C;if(n){if(0!=(1&A)||A>12||A<4)throw new k;var v=9-(I=e.OUTSIDE_ODD_WIDEST[y=(12-A)/2]),T=fe.getRSSvalue(l,I,!1),R=fe.getRSSvalue(d,v,!0);return new le(T*e.OUTSIDE_EVEN_TOTAL_SUBSET[y]+R+e.OUTSIDE_GSUM[y],S)}if(0!=(1&E)||E>10||E<4)throw new k;return v=9-(I=e.INSIDE_ODD_WIDEST[y=(10-E)/2]),T=fe.getRSSvalue(l,I,!0),R=fe.getRSSvalue(d,v,!1),new le(R*e.INSIDE_ODD_TOTAL_SUBSET[y]+T+e.INSIDE_GSUM[y],S)},e.prototype.findFinderPattern=function(t,e){var r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;for(var n=t.getSize(),o=!1,i=0;i<n&&e!==(o=!t.get(i));)i++;for(var a=0,s=i,u=i;u<n;u++)if(t.get(u)!==o)r[a]++;else{if(3===a){if(he.isFinderPattern(r))return[s,u];s+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,a--}else a++;r[a]=1,o=!o}throw new k},e.prototype.parseFoundFinderPattern=function(t,r,n,o){for(var i=t.get(o[0]),a=o[0]-1;a>=0&&i!==t.get(a);)a--;a++;var s=o[0]-a,u=this.getDecodeFinderCounters(),c=new Int32Array(u.length);p.arraycopy(u,0,c,1,u.length-1),c[0]=s;var h=this.parseFinderValue(c,e.FINDER_PATTERNS),l=a,d=o[1];return n&&(l=t.getSize()-1-l,d=t.getSize()-1-d),new de(h,[a,o[1]],l,d,r)},e.prototype.adjustOddEvenCounts=function(t,e){var r=mt.sum(new Int32Array(this.getOddCounts())),n=mt.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1,a=!1,s=!1;t?(r>12?i=!0:r<4&&(o=!0),n>12?s=!0:n<4&&(a=!0)):(r>11?i=!0:r<5&&(o=!0),n>10?s=!0:n<4&&(a=!0));var u=r+n-e,c=(1&r)==(t?1:0),h=1==(1&n);if(1===u)if(c){if(h)throw new k;i=!0}else{if(!h)throw new k;s=!0}else if(-1===u)if(c){if(h)throw new k;o=!0}else{if(!h)throw new k;a=!0}else{if(0!==u)throw new k;if(c){if(!h)throw new k;r<n?(o=!0,s=!0):(i=!0,a=!0)}else if(h)throw new k}if(o){if(i)throw new k;he.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&he.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new k;he.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&he.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(he),nr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),or=function(t){function e(e){var r=t.call(this)||this;r.readers=[];var n=e?e.get(S.POSSIBLE_FORMATS):null,o=e&&void 0!==e.get(S.ASSUME_CODE_39_CHECK_DIGIT);return n&&((n.includes($.EAN_13)||n.includes($.UPC_A)||n.includes($.EAN_8)||n.includes($.UPC_E))&&r.readers.push(new ue(e)),n.includes($.CODE_39)&&r.readers.push(new kt(o)),n.includes($.CODE_128)&&r.readers.push(new Bt),n.includes($.ITF)&&r.readers.push(new Vt),n.includes($.RSS_14)&&r.readers.push(new rr),n.includes($.RSS_EXPANDED)&&r.readers.push(new Qe)),0===r.readers.length&&(r.readers.push(new ue(e)),r.readers.push(new kt),r.readers.push(new ue(e)),r.readers.push(new Bt),r.readers.push(new Vt),r.readers.push(new rr),r.readers.push(new Qe)),r}return nr(e,t),e.prototype.decodeRow=function(t,e,r){for(var n=0;n<this.readers.length;n++)try{return this.readers[n].decodeRow(t,e,r)}catch(o){}throw new k},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Mt),ir=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ar=(function(t){ir(function(e,r){return void 0===e&&(e=500),t.call(this,new or(r),e,r)||this},t)}(q),function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}),sr=function(){function t(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),ur=function(){function t(t,e){this.count=t,this.dataCodewords=e}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),cr=function(){function t(t,e,r,n,o,i){var a,s;this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=o,this.ecBlocks=i;var u=0,c=i.getECCodewords(),h=i.getECBlocks();try{for(var l=ar(h),d=l.next();!d.done;d=l.next()){var f=d.value;u+=f.getCount()*(f.getDataCodewords()+c)}}catch(g){a={error:g}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,o;if(0!=(1&e)||0!=(1&r))throw new T;try{for(var i=ar(t.VERSIONS),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(u){n={error:u}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}throw new T},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new sr(5,new ur(1,3))),new t(2,12,12,10,10,new sr(7,new ur(1,5))),new t(3,14,14,12,12,new sr(10,new ur(1,8))),new t(4,16,16,14,14,new sr(12,new ur(1,12))),new t(5,18,18,16,16,new sr(14,new ur(1,18))),new t(6,20,20,18,18,new sr(18,new ur(1,22))),new t(7,22,22,20,20,new sr(20,new ur(1,30))),new t(8,24,24,22,22,new sr(24,new ur(1,36))),new t(9,26,26,24,24,new sr(28,new ur(1,44))),new t(10,32,32,14,14,new sr(36,new ur(1,62))),new t(11,36,36,16,16,new sr(42,new ur(1,86))),new t(12,40,40,18,18,new sr(48,new ur(1,114))),new t(13,44,44,20,20,new sr(56,new ur(1,144))),new t(14,48,48,22,22,new sr(68,new ur(1,174))),new t(15,52,52,24,24,new sr(42,new ur(2,102))),new t(16,64,64,14,14,new sr(56,new ur(2,140))),new t(17,72,72,16,16,new sr(36,new ur(4,92))),new t(18,80,80,18,18,new sr(48,new ur(4,114))),new t(19,88,88,20,20,new sr(56,new ur(4,144))),new t(20,96,96,22,22,new sr(68,new ur(4,174))),new t(21,104,104,24,24,new sr(56,new ur(6,136))),new t(22,120,120,18,18,new sr(68,new ur(6,175))),new t(23,132,132,20,20,new sr(62,new ur(8,163))),new t(24,144,144,22,22,new sr(62,new ur(8,156),new ur(2,155))),new t(25,8,18,6,16,new sr(7,new ur(1,5))),new t(26,8,32,6,14,new sr(11,new ur(1,10))),new t(27,12,26,10,24,new sr(14,new ur(1,16))),new t(28,12,36,10,16,new sr(18,new ur(1,22))),new t(29,16,36,14,16,new sr(24,new ur(1,32))),new t(30,16,48,14,22,new sr(28,new ur(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),hr=function(){function t(e){var r=e.getHeight();if(r<8||r>144||0!=(1&r))throw new T;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new L(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(t){var e=t.getHeight(),r=t.getWidth();return cr.getVersionForDimensions(e,r)},t.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,n=0,o=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),a=!1,s=!1,u=!1,c=!1;do{if(r!==o||0!==n||a)if(r!==o-2||0!==n||0==(3&i)||s)if(r!==o+4||2!==n||0!=(7&i)||u)if(r!==o-2||0!==n||4!=(7&i)||c){do{r<o&&n>=0&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,o,i)),r-=2,n+=2}while(r>=0&&n<i);r+=1,n+=3;do{r>=0&&n<i&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,o,i)),r+=2,n-=2}while(r<o&&n>=0);r+=3,n+=1}else t[e++]=255&this.readCorner4(o,i),r-=2,n+=2,c=!0;else t[e++]=255&this.readCorner3(o,i),r-=2,n+=2,u=!0;else t[e++]=255&this.readCorner2(o,i),r-=2,n+=2,s=!0;else t[e++]=255&this.readCorner1(o,i),r-=2,n+=2,a=!0}while(r<o||n<i);if(e!==this.version.getTotalCodewords())throw new T;return t},t.prototype.readModule=function(t,e,r,n){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=n,t+=4-(n+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)},t.prototype.readUtah=function(t,e,r,n){var o=0;return this.readModule(t-2,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t-2,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e,r,n)&&(o|=1),o<<=1,this.readModule(t,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t,e,r,n)&&(o|=1),o},t.prototype.readCorner1=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},t.prototype.readCorner2=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},t.prototype.readCorner3=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},t.prototype.readCorner4=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},t.prototype.extractDataRegion=function(t){var e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new h("Dimension of bitMatrix must match the version size");for(var n=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),i=e/n|0,a=r/o|0,s=new L(a*o,i*n),u=0;u<i;++u)for(var c=u*n,l=0;l<a;++l)for(var d=l*o,f=0;f<n;++f)for(var g=u*(n+2)+1+f,p=c+f,w=0;w<o;++w)t.get(l*(o+2)+1+w,g)&&s.set(d+w,p);return s},t}(),lr=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dr=function(){function t(t,e){this.numDataCodewords=t,this.codewords=e}return t.getDataBlocks=function(e,r){var n,o,i,a,s=r.getECBlocks(),u=0,c=s.getECBlocks();try{for(var l=lr(c),d=l.next();!d.done;d=l.next())u+=(m=d.value).getCount()}catch(N){n={error:N}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}var f=new Array(u),g=0;try{for(var p=lr(c),w=p.next();!w.done;w=p.next())for(var m=w.value,A=0;A<m.getCount();A++){var _=m.getDataCodewords(),C=s.getECCodewords()+_;f[g++]=new t(_,new Uint8Array(C))}}catch(b){i={error:b}}finally{try{w&&!w.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var E=f[0].codewords.length-s.getECCodewords(),y=E-1,I=0;for(A=0;A<y;A++)for(var S=0;S<g;S++)f[S].codewords[A]=e[I++];var v=24===r.getVersionNumber(),T=v?8:g;for(S=0;S<T;S++)f[S].codewords[E-1]=e[I++];var R=f[0].codewords.length;for(A=E;A<R;A++)for(S=0;S<g;S++){var O=v?(S+8)%g:S;f[O].codewords[v&&O>7?A-1:A]=e[I++]}if(I!==e.length)throw new h;return f},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),fr=function(){function t(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new h(""+t);var e=0,r=this.bitOffset,n=this.byteOffset,o=this.bytes;if(r>0){var i=8-r,a=t<i?t:i;e=(o[n]&255>>8-a<<(s=i-a))>>s,t-=a,8===(r+=a)&&(r=0,n++)}if(t>0){for(;t>=8;)e=e<<8|255&o[n],n++,t-=8;var s;t>0&&(e=e<<t|(o[n]&255>>(s=8-t)<<s)>>s,r+=t)}return this.bitOffset=r,this.byteOffset=n,e},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}();!function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"}(gt||(gt={}));var gr,pr=function(){function t(){}return t.decode=function(t){var e=new fr(t),r=new B,n=new B,o=new Array,i=gt.ASCII_ENCODE;do{if(i===gt.ASCII_ENCODE)i=this.decodeAsciiSegment(e,r,n);else{switch(i){case gt.C40_ENCODE:this.decodeC40Segment(e,r);break;case gt.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case gt.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case gt.BASE256_ENCODE:this.decodeBase256Segment(e,r,o);break;default:throw new T}i=gt.ASCII_ENCODE}}while(i!==gt.PAD_ENCODE&&e.available()>0);return n.length()>0&&r.append(n.toString()),new rt(t,r.toString(),0===o.length?null:o,null)},t.decodeAsciiSegment=function(t,e,r){var n=!1;do{var o=t.readBits(8);if(0===o)throw new T;if(o<=128)return n&&(o+=128),e.append(String.fromCharCode(o-1)),gt.ASCII_ENCODE;if(129===o)return gt.PAD_ENCODE;if(o<=229){var i=o-130;i<10&&e.append("0"),e.append(""+i)}else switch(o){case 230:return gt.C40_ENCODE;case 231:return gt.BASE256_ENCODE;case 232:e.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:n=!0;break;case 236:e.append("[)>\x1e05\x1d"),r.insert(0,"\x1e\x04");break;case 237:e.append("[)>\x1e06\x1d"),r.insert(0,"\x1e\x04");break;case 238:return gt.ANSIX12_ENCODE;case 239:return gt.TEXT_ENCODE;case 240:return gt.EDIFACT_ENCODE;case 241:break;default:if(254!==o||0!==t.available())throw new T}}while(t.available()>0);return gt.ASCII_ENCODE},t.decodeC40Segment=function(t,e){var r=!1,n=[],o=0;do{if(8===t.available())return;var i=t.readBits(8);if(254===i)return;this.parseTwoBytes(i,t.readBits(8),n);for(var a=0;a<3;a++){var s=n[a];switch(o){case 0:if(s<3)o=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new T;var u=this.C40_BASIC_SET_CHARS[s];r?(e.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):e.append(u)}break;case 1:r?(e.append(String.fromCharCode(s+128)),r=!1):e.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length)u=this.C40_SHIFT2_SET_CHARS[s],r?(e.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):e.append(u);else switch(s){case 27:e.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new T}o=0;break;case 3:r?(e.append(String.fromCharCode(s+224)),r=!1):e.append(String.fromCharCode(s+96)),o=0;break;default:throw new T}}}while(t.available()>0)},t.decodeTextSegment=function(t,e){var r=!1,n=[],o=0;do{if(8===t.available())return;var i=t.readBits(8);if(254===i)return;this.parseTwoBytes(i,t.readBits(8),n);for(var a=0;a<3;a++){var s=n[a];switch(o){case 0:if(s<3)o=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new T;var u=this.TEXT_BASIC_SET_CHARS[s];r?(e.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):e.append(u)}break;case 1:r?(e.append(String.fromCharCode(s+128)),r=!1):e.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length)u=this.TEXT_SHIFT2_SET_CHARS[s],r?(e.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):e.append(u);else switch(s){case 27:e.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new T}o=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new T;u=this.TEXT_SHIFT3_SET_CHARS[s],r?(e.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):e.append(u),o=0;break;default:throw new T}}}while(t.available()>0)},t.decodeAnsiX12Segment=function(t,e){var r=[];do{if(8===t.available())return;var n=t.readBits(8);if(254===n)return;this.parseTwoBytes(n,t.readBits(8),r);for(var o=0;o<3;o++){var i=r[o];switch(i){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(i<14)e.append(String.fromCharCode(i+44));else{if(!(i<40))throw new T;e.append(String.fromCharCode(i+51))}}}}while(t.available()>0)},t.parseTwoBytes=function(t,e,r){var n=(t<<8)+e-1,o=Math.floor(n/1600);r[0]=o,n-=1600*o,o=Math.floor(n/40),r[1]=o,r[2]=n-40*o},t.decodeEdifactSegment=function(t,e){do{if(t.available()<=16)return;for(var r=0;r<4;r++){var n=t.readBits(6);if(31===n){var o=8-t.getBitOffset();return void(8!==o&&t.readBits(o))}0==(32&n)&&(n|=64),e.append(String.fromCharCode(n))}}while(t.available()>0)},t.decodeBase256Segment=function(t,e,r){var n,o=1+t.getByteOffset(),i=this.unrandomize255State(t.readBits(8),o++);if((n=0===i?t.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(t.readBits(8),o++))<0)throw new T;for(var a=new Uint8Array(n),s=0;s<n;s++){if(t.available()<8)throw new T;a[s]=this.unrandomize255State(t.readBits(8),o++)}r.push(a);try{e.append(M.decode(a,P.ISO88591))}catch(u){throw new dt("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(t,e){var r=t-(149*e%255+1);return r>=0?r:r+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],t}(),wr=function(){function t(){this.rsDecoder=new ft(ut.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(t){var e,r,n=new hr(t),o=n.getVersion(),i=n.readCodewords(),a=dr.getDataBlocks(i,o),s=0;try{for(var u=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),c=u.next();!c.done;c=u.next())s+=c.value.getNumDataCodewords()}catch(m){e={error:m}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}for(var h=new Uint8Array(s),l=a.length,d=0;d<l;d++){var f=a[d],g=f.getCodewords(),p=f.getNumDataCodewords();this.correctErrors(g,p);for(var w=0;w<p;w++)h[w*l+d]=g[w]}return pr.decode(h)},t.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(o){throw new f}for(var n=0;n<e;n++)t[n]=r[n]},t}(),mr=function(){function t(t){this.image=t,this.rectangleDetector=new It(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if((r=this.detectSolid2(r))[3]=this.correctTopRight(r),!r[3])throw new k;var n=(r=this.shiftToModuleCenter(r))[0],o=r[1],i=r[2],a=r[3],s=this.transitionsBetween(n,a)+1,u=this.transitionsBetween(i,a)+1;1==(1&s)&&(s+=1),1==(1&u)&&(u+=1),4*s<7*u&&4*u<7*s&&(s=u=Math.max(s,u));var c=t.sampleGrid(this.image,n,o,i,a,s,u);return new Ct(c,[n,o,i,a])},t.shiftPoint=function(t,e,r){var n=(e.getX()-t.getX())/(r+1),o=(e.getY()-t.getY())/(r+1);return new _t(t.getX()+n,t.getY()+o)},t.moveAway=function(t,e,r){var n=t.getX(),o=t.getY();return n<e?n-=1:n+=1,o<r?o-=1:o+=1,new _t(n,o)},t.prototype.detectSolid1=function(t){var e=t[0],r=t[1],n=t[3],o=t[2],i=this.transitionsBetween(e,r),a=this.transitionsBetween(r,n),s=this.transitionsBetween(n,o),u=this.transitionsBetween(o,e),c=i,h=[o,e,r,n];return c>a&&(c=a,h[0]=e,h[1]=r,h[2]=n,h[3]=o),c>s&&(c=s,h[0]=r,h[1]=n,h[2]=o,h[3]=e),c>u&&(h[0]=n,h[1]=o,h[2]=e,h[3]=r),h},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],o=e[2],i=e[3],a=this.transitionsBetween(r,i),s=t.shiftPoint(n,o,4*(a+1)),u=t.shiftPoint(o,n,4*(a+1));return this.transitionsBetween(s,r)<this.transitionsBetween(u,i)?(e[0]=r,e[1]=n,e[2]=o,e[3]=i):(e[0]=n,e[1]=o,e[2]=i,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],o=e[2],i=e[3],a=this.transitionsBetween(r,i),s=this.transitionsBetween(n,i),u=t.shiftPoint(r,n,4*(s+1)),c=t.shiftPoint(o,n,4*(a+1));a=this.transitionsBetween(u,i),s=this.transitionsBetween(c,i);var h=new _t(i.getX()+(o.getX()-n.getX())/(a+1),i.getY()+(o.getY()-n.getY())/(a+1)),l=new _t(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1));return this.isValid(h)?this.isValid(l)?this.transitionsBetween(u,h)+this.transitionsBetween(c,h)>this.transitionsBetween(u,l)+this.transitionsBetween(c,l)?h:l:h:this.isValid(l)?l:null},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],o=e[2],i=e[3],a=this.transitionsBetween(r,i)+1,s=this.transitionsBetween(o,i)+1,u=t.shiftPoint(r,n,4*s),c=t.shiftPoint(o,n,4*a);1==(1&(a=this.transitionsBetween(u,i)+1))&&(a+=1),1==(1&(s=this.transitionsBetween(c,i)+1))&&(s+=1);var h,l,d=(r.getX()+n.getX()+o.getX()+i.getX())/4,f=(r.getY()+n.getY()+o.getY()+i.getY())/4;return r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),o=t.moveAway(o,d,f),i=t.moveAway(i,d,f),u=t.shiftPoint(r,n,4*s),u=t.shiftPoint(u,i,4*a),h=t.shiftPoint(n,r,4*s),h=t.shiftPoint(h,o,4*a),c=t.shiftPoint(o,i,4*s),c=t.shiftPoint(c,n,4*a),l=t.shiftPoint(i,o,4*s),[u,h,c,l=t.shiftPoint(l,r,4*a)]},t.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},t.sampleGrid=function(t,e,r,n,o,i,a){return Ot.getInstance().sampleGrid(t,i,a,.5,.5,i-.5,.5,i-.5,a-.5,.5,a-.5,e.getX(),e.getY(),o.getX(),o.getY(),n.getX(),n.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(t,e){var r=Math.trunc(t.getX()),n=Math.trunc(t.getY()),o=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.abs(i-n)>Math.abs(o-r);if(a){var s=r;r=n,n=s,s=o,o=i,i=s}for(var u=Math.abs(o-r),c=Math.abs(i-n),h=-u/2,l=n<i?1:-1,d=r<o?1:-1,f=0,g=this.image.get(a?n:r,a?r:n),p=r,w=n;p!==o;p+=d){var m=this.image.get(a?w:p,a?p:w);if(m!==g&&(f++,g=m),(h+=c)>0){if(w===i)break;w+=l,h-=u}}return f},t}(),Ar=function(){function t(){this.decoder=new wr}return t.prototype.decode=function(e,r){var n,o;if(void 0===r&&(r=null),null!=r&&r.has(S.PURE_BARCODE)){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(i),o=t.NO_POINTS}else{var a=new mr(e.getBlackMatrix()).detect();n=this.decoder.decode(a.getBits()),o=a.getPoints()}var s=n.getRawBytes(),u=new Q(n.getText(),s,8*s.length,o,$.DATA_MATRIX,p.currentTimeMillis()),c=n.getByteSegments();null!=c&&u.putMetadata(et.BYTE_SEGMENTS,c);var h=n.getECLevel();return null!=h&&u.putMetadata(et.ERROR_CORRECTION_LEVEL,h),u},t.prototype.reset=function(){},t.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null==e||null==r)throw new k;var n=this.moduleSize(e,t),o=e[1],i=e[0],a=(r[0]-i+1)/n,s=(r[1]-o+1)/n;if(a<=0||s<=0)throw new k;var u=n/2;o+=u,i+=u;for(var c=new L(a,s),h=0;h<s;h++)for(var l=o+h*n,d=0;d<a;d++)t.get(i+d*n,l)&&c.set(d,h);return c},t.moduleSize=function(t,e){for(var r=e.getWidth(),n=t[0],o=t[1];n<r&&e.get(n,o);)n++;if(n===r)throw new k;var i=n-t[0];if(0===i)throw new k;return i},t.NO_POINTS=[],t}(),_r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){_r(function(e){return void 0===e&&(e=500),t.call(this,new Ar,e)||this},t)}(q),function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"}(gr||(gr={}));var Cr,Er=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new u(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){return e instanceof t&&this.value===e.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new h;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(gr.L,"L",1),t.M=new t(gr.M,"M",0),t.Q=new t(gr.Q,"Q",3),t.H=new t(gr.H,"H",2),t}(),yr=function(){function t(t){this.errorCorrectionLevel=Er.forBits(t>>3&3),this.dataMask=7&t}return t.numBitsDiffering=function(t,e){return E.bitCount(t^e)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return null!==n?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,o,i=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t.FORMAT_INFO_DECODE_LOOKUP),u=s.next();!u.done;u=s.next()){var c=u.value,h=c[0];if(h===e||h===r)return new t(c[1]);var l=t.numBitsDiffering(e,h);l<i&&(a=c[1],i=l),e!==r&&(l=t.numBitsDiffering(r,h))<i&&(a=c[1],i=l)}}catch(d){n={error:d}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return i<=3?new t(a):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){return e instanceof t&&this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),Ir=function(){function t(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var t,e,r=0,n=this.ecBlocks;try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),i=o.next();!i.done;i=o.next())r+=i.value.getCount()}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Sr=function(){function t(t,e){this.count=t,this.dataCodewords=e}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),vr=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tr=function(){function t(t,e){for(var r,n,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=o;var a=0,s=o[0].getECCodewordsPerBlock(),u=o[0].getECBlocks();try{for(var c=vr(u),h=c.next();!h.done;h=c.next()){var l=h.value;a+=l.getCount()*(l.getDataCodewords()+s)}}catch(d){r={error:d}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}this.totalCodewords=a}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},t.getProvisionalVersionForDimension=function(t){if(t%4!=1)throw new T;try{return this.getVersionForNumber((t-17)/4)}catch(e){throw new T}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new h;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,o=0;o<t.VERSION_DECODE_INFO.length;o++){var i=t.VERSION_DECODE_INFO[o];if(i===e)return t.getVersionForNumber(o+7);var a=yr.numBitsDiffering(e,i);a<r&&(n=o+7,r=a)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new L(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,n=0;n<r;n++)for(var o=this.alignmentPatternCenters[n]-2,i=0;i<r;i++)0===n&&(0===i||i===r-1)||n===r-1&&0===i||e.setRegion(this.alignmentPatternCenters[i]-2,o,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Ir(7,new Sr(1,19)),new Ir(10,new Sr(1,16)),new Ir(13,new Sr(1,13)),new Ir(17,new Sr(1,9))),new t(2,Int32Array.from([6,18]),new Ir(10,new Sr(1,34)),new Ir(16,new Sr(1,28)),new Ir(22,new Sr(1,22)),new Ir(28,new Sr(1,16))),new t(3,Int32Array.from([6,22]),new Ir(15,new Sr(1,55)),new Ir(26,new Sr(1,44)),new Ir(18,new Sr(2,17)),new Ir(22,new Sr(2,13))),new t(4,Int32Array.from([6,26]),new Ir(20,new Sr(1,80)),new Ir(18,new Sr(2,32)),new Ir(26,new Sr(2,24)),new Ir(16,new Sr(4,9))),new t(5,Int32Array.from([6,30]),new Ir(26,new Sr(1,108)),new Ir(24,new Sr(2,43)),new Ir(18,new Sr(2,15),new Sr(2,16)),new Ir(22,new Sr(2,11),new Sr(2,12))),new t(6,Int32Array.from([6,34]),new Ir(18,new Sr(2,68)),new Ir(16,new Sr(4,27)),new Ir(24,new Sr(4,19)),new Ir(28,new Sr(4,15))),new t(7,Int32Array.from([6,22,38]),new Ir(20,new Sr(2,78)),new Ir(18,new Sr(4,31)),new Ir(18,new Sr(2,14),new Sr(4,15)),new Ir(26,new Sr(4,13),new Sr(1,14))),new t(8,Int32Array.from([6,24,42]),new Ir(24,new Sr(2,97)),new Ir(22,new Sr(2,38),new Sr(2,39)),new Ir(22,new Sr(4,18),new Sr(2,19)),new Ir(26,new Sr(4,14),new Sr(2,15))),new t(9,Int32Array.from([6,26,46]),new Ir(30,new Sr(2,116)),new Ir(22,new Sr(3,36),new Sr(2,37)),new Ir(20,new Sr(4,16),new Sr(4,17)),new Ir(24,new Sr(4,12),new Sr(4,13))),new t(10,Int32Array.from([6,28,50]),new Ir(18,new Sr(2,68),new Sr(2,69)),new Ir(26,new Sr(4,43),new Sr(1,44)),new Ir(24,new Sr(6,19),new Sr(2,20)),new Ir(28,new Sr(6,15),new Sr(2,16))),new t(11,Int32Array.from([6,30,54]),new Ir(20,new Sr(4,81)),new Ir(30,new Sr(1,50),new Sr(4,51)),new Ir(28,new Sr(4,22),new Sr(4,23)),new Ir(24,new Sr(3,12),new Sr(8,13))),new t(12,Int32Array.from([6,32,58]),new Ir(24,new Sr(2,92),new Sr(2,93)),new Ir(22,new Sr(6,36),new Sr(2,37)),new Ir(26,new Sr(4,20),new Sr(6,21)),new Ir(28,new Sr(7,14),new Sr(4,15))),new t(13,Int32Array.from([6,34,62]),new Ir(26,new Sr(4,107)),new Ir(22,new Sr(8,37),new Sr(1,38)),new Ir(24,new Sr(8,20),new Sr(4,21)),new Ir(22,new Sr(12,11),new Sr(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Ir(30,new Sr(3,115),new Sr(1,116)),new Ir(24,new Sr(4,40),new Sr(5,41)),new Ir(20,new Sr(11,16),new Sr(5,17)),new Ir(24,new Sr(11,12),new Sr(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Ir(22,new Sr(5,87),new Sr(1,88)),new Ir(24,new Sr(5,41),new Sr(5,42)),new Ir(30,new Sr(5,24),new Sr(7,25)),new Ir(24,new Sr(11,12),new Sr(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Ir(24,new Sr(5,98),new Sr(1,99)),new Ir(28,new Sr(7,45),new Sr(3,46)),new Ir(24,new Sr(15,19),new Sr(2,20)),new Ir(30,new Sr(3,15),new Sr(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Ir(28,new Sr(1,107),new Sr(5,108)),new Ir(28,new Sr(10,46),new Sr(1,47)),new Ir(28,new Sr(1,22),new Sr(15,23)),new Ir(28,new Sr(2,14),new Sr(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Ir(30,new Sr(5,120),new Sr(1,121)),new Ir(26,new Sr(9,43),new Sr(4,44)),new Ir(28,new Sr(17,22),new Sr(1,23)),new Ir(28,new Sr(2,14),new Sr(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Ir(28,new Sr(3,113),new Sr(4,114)),new Ir(26,new Sr(3,44),new Sr(11,45)),new Ir(26,new Sr(17,21),new Sr(4,22)),new Ir(26,new Sr(9,13),new Sr(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Ir(28,new Sr(3,107),new Sr(5,108)),new Ir(26,new Sr(3,41),new Sr(13,42)),new Ir(30,new Sr(15,24),new Sr(5,25)),new Ir(28,new Sr(15,15),new Sr(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Ir(28,new Sr(4,116),new Sr(4,117)),new Ir(26,new Sr(17,42)),new Ir(28,new Sr(17,22),new Sr(6,23)),new Ir(30,new Sr(19,16),new Sr(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Ir(28,new Sr(2,111),new Sr(7,112)),new Ir(28,new Sr(17,46)),new Ir(30,new Sr(7,24),new Sr(16,25)),new Ir(24,new Sr(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Ir(30,new Sr(4,121),new Sr(5,122)),new Ir(28,new Sr(4,47),new Sr(14,48)),new Ir(30,new Sr(11,24),new Sr(14,25)),new Ir(30,new Sr(16,15),new Sr(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Ir(30,new Sr(6,117),new Sr(4,118)),new Ir(28,new Sr(6,45),new Sr(14,46)),new Ir(30,new Sr(11,24),new Sr(16,25)),new Ir(30,new Sr(30,16),new Sr(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Ir(26,new Sr(8,106),new Sr(4,107)),new Ir(28,new Sr(8,47),new Sr(13,48)),new Ir(30,new Sr(7,24),new Sr(22,25)),new Ir(30,new Sr(22,15),new Sr(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Ir(28,new Sr(10,114),new Sr(2,115)),new Ir(28,new Sr(19,46),new Sr(4,47)),new Ir(28,new Sr(28,22),new Sr(6,23)),new Ir(30,new Sr(33,16),new Sr(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Ir(30,new Sr(8,122),new Sr(4,123)),new Ir(28,new Sr(22,45),new Sr(3,46)),new Ir(30,new Sr(8,23),new Sr(26,24)),new Ir(30,new Sr(12,15),new Sr(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Ir(30,new Sr(3,117),new Sr(10,118)),new Ir(28,new Sr(3,45),new Sr(23,46)),new Ir(30,new Sr(4,24),new Sr(31,25)),new Ir(30,new Sr(11,15),new Sr(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Ir(30,new Sr(7,116),new Sr(7,117)),new Ir(28,new Sr(21,45),new Sr(7,46)),new Ir(30,new Sr(1,23),new Sr(37,24)),new Ir(30,new Sr(19,15),new Sr(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Ir(30,new Sr(5,115),new Sr(10,116)),new Ir(28,new Sr(19,47),new Sr(10,48)),new Ir(30,new Sr(15,24),new Sr(25,25)),new Ir(30,new Sr(23,15),new Sr(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Ir(30,new Sr(13,115),new Sr(3,116)),new Ir(28,new Sr(2,46),new Sr(29,47)),new Ir(30,new Sr(42,24),new Sr(1,25)),new Ir(30,new Sr(23,15),new Sr(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Ir(30,new Sr(17,115)),new Ir(28,new Sr(10,46),new Sr(23,47)),new Ir(30,new Sr(10,24),new Sr(35,25)),new Ir(30,new Sr(19,15),new Sr(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Ir(30,new Sr(17,115),new Sr(1,116)),new Ir(28,new Sr(14,46),new Sr(21,47)),new Ir(30,new Sr(29,24),new Sr(19,25)),new Ir(30,new Sr(11,15),new Sr(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Ir(30,new Sr(13,115),new Sr(6,116)),new Ir(28,new Sr(14,46),new Sr(23,47)),new Ir(30,new Sr(44,24),new Sr(7,25)),new Ir(30,new Sr(59,16),new Sr(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Ir(30,new Sr(12,121),new Sr(7,122)),new Ir(28,new Sr(12,47),new Sr(26,48)),new Ir(30,new Sr(39,24),new Sr(14,25)),new Ir(30,new Sr(22,15),new Sr(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Ir(30,new Sr(6,121),new Sr(14,122)),new Ir(28,new Sr(6,47),new Sr(34,48)),new Ir(30,new Sr(46,24),new Sr(10,25)),new Ir(30,new Sr(2,15),new Sr(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Ir(30,new Sr(17,122),new Sr(4,123)),new Ir(28,new Sr(29,46),new Sr(14,47)),new Ir(30,new Sr(49,24),new Sr(10,25)),new Ir(30,new Sr(24,15),new Sr(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Ir(30,new Sr(4,122),new Sr(18,123)),new Ir(28,new Sr(13,46),new Sr(32,47)),new Ir(30,new Sr(48,24),new Sr(14,25)),new Ir(30,new Sr(42,15),new Sr(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Ir(30,new Sr(20,117),new Sr(4,118)),new Ir(28,new Sr(40,47),new Sr(7,48)),new Ir(30,new Sr(43,24),new Sr(22,25)),new Ir(30,new Sr(10,15),new Sr(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Ir(30,new Sr(19,118),new Sr(6,119)),new Ir(28,new Sr(18,47),new Sr(31,48)),new Ir(30,new Sr(34,24),new Sr(34,25)),new Ir(30,new Sr(20,15),new Sr(61,16)))],t}();!function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"}(Cr||(Cr={}));var Rr,Or=function(){function t(t,e){this.value=t,this.isMasked=e}return t.prototype.unmaskBitMatrix=function(t,e){for(var r=0;r<e;r++)for(var n=0;n<e;n++)this.isMasked(r,n)&&t.flip(n,r)},t.values=new Map([[Cr.DATA_MASK_000,new t(Cr.DATA_MASK_000,function(t,e){return 0==(t+e&1)})],[Cr.DATA_MASK_001,new t(Cr.DATA_MASK_001,function(t,e){return 0==(1&t)})],[Cr.DATA_MASK_010,new t(Cr.DATA_MASK_010,function(t,e){return e%3==0})],[Cr.DATA_MASK_011,new t(Cr.DATA_MASK_011,function(t,e){return(t+e)%3==0})],[Cr.DATA_MASK_100,new t(Cr.DATA_MASK_100,function(t,e){return 0==(Math.floor(t/2)+Math.floor(e/3)&1)})],[Cr.DATA_MASK_101,new t(Cr.DATA_MASK_101,function(t,e){return t*e%6==0})],[Cr.DATA_MASK_110,new t(Cr.DATA_MASK_110,function(t,e){return t*e%6<3})],[Cr.DATA_MASK_111,new t(Cr.DATA_MASK_111,function(t,e){return 0==(t+e+t*e%3&1)})]]),t}(),Nr=function(){function t(t){var e=t.getHeight();if(e<21||1!=(3&e))throw new T;this.bitMatrix=t}return t.prototype.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);var n=this.bitMatrix.getHeight(),o=0,i=n-7;for(r=n-1;r>=i;r--)o=this.copyBit(8,r,o);for(e=n-8;e<n;e++)o=this.copyBit(e,8,o);if(this.parsedFormatInfo=yr.decodeFormatInformation(t,o),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new T},t.prototype.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return Tr.getVersionForNumber(e);for(var r=0,n=t-11,o=5;o>=0;o--)for(var i=t-9;i>=n;i--)r=this.copyBit(i,o,r);var a=Tr.decodeVersionInformation(r);if(null!==a&&a.getDimensionForVersion()===t)return this.parsedVersion=a,a;for(r=0,i=5;i>=0;i--)for(o=t-9;o>=n;o--)r=this.copyBit(i,o,r);if(null!==(a=Tr.decodeVersionInformation(r))&&a.getDimensionForVersion()===t)return this.parsedVersion=a,a;throw new T},t.prototype.copyBit=function(t,e,r){return(this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e))?r<<1|1:r<<1},t.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),r=Or.values.get(t.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);for(var o=e.buildFunctionPattern(),i=!0,a=new Uint8Array(e.getTotalCodewords()),s=0,u=0,c=0,h=n-1;h>0;h-=2){6===h&&h--;for(var l=0;l<n;l++)for(var d=i?n-1-l:l,f=0;f<2;f++)o.get(h-f,d)||(c++,u<<=1,this.bitMatrix.get(h-f,d)&&(u|=1),8===c&&(a[s++]=u,c=0,u=0));i=!i}if(s!==e.getTotalCodewords())throw new T;return a},t.prototype.remask=function(){if(null!==this.parsedFormatInfo){var t=Or.values[this.parsedFormatInfo.getDataMask()],e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}},t.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},t.prototype.mirror=function(){for(var t=this.bitMatrix,e=0,r=t.getWidth();e<r;e++)for(var n=e+1,o=t.getHeight();n<o;n++)t.get(e,n)!==t.get(n,e)&&(t.flip(n,e),t.flip(e,n))},t}(),br=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dr=function(){function t(t,e){this.numDataCodewords=t,this.codewords=e}return t.getDataBlocks=function(e,r,n){var o,i,a,s;if(e.length!==r.getTotalCodewords())throw new h;var u=r.getECBlocksForLevel(n),c=0,l=u.getECBlocks();try{for(var d=br(l),f=d.next();!f.done;f=d.next())c+=(A=f.value).getCount()}catch(O){o={error:O}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}var g=new Array(c),p=0;try{for(var w=br(l),m=w.next();!m.done;m=w.next())for(var A=m.value,_=0;_<A.getCount();_++){var C=A.getDataCodewords(),E=u.getECCodewordsPerBlock()+C;g[p++]=new t(C,new Uint8Array(E))}}catch(N){a={error:N}}finally{try{m&&!m.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}for(var y=g[0].codewords.length,I=g.length-1;I>=0&&g[I].codewords.length!==y;)I--;I++;var S=y-u.getECCodewordsPerBlock(),v=0;for(_=0;_<S;_++)for(var T=0;T<p;T++)g[T].codewords[_]=e[v++];for(T=I;T<p;T++)g[T].codewords[S]=e[v++];var R=g[0].codewords.length;for(_=S;_<R;_++)for(T=0;T<p;T++)g[T].codewords[T<I?_:_+1]=e[v++];return g},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}();!function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"}(Rr||(Rr={}));var Mr,Pr,Br=function(){function t(e,r,n,o){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=o,t.FOR_BITS.set(o,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(void 0===r)throw new h;return r},t.prototype.getCharacterCountBits=function(t){var e=t.getVersionNumber();return this.characterCountBitsForVersions[e<=9?0:e<=26?1:2]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){return e instanceof t&&this.value===e.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Rr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Rr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Rr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Rr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Rr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Rr.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Rr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Rr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Rr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Rr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),Lr=function(){function t(){}return t.decode=function(e,r,n,o){var i=new fr(e),a=new B,s=new Array,u=-1,c=-1;try{var h=null,l=!1,d=void 0;do{if(i.available()<4)d=Br.TERMINATOR;else{var f=i.readBits(4);d=Br.forBits(f)}switch(d){case Br.TERMINATOR:break;case Br.FNC1_FIRST_POSITION:case Br.FNC1_SECOND_POSITION:l=!0;break;case Br.STRUCTURED_APPEND:if(i.available()<16)throw new T;u=i.readBits(8),c=i.readBits(8);break;case Br.ECI:var g=t.parseECIValue(i);if(null===(h=N.getCharacterSetECIByValue(g)))throw new T;break;case Br.HANZI:var p=i.readBits(4),w=i.readBits(d.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(i,a,w);break;default:var m=i.readBits(d.getCharacterCountBits(r));switch(d){case Br.NUMERIC:t.decodeNumericSegment(i,a,m);break;case Br.ALPHANUMERIC:t.decodeAlphanumericSegment(i,a,m,l);break;case Br.BYTE:t.decodeByteSegment(i,a,m,h,s,o);break;case Br.KANJI:t.decodeKanjiSegment(i,a,m);break;default:throw new T}}}while(d!==Br.TERMINATOR)}catch(A){throw new T}return new rt(e,a.toString(),0===s.length?null:s,null===n?null:n.toString(),u,c)},t.decodeHanziSegment=function(t,e,r){if(13*r>t.available())throw new T;for(var n=new Uint8Array(2*r),o=0;r>0;){var i=t.readBits(13),a=i/96<<8&4294967295|i%96;n[o]=(a+=a<959?41377:42657)>>8&255,n[o+1]=255&a,o+=2,r--}try{e.append(M.decode(n,P.GB2312))}catch(s){throw new T(s)}},t.decodeKanjiSegment=function(t,e,r){if(13*r>t.available())throw new T;for(var n=new Uint8Array(2*r),o=0;r>0;){var i=t.readBits(13),a=i/192<<8&4294967295|i%192;n[o]=(a+=a<7936?33088:49472)>>8,n[o+1]=a,o+=2,r--}try{e.append(M.decode(n,P.SHIFT_JIS))}catch(s){throw new T(s)}},t.decodeByteSegment=function(t,e,r,n,o,i){if(8*r>t.available())throw new T;for(var a,s=new Uint8Array(r),u=0;u<r;u++)s[u]=t.readBits(8);a=null===n?P.guessEncoding(s,i):n.getName();try{e.append(M.decode(s,a))}catch(c){throw new T(c)}o.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new T;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,o){for(var i=r.length();n>1;){if(e.available()<11)throw new T;var a=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(a/45))),r.append(t.toAlphaNumericChar(a%45)),n-=2}if(1===n){if(e.available()<6)throw new T;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(o)for(var s=i;s<r.length();s++)"%"===r.charAt(s)&&(s<r.length()-1&&"%"===r.charAt(s+1)?r.deleteCharAt(s+1):r.setCharAt(s,String.fromCharCode(29)))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new T;var o=e.readBits(10);if(o>=1e3)throw new T;r.append(t.toAlphaNumericChar(Math.floor(o/100))),r.append(t.toAlphaNumericChar(Math.floor(o/10)%10)),r.append(t.toAlphaNumericChar(o%10)),n-=3}if(2===n){if(e.available()<7)throw new T;var i=e.readBits(7);if(i>=100)throw new T;r.append(t.toAlphaNumericChar(Math.floor(i/10))),r.append(t.toAlphaNumericChar(i%10))}else if(1===n){if(e.available()<4)throw new T;var a=e.readBits(4);if(a>=10)throw new T;r.append(t.toAlphaNumericChar(a))}},t.parseECIValue=function(t){var e=t.readBits(8);if(0==(128&e))return 127&e;if(128==(192&e))return(63&e)<<8&4294967295|t.readBits(8);if(192==(224&e))return(31&e)<<16&4294967295|t.readBits(16);throw new T},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),Fr=function(){function t(t){this.mirrored=t}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(t){if(this.mirrored&&null!==t&&!(t.length<3)){var e=t[0];t[0]=t[2],t[2]=e}},t}(),kr=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xr=function(){function t(){this.rsDecoder=new ft(ut.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(t,e){return this.decodeBitMatrix(L.parseFromBooleanArray(t),e)},t.prototype.decodeBitMatrix=function(t,e){var r=new Nr(t),n=null;try{return this.decodeBitMatrixParser(r,e)}catch(i){n=i}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,e);return o.setOther(new Fr(!0)),o}catch(i){if(null!==n)throw n;throw i}},t.prototype.decodeBitMatrixParser=function(t,e){var r,n,o,i,a=t.readVersion(),s=t.readFormatInformation().getErrorCorrectionLevel(),u=t.readCodewords(),c=Dr.getDataBlocks(u,a,s),h=0;try{for(var l=kr(c),d=l.next();!d.done;d=l.next())h+=(m=d.value).getNumDataCodewords()}catch(E){r={error:E}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}var f=new Uint8Array(h),g=0;try{for(var p=kr(c),w=p.next();!w.done;w=p.next()){var m,A=(m=w.value).getCodewords(),_=m.getNumDataCodewords();this.correctErrors(A,_);for(var C=0;C<_;C++)f[g++]=A[C]}}catch(y){o={error:y}}finally{try{w&&!w.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}return Lr.decode(f,a,s,e)},t.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(o){throw new f}for(var n=0;n<e;n++)t[n]=r[n]},t}(),Vr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ur=function(t){function e(e,r,n){var o=t.call(this,e,r)||this;return o.estimatedModuleSize=n,o}return Vr(e,t),e.prototype.aboutEquals=function(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){var n=Math.abs(t-this.estimatedModuleSize);return n<=1||n<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,n){return new e((this.getX()+r)/2,(this.getY()+t)/2,(this.estimatedModuleSize+n)/2)},e}(_t),Hr=function(){function t(t,e,r,n,o,i,a){this.image=t,this.startX=e,this.startY=r,this.width=n,this.height=o,this.moduleSize=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var t=this.startX,e=this.height,r=t+this.width,n=this.startY+e/2,o=new Int32Array(3),i=this.image,a=0;a<e;a++){var s=n+(0==(1&a)?Math.floor((a+1)/2):-Math.floor((a+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var u=t;u<r&&!i.get(u,s);)u++;for(var c=0;u<r;){if(i.get(u,s))if(1===c)o[1]++;else if(2===c){var h;if(this.foundPatternCross(o)&&null!==(h=this.handlePossibleCenter(o,s,u)))return h;o[0]=o[2],o[1]=1,o[2]=0,c=1}else o[++c]++;else 1===c&&c++,o[c]++;u++}if(this.foundPatternCross(o)&&null!==(h=this.handlePossibleCenter(o,s,r)))return h}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new k},t.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},t.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,n=0;n<3;n++)if(Math.abs(e-t[n])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,o){var i=this.image,a=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var u=e;u>=0&&i.get(r,u)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&!i.get(r,u)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<a&&i.get(r,u)&&s[1]<=n;)s[1]++,u++;if(u===a||s[1]>n)return NaN;for(;u<a&&!i.get(r,u)&&s[2]<=n;)s[2]++,u++;return s[2]>n||5*Math.abs(s[0]+s[1]+s[2]-o)>=2*o?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var o,i,a=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),u=this.crossCheckVertical(r,s,2*e[1],a);if(!isNaN(u)){var c=(e[0]+e[1]+e[2])/3;try{for(var h=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.possibleCenters),l=h.next();!l.done;l=h.next()){var d=l.value;if(d.aboutEquals(c,u,s))return d.combineEstimate(u,s,c)}}catch(g){o={error:g}}finally{try{l&&!l.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}var f=new Ur(s,u,c);this.possibleCenters.push(f),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(f)}return null},t}(),Gr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xr=function(t){function e(e,r,n,o){var i=t.call(this,e,r)||this;return i.estimatedModuleSize=n,i.count=o,void 0===o&&(i.count=1),i}return Gr(e,t),e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){var n=Math.abs(t-this.estimatedModuleSize);return n<=1||n<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,n){var o=this.count+1;return new e((this.count*this.getX()+r)/o,(this.count*this.getY()+t)/o,(this.count*this.estimatedModuleSize+n)/o,o)},e}(_t),Wr=function(){function t(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),zr=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yr=function(){function t(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=null!=e&&void 0!==e.get(S.TRY_HARDER),n=null!=e&&void 0!==e.get(S.PURE_BARCODE),o=this.image,i=o.getHeight(),a=o.getWidth(),s=Math.floor(3*i/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var u=!1,c=new Int32Array(5),h=s-1;h<i&&!u;h+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var l=0,d=0;d<a;d++)if(o.get(d,h))1==(1&l)&&l++,c[l]++;else if(0==(1&l))if(4===l)if(t.foundPatternCross(c)){if(!0!==this.handlePossibleCenter(c,h,d,n)){c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,l=3;continue}if(s=2,!0===this.hasSkipped)u=this.haveMultiplyConfirmedCenters();else{var f=this.findRowSkip();f>c[2]&&(h+=f-c[2]-s,d=a-1)}l=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,l=3;else c[++l]++;else c[l]++;t.foundPatternCross(c)&&!0===this.handlePossibleCenter(c,h,a,n)&&(s=c[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}var g=this.selectBestPatterns();return _t.orderBestPatterns(g),new Wr(g)},t.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},t.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var n=t[r];if(0===n)return!1;e+=n}if(e<7)return!1;var o=e/7,i=o/2;return Math.abs(o-t[0])<i&&Math.abs(o-t[1])<i&&Math.abs(3*o-t[2])<3*i&&Math.abs(o-t[3])<i&&Math.abs(o-t[4])<i},t.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},t.prototype.crossCheckDiagonal=function(e,r,n,o){for(var i=this.getCrossCheckStateCount(),a=0,s=this.image;e>=a&&r>=a&&s.get(r-a,e-a);)i[2]++,a++;if(e<a||r<a)return!1;for(;e>=a&&r>=a&&!s.get(r-a,e-a)&&i[1]<=n;)i[1]++,a++;if(e<a||r<a||i[1]>n)return!1;for(;e>=a&&r>=a&&s.get(r-a,e-a)&&i[0]<=n;)i[0]++,a++;if(i[0]>n)return!1;var u=s.getHeight(),c=s.getWidth();for(a=1;e+a<u&&r+a<c&&s.get(r+a,e+a);)i[2]++,a++;if(e+a>=u||r+a>=c)return!1;for(;e+a<u&&r+a<c&&!s.get(r+a,e+a)&&i[3]<n;)i[3]++,a++;if(e+a>=u||r+a>=c||i[3]>=n)return!1;for(;e+a<u&&r+a<c&&s.get(r+a,e+a)&&i[4]<n;)i[4]++,a++;return!(i[4]>=n)&&Math.abs(i[0]+i[1]+i[2]+i[3]+i[4]-o)<2*o&&t.foundPatternCross(i)},t.prototype.crossCheckVertical=function(e,r,n,o){for(var i=this.image,a=i.getHeight(),s=this.getCrossCheckStateCount(),u=e;u>=0&&i.get(r,u);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(r,u)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&i.get(r,u)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<a&&i.get(r,u);)s[2]++,u++;if(u===a)return NaN;for(;u<a&&!i.get(r,u)&&s[3]<n;)s[3]++,u++;if(u===a||s[3]>=n)return NaN;for(;u<a&&i.get(r,u)&&s[4]<n;)s[4]++,u++;return s[4]>=n||5*Math.abs(s[0]+s[1]+s[2]+s[3]+s[4]-o)>=2*o?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,o){for(var i=this.image,a=i.getWidth(),s=this.getCrossCheckStateCount(),u=e;u>=0&&i.get(u,r);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(u,r)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&i.get(u,r)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<a&&i.get(u,r);)s[2]++,u++;if(u===a)return NaN;for(;u<a&&!i.get(u,r)&&s[3]<n;)s[3]++,u++;if(u===a||s[3]>=n)return NaN;for(;u<a&&i.get(u,r)&&s[4]<n;)s[4]++,u++;return s[4]>=n||5*Math.abs(s[0]+s[1]+s[2]+s[3]+s[4]-o)>=o?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.handlePossibleCenter=function(e,r,n,o){var i=e[0]+e[1]+e[2]+e[3]+e[4],a=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(a),e[2],i);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),e[2],i),!isNaN(a)&&(!o||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),e[2],i)))){for(var u=i/7,c=!1,h=this.possibleCenters,l=0,d=h.length;l<d;l++){var f=h[l];if(f.aboutEquals(u,s,a)){h[l]=f.combineEstimate(s,a,u),c=!0;break}}if(!c){var g=new Xr(a,s,u);h.push(g),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(g)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r;if(this.possibleCenters.length<=1)return 0;var n=null;try{for(var o=zr(this.possibleCenters),i=o.next();!i.done;i=o.next()){var a=i.value;if(a.getCount()>=t.CENTER_QUORUM){if(null!=n)return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-a.getX())-Math.abs(n.getY()-a.getY()))/2);n=a}}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,o,i=0,a=0,s=this.possibleCenters.length;try{for(var u=zr(this.possibleCenters),c=u.next();!c.done;c=u.next())(g=c.value).getCount()>=t.CENTER_QUORUM&&(i++,a+=g.getEstimatedModuleSize())}catch(p){e={error:p}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}if(i<3)return!1;var h=a/s,l=0;try{for(var d=zr(this.possibleCenters),f=d.next();!f.done;f=d.next()){var g=f.value;l+=Math.abs(g.getEstimatedModuleSize()-h)}}catch(w){n={error:w}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}return l<=.05*a},t.prototype.selectBestPatterns=function(){var t,e,r,n,o=this.possibleCenters.length;if(o<3)throw new k;var i,a=this.possibleCenters;if(o>3){var s=0,u=0;try{for(var c=zr(this.possibleCenters),h=c.next();!h.done;h=c.next()){var l=h.value.getEstimatedModuleSize();s+=l,u+=l*l}}catch(m){t={error:m}}finally{try{h&&!h.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}i=s/o;var d=Math.sqrt(u/o-i*i);a.sort(function(t,e){var r=Math.abs(e.getEstimatedModuleSize()-i),n=Math.abs(t.getEstimatedModuleSize()-i);return r<n?-1:r>n?1:0});for(var f=Math.max(.2*i,d),g=0;g<a.length&&a.length>3;g++)Math.abs(a[g].getEstimatedModuleSize()-i)>f&&(a.splice(g,1),g--)}if(a.length>3){s=0;try{for(var p=zr(a),w=p.next();!w.done;w=p.next())s+=w.value.getEstimatedModuleSize()}catch(A){r={error:A}}finally{try{w&&!w.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}i=s/a.length,a.sort(function(t,e){if(e.getCount()===t.getCount()){var r=Math.abs(e.getEstimatedModuleSize()-i),n=Math.abs(t.getEstimatedModuleSize()-i);return r<n?1:r>n?-1:0}return e.getCount()-t.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),Zr=function(){function t(t){this.image=t}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(t){this.resultPointCallback=null==t?null:t.get(S.NEED_RESULT_POINT_CALLBACK);var e=new Yr(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(e)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),o=e.getBottomLeft(),i=this.calculateModuleSize(r,n,o);if(i<1)throw new k("No pattern found in proccess finder.");var a=t.computeDimension(r,n,o,i),s=Tr.getProvisionalVersionForDimension(a),u=s.getDimensionForVersion()-7,c=null;if(s.getAlignmentPatternCenters().length>0)for(var h=n.getX()-r.getX()+o.getX(),l=n.getY()-r.getY()+o.getY(),d=1-3/u,f=Math.floor(r.getX()+d*(h-r.getX())),g=Math.floor(r.getY()+d*(l-r.getY())),p=4;p<=16;p<<=1)try{c=this.findAlignmentInRegion(i,f,g,p);break}catch(A){if(!(A instanceof k))throw A}var w=t.createTransform(r,n,o,c,a),m=t.sampleGrid(this.image,w,a);return new Ct(m,null===c?[o,r,n]:[o,r,n,c])},t.createTransform=function(t,e,r,n,o){var i,a,s,u,c=o-3.5;return null!==n?(i=n.getX(),a=n.getY(),u=s=c-3):(i=e.getX()-t.getX()+r.getX(),a=e.getY()-t.getY()+r.getY(),s=c,u=c),vt.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,s,u,3.5,c,t.getX(),t.getY(),e.getX(),e.getY(),i,a,r.getX(),r.getY())},t.sampleGrid=function(t,e,r){return Ot.getInstance().sampleGridWithTransform(t,r,r,e)},t.computeDimension=function(t,e,r,n){var o=mt.round(_t.distance(t,e)/n),i=mt.round(_t.distance(t,r)/n),a=Math.floor((o+i)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new k("Dimensions could be not found.")}return a},t.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},t.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,n){var o=this.sizeOfBlackWhiteBlackRun(t,e,r,n),i=1,a=t-(r-t);a<0?(i=t/(t-a),a=0):a>=this.image.getWidth()&&(i=(this.image.getWidth()-1-t)/(a-t),a=this.image.getWidth()-1);var s=Math.floor(e-(n-e)*i);return i=1,s<0?(i=e/(e-s),s=0):s>=this.image.getHeight()&&(i=(this.image.getHeight()-1-e)/(s-e),s=this.image.getHeight()-1),a=Math.floor(t+(a-t)*i),(o+=this.sizeOfBlackWhiteBlackRun(t,e,a,s))-1},t.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,n){var o=Math.abs(n-e)>Math.abs(r-t);if(o){var i=t;t=e,e=i,i=r,r=n,n=i}for(var a=Math.abs(r-t),s=Math.abs(n-e),u=-a/2,c=t<r?1:-1,h=e<n?1:-1,l=0,d=r+c,f=t,g=e;f!==d;f+=c){if(1===l===this.image.get(o?g:f,o?f:g)){if(2===l)return mt.distance(f,g,t,e);l++}if((u+=s)>0){if(g===n)break;g+=h,u-=a}}return 2===l?mt.distance(r+c,n,t,e):NaN},t.prototype.findAlignmentInRegion=function(t,e,r,n){var o=Math.floor(n*t),i=Math.max(0,e-o),a=Math.min(this.image.getWidth()-1,e+o);if(a-i<3*t)throw new k("Alignment top exceeds estimated module size.");var s=Math.max(0,r-o),u=Math.min(this.image.getHeight()-1,r+o);if(u-s<3*t)throw new k("Alignment bottom exceeds estimated module size.");return new Hr(this.image,i,s,a-i,u-s,t,this.resultPointCallback).find()},t}(),jr=function(){function t(){this.decoder=new xr}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,o;if(null!=r&&void 0!==r.get(S.PURE_BARCODE)){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,r),o=t.NO_POINTS}else{var a=new Zr(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(a.getBits(),r),o=a.getPoints()}n.getOther()instanceof Fr&&n.getOther().applyMirroredCorrection(o);var s=new Q(n.getText(),n.getRawBytes(),void 0,o,$.QR_CODE,void 0),u=n.getByteSegments();null!==u&&s.putMetadata(et.BYTE_SEGMENTS,u);var c=n.getECLevel();return null!==c&&s.putMetadata(et.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(s.putMetadata(et.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(et.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null===e||null===r)throw new k;var n=this.moduleSize(e,t),o=e[1],i=r[1],a=e[0],s=r[0];if(a>=s||o>=i)throw new k;if(i-o!=s-a&&(s=a+(i-o))>=t.getWidth())throw new k;var u=Math.round((s-a+1)/n),c=Math.round((i-o+1)/n);if(u<=0||c<=0)throw new k;if(c!==u)throw new k;var h=Math.floor(n/2);o+=h;var l=(a+=h)+Math.floor((u-1)*n)-s;if(l>0){if(l>h)throw new k;a-=l}var d=o+Math.floor((c-1)*n)-i;if(d>0){if(d>h)throw new k;o-=d}for(var f=new L(u,c),g=0;g<c;g++)for(var p=o+Math.floor(g*n),w=0;w<u;w++)t.get(a+Math.floor(w*n),p)&&f.set(w,g);return f},t.moduleSize=function(t,e){for(var r=e.getHeight(),n=e.getWidth(),o=t[0],i=t[1],a=!0,s=0;o<n&&i<r;){if(a!==e.get(o,i)){if(5==++s)break;a=!a}o++,i++}if(o===n||i===r)throw new k;return(o-t[0])/7},t.NO_POINTS=new Array,t}(),Kr=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(t){return mt.sum(t)},t.toIntArray=function(e){var r,n;if(null==e||!e.length)return t.EMPTY_INT_ARRAY;var o=new Int32Array(e.length),i=0;try{for(var a=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),s=a.next();!s.done;s=a.next())o[i++]=s.value}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.getCodeword=function(e){var r=C.binarySearch(t.SYMBOL_TABLE,262143&e);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.MAX_CODEWORDS_IN_BARCODE=(t.NUMBER_OF_CODEWORDS=929)-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),qr=function(){function t(t,e){this.bits=t,this.points=e}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),Qr=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jr=function(){function t(){}return t.detectMultiple=function(e,r,n){var o=e.getBlackMatrix(),i=t.detect(n,o);return i.length||((o=o.clone()).rotate180(),i=t.detect(n,o)),new qr(o,i)},t.detect=function(e,r){for(var n,o,i=new Array,a=0,s=0,u=!1;a<r.getHeight();){var c=t.findVertices(r,a,s);if(null!=c[0]||null!=c[3]){if(u=!0,i.push(c),!e)break;null!=c[2]?(s=Math.trunc(c[2].getX()),a=Math.trunc(c[2].getY())):(s=Math.trunc(c[4].getX()),a=Math.trunc(c[4].getY()))}else{if(!u)break;u=!1,s=0;try{for(var h=(n=void 0,Qr(i)),l=h.next();!l.done;l=h.next()){var d=l.value;null!=d[1]&&(a=Math.trunc(Math.max(a,d[1].getY()))),null!=d[3]&&(a=Math.max(a,Math.trunc(d[3].getY())))}}catch(f){n={error:f}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}a+=t.ROW_STEP}}return i},t.findVertices=function(e,r,n){var o=e.getHeight(),i=e.getWidth(),a=new Array(8);return t.copyToResult(a,t.findRowsWithPattern(e,o,i,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),null!=a[4]&&(n=Math.trunc(a[4].getX()),r=Math.trunc(a[4].getY())),t.copyToResult(a,t.findRowsWithPattern(e,o,i,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),a},t.copyToResult=function(t,e,r){for(var n=0;n<r.length;n++)t[r[n]]=e[n]},t.findRowsWithPattern=function(e,r,n,o,i,a){for(var s=new Array(4),u=!1,c=new Int32Array(a.length);o<r;o+=t.ROW_STEP)if(null!=(f=t.findGuardPattern(e,i,o,n,!1,a,c))){for(;o>0;){if(null==(d=t.findGuardPattern(e,i,--o,n,!1,a,c))){o++;break}f=d}s[0]=new _t(f[0],o),s[1]=new _t(f[1],o),u=!0;break}var h=o+1;if(u){for(var l=0,d=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);h<r;h++){var f;if(null!=(f=t.findGuardPattern(e,d[0],h,n,!1,a,c))&&Math.abs(d[0]-f[0])<t.MAX_PATTERN_DRIFT&&Math.abs(d[1]-f[1])<t.MAX_PATTERN_DRIFT)d=f,l=0;else{if(l>t.SKIPPED_ROW_COUNT_MAX)break;l++}}s[2]=new _t(d[0],h-=l+1),s[3]=new _t(d[1],h)}return h-o<t.BARCODE_MIN_HEIGHT&&C.fill(s,null),s},t.findGuardPattern=function(e,r,n,o,i,a,s){C.fillWithin(s,0,s.length,0);for(var u=r,c=0;e.get(u,n)&&u>0&&c++<t.MAX_PIXEL_DRIFT;)u--;for(var h=u,l=0,d=a.length,f=i;h<o;h++)if(e.get(h,n)!==f)s[l]++;else{if(l===d-1){if(t.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([u,h]);u+=s[0]+s[1],p.arraycopy(s,2,s,0,l-1),s[l-1]=0,s[l]=0,l--}else l++;s[l]=1,f=!f}return l===d-1&&t.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([u,h-1]):null},t.patternMatchVariance=function(t,e,r){for(var n=t.length,o=0,i=0,a=0;a<n;a++)o+=t[a],i+=e[a];if(o<i)return 1/0;var s=o/i;r*=s;for(var u=0,c=0;c<n;c++){var h=t[c],l=e[c]*s,d=h>l?h-l:l-h;if(d>r)return 1/0;u+=d}return u/o},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),$r=function(){function t(t,e){if(0===e.length)throw new h;this.field=t;var r=e.length;if(r>1&&0===e[0]){for(var n=1;n<r&&0===e[n];)n++;n===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-n),p.arraycopy(e,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return 0===this.coefficients[0]},t.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},t.prototype.evaluateAt=function(t){var e,r;if(0===t)return this.getCoefficient(0);if(1===t){var n=0;try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.coefficients),i=o.next();!i.done;i=o.next())n=this.field.add(n,i.value)}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n}for(var a=this.coefficients[0],s=this.coefficients.length,u=1;u<s;u++)a=this.field.add(this.field.multiply(t,a),this.coefficients[u]);return a},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var o=r;r=n,n=o}var i=new Int32Array(n.length),a=n.length-r.length;p.arraycopy(n,0,i,0,a);for(var s=a;s<n.length;s++)i[s]=this.field.add(r[s-a],n[s]);return new t(this.field,i)},t.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new h("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,o=e.coefficients,i=o.length,a=new Int32Array(n+i-1),s=0;s<n;s++)for(var u=r[s],c=0;c<i;c++)a[s+c]=this.field.add(a[s+c],this.field.multiply(u,o[c]));return new t(this.field,a)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(0===e)return new t(this.field,new Int32Array([0]));if(1===e)return this;for(var r=this.coefficients.length,n=new Int32Array(r),o=0;o<r;o++)n[o]=this.field.multiply(this.coefficients[o],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new h;if(0===r)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,o=new Int32Array(n+e),i=0;i<n;i++)o[i]=this.field.multiply(this.coefficients[i],r);return new t(this.field,o)},t.prototype.toString=function(){for(var t=new B,e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);0!==r&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),0!==e&&1===r||t.append(r),0!==e&&(1===e?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()},t}(),tn=function(){function t(){}return t.prototype.add=function(t,e){return(t+e)%this.modulus},t.prototype.subtract=function(t,e){return(this.modulus+t-e)%this.modulus},t.prototype.exp=function(t){return this.expTable[t]},t.prototype.log=function(t){if(0===t)throw new h;return this.logTable[t]},t.prototype.inverse=function(t){if(0===t)throw new at;return this.expTable[this.modulus-this.logTable[t]-1]},t.prototype.multiply=function(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(t){return t===this},t}(),en=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rn=function(t){function e(e,r){var n=t.call(this)||this;n.modulus=e,n.expTable=new Int32Array(e),n.logTable=new Int32Array(e);for(var o=1,i=0;i<e;i++)n.expTable[i]=o,o=o*r%e;for(i=0;i<e-1;i++)n.logTable[n.expTable[i]]=i;return n.zero=new $r(n,new Int32Array([0])),n.one=new $r(n,new Int32Array([1])),n}return en(e,t),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,e){if(t<0)throw new h;if(0===e)return this.zero;var r=new Int32Array(t+1);return r[0]=e,new $r(this,r)},e.PDF417_GF=new e(Kr.NUMBER_OF_CODEWORDS,3),e}(tn),nn=function(){function t(){this.field=rn.PDF417_GF}return t.prototype.decode=function(t,e,r){for(var n,o,i=new $r(this.field,t),a=new Int32Array(e),s=!1,u=e;u>0;u--){var c=i.evaluateAt(this.field.exp(u));a[e-u]=c,0!==c&&(s=!0)}if(!s)return 0;var h=this.field.getOne();if(null!=r)try{for(var l=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),d=l.next();!d.done;d=l.next()){var g=this.field.exp(t.length-1-d.value),p=new $r(this.field,new Int32Array([this.field.subtract(0,g),1]));h=h.multiply(p)}}catch(I){n={error:I}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}var w=new $r(this.field,a),m=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),w,e),A=m[0],_=m[1],C=this.findErrorLocations(A),E=this.findErrorMagnitudes(_,A,C);for(u=0;u<C.length;u++){var y=t.length-1-this.field.log(C[u]);if(y<0)throw f.getChecksumInstance();t[y]=this.field.subtract(t[y],E[u])}return C.length},t.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var n=t;t=e,e=n}for(var o=t,i=e,a=this.field.getZero(),s=this.field.getOne();i.getDegree()>=Math.round(r/2);){var u=o,c=a;if(a=s,(o=i).isZero())throw f.getChecksumInstance();i=u;for(var h=this.field.getZero(),l=o.getCoefficient(o.getDegree()),d=this.field.inverse(l);i.getDegree()>=o.getDegree()&&!i.isZero();){var g=i.getDegree()-o.getDegree(),p=this.field.multiply(i.getCoefficient(i.getDegree()),d);h=h.add(this.field.buildMonomial(g,p)),i=i.subtract(o.multiplyByMonomial(g,p))}s=h.multiply(a).subtract(c).negative()}var w=s.getCoefficient(0);if(0===w)throw f.getChecksumInstance();var m=this.field.inverse(w);return[s.multiply(m),i.multiply(m)]},t.prototype.findErrorLocations=function(t){for(var e=t.getDegree(),r=new Int32Array(e),n=0,o=1;o<this.field.getSize()&&n<e;o++)0===t.evaluateAt(o)&&(r[n]=this.field.inverse(o),n++);if(n!==e)throw f.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(t,e,r){for(var n=e.getDegree(),o=new Int32Array(n),i=1;i<=n;i++)o[n-i]=this.field.multiply(i,e.getCoefficient(i));var a=new $r(this.field,o),s=r.length,u=new Int32Array(s);for(i=0;i<s;i++){var c=this.field.inverse(r[i]),h=this.field.subtract(0,t.evaluateAt(c)),l=this.field.inverse(a.evaluateAt(c));u[i]=this.field.multiply(h,l)}return u},t}(),on=function(){function t(e,r,n,o,i){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,o,i)}return t.prototype.constructor_1=function(t,e,r,n,o){var i=null==e||null==r,a=null==n||null==o;if(i&&a)throw new k;i?(e=new _t(0,n.getY()),r=new _t(0,o.getY())):a&&(n=new _t(t.getWidth()-1,e.getY()),o=new _t(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=n,this.bottomRight=o,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),o.getX())),this.minY=Math.trunc(Math.min(e.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},t.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},t.merge=function(e,r){return null==e?r:null==r?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var o=this.topLeft,i=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(e>0){var u=n?this.topLeft:this.topRight,c=Math.trunc(u.getY()-e);c<0&&(c=0);var h=new _t(u.getX(),c);n?o=h:a=h}if(r>0){var l=n?this.bottomLeft:this.bottomRight,d=Math.trunc(l.getY()+r);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var f=new _t(l.getX(),d);n?i=f:s=f}return new t(this.image,o,i,a,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),an=function(){function t(t,e,r,n){this.columnCount=t,this.errorCorrectionLevel=n,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),sn=function(){function t(){this.buffer=""}return t.form=function(t,e){var r=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(t,n,o,i,a,s){if("%%"===t)return"%";if(void 0!==e[++r]){t=i?parseInt(i.substr(1)):void 0;var u,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":u=e[r];break;case"c":u=e[r][0];break;case"f":u=parseFloat(e[r]).toFixed(t);break;case"p":u=parseFloat(e[r]).toPrecision(t);break;case"e":u=parseFloat(e[r]).toExponential(t);break;case"x":u=parseInt(e[r]).toString(c||16);break;case"d":u=parseFloat(parseInt(e[r],c||10).toPrecision(t)).toFixed(0)}u="object"==typeof u?JSON.stringify(u):(+u).toString(c);for(var h=parseInt(o),l=o&&o[0]+""=="0"?"0":" ";u.length<h;)u=void 0!==n?u+l:l+u;return u}})},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),un=function(){function t(t){this.boundingBox=new on(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(null!=r)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var o=this.imageRowToCodewordIndex(e)-n;if(o>=0&&null!=(r=this.codewords[o]))return r;if((o=this.imageRowToCodewordIndex(e)+n)<this.codewords.length&&null!=(r=this.codewords[o]))return r}return null},t.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},t.prototype.setCodeword=function(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e},t.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var t,e,r=new sn,n=0;try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.codewords),i=o.next();!i.done;i=o.next()){var a=i.value;null!=a?r.format("%3d: %3d|%3d%n",n++,a.getRowNumber(),a.getValue()):r.format("%3d:    |   %n",n++)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),cn=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},hn=function(){function t(){this.values=new Map}return t.prototype.setValue=function(t){t=Math.trunc(t);var e=this.values.get(t);null==e&&(e=0),e++,this.values.set(t,e)},t.prototype.getValue=function(){var t,e,r=-1,n=new Array,o=function(t,e){var o=function(){return t},i=function(){return e};i()>r?(r=i(),(n=[]).push(o())):i()===r&&n.push(o())};try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.values.entries()),a=i.next();!a.done;a=i.next()){var s=cn(a.value,2);o(s[0],s[1])}}catch(u){t={error:u}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return Kr.toIntArray(n)},t.prototype.getConfidence=function(t){return this.values.get(t)},t}(),ln=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dn=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fn=function(t){function e(e,r){var n=t.call(this,e)||this;return n._isLeft=r,n}return ln(e,t),e.prototype.setRowNumbers=function(){var t,e;try{for(var r=dn(this.getCodewords()),n=r.next();!n.done;n=r.next()){var o=n.value;null!=o&&o.setRowNumberAsRowIndicatorColumn()}}catch(i){t={error:i}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var e=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(e,t);for(var r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),s=-1,u=1,c=0,h=i;h<a;h++)if(null!=e[h]){var l=e[h],d=l.getRowNumber()-s;if(0===d)c++;else if(1===d)u=Math.max(u,c),c=1,s=l.getRowNumber();else if(d<0||l.getRowNumber()>=t.getRowCount()||d>h)e[h]=null;else{for(var f,g=(f=u>2?(u-2)*d:d)>=h,p=1;p<=f&&!g;p++)g=null!=e[h-p];g?e[h]=null:(s=l.getRowNumber(),c=1)}}},e.prototype.getRowHeights=function(){var t,e,r=this.getBarcodeMetadata();if(null==r)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);var n=new Int32Array(r.getRowCount());try{for(var o=dn(this.getCodewords()),i=o.next();!i.done;i=o.next()){var a=i.value;if(null!=a){var s=a.getRowNumber();if(s>=n.length)continue;n[s]++}}}catch(u){t={error:u}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return n},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var e=this.getBoundingBox(),r=this._isLeft?e.getTopLeft():e.getTopRight(),n=this._isLeft?e.getBottomLeft():e.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.getCodewords(),s=-1,u=o;u<i;u++)if(null!=a[u]){var c=a[u];c.setRowNumberAsRowIndicatorColumn();var h=c.getRowNumber()-s;0===h||(1===h?s=c.getRowNumber():c.getRowNumber()>=t.getRowCount()?a[u]=null:s=c.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,e,r=this.getCodewords(),n=new hn,o=new hn,i=new hn,a=new hn;try{for(var s=dn(r),u=s.next();!u.done;u=s.next()){var c=u.value;if(null!=c){c.setRowNumberAsRowIndicatorColumn();var h=c.getValue()%30,l=c.getRowNumber();switch(this._isLeft||(l+=2),l%3){case 0:o.setValue(3*h+1);break;case 1:a.setValue(h/3),i.setValue(h%3);break;case 2:n.setValue(h+1)}}}}catch(f){t={error:f}}finally{try{u&&!u.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}if(0===n.getValue().length||0===o.getValue().length||0===i.getValue().length||0===a.getValue().length||n.getValue()[0]<1||o.getValue()[0]+i.getValue()[0]<Kr.MIN_ROWS_IN_BARCODE||o.getValue()[0]+i.getValue()[0]>Kr.MAX_ROWS_IN_BARCODE)return null;var d=new an(n.getValue()[0],o.getValue()[0],i.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(r,d),d},e.prototype.removeIncorrectCodewords=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(null!=t[r]){var o=n.getValue()%30,i=n.getRowNumber();if(i>e.getRowCount())t[r]=null;else switch(this._isLeft||(i+=2),i%3){case 0:3*o+1!==e.getRowCountUpperPart()&&(t[r]=null);break;case 1:Math.trunc(o/3)===e.getErrorCorrectionLevel()&&o%3===e.getRowCountLowerPart()||(t[r]=null);break;case 2:o+1!==e.getColumnCount()&&(t[r]=null)}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+t.prototype.toString.call(this)},e}(un),gn=function(){function t(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t,e=Kr.MAX_CODEWORDS_IN_BARCODE;do{t=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<t);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(t){null!=t&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(0===t)return 0;for(var e=1;e<this.barcodeColumnCount+1;e++)for(var r=this.detectionResultColumns[e].getCodewords(),n=0;n<r.length;n++)null!=r[n]&&(r[n].hasValidRowNumber()||this.adjustRowNumbers(e,n,r));return t},t.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(null!=t[r]&&null!=e[r]&&t[r].getRowNumber()===e[r].getRowNumber())for(var n=1;n<=this.barcodeColumnCount;n++){var o=this.detectionResultColumns[n].getCodewords()[r];null!=o&&(o.setRowNumber(t[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[n].getCodewords()[r]=null))}},t.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(null!=r[n])for(var o=r[n].getRowNumber(),i=0,a=this.barcodeColumnCount+1;a>0&&i<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[n];null!=s&&(i=t.adjustRowNumberIfValid(o,i,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(null!=r[n])for(var o=r[n].getRowNumber(),i=0,a=1;a<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[n];null!=s&&(i=t.adjustRowNumberIfValid(o,i,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(t,e,r){return null==r||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e},t.prototype.adjustRowNumbers=function(e,r,n){var o,i,a=n[r],s=this.detectionResultColumns[e-1].getCodewords(),u=s;null!=this.detectionResultColumns[e+1]&&(u=this.detectionResultColumns[e+1].getCodewords());var c=new Array(14);c[2]=s[r],c[3]=u[r],r>0&&(c[0]=n[r-1],c[4]=s[r-1],c[5]=u[r-1]),r>1&&(c[8]=n[r-2],c[10]=s[r-2],c[11]=u[r-2]),r<n.length-1&&(c[1]=n[r+1],c[6]=s[r+1],c[7]=u[r+1]),r<n.length-2&&(c[9]=n[r+2],c[12]=s[r+2],c[13]=u[r+2]);try{for(var h=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),l=h.next();!l.done;l=h.next())if(t.adjustRowNumber(a,l.value))return}catch(d){o={error:d}}finally{try{l&&!l.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}},t.adjustRowNumber=function(t,e){return!(null==e||!e.hasValidRowNumber()||e.getBucket()!==t.getBucket()||(t.setRowNumber(e.getRowNumber()),0))},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(t){this.boundingBox=t},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(t,e){this.detectionResultColumns[t]=e},t.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},t.prototype.toString=function(){var t=this.detectionResultColumns[0];null==t&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var e=new sn,r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(var n=0;n<this.barcodeColumnCount+2;n++)if(null!=this.detectionResultColumns[n]){var o=this.detectionResultColumns[n].getCodewords()[r];null!=o?e.format(" %3d|%3d",o.getRowNumber(),o.getValue()):e.format("    |   ")}else e.format("    |   ");e.format("%n")}return e.toString()},t}(),pn=function(){function t(e,r,n,o){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(o)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(t){this.rowNumber=t},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),wn=function(){function t(){}return t.initialize=function(){for(var e=0;e<Kr.SYMBOL_TABLE.length;e++)for(var r=Kr.SYMBOL_TABLE[e],n=1&r,o=0;o<Kr.BARS_IN_MODULE;o++){for(var i=0;(1&r)===n;)i+=1,r>>=1;n=1&r,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Kr.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Kr.BARS_IN_MODULE-o-1]=Math.fround(i/Kr.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return-1!==r?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(t){for(var e=mt.sum(t),r=new Int32Array(Kr.BARS_IN_MODULE),n=0,o=0,i=0;i<Kr.MODULES_IN_CODEWORD;i++)o+t[n]<=e/(2*Kr.MODULES_IN_CODEWORD)+i*e/Kr.MODULES_IN_CODEWORD&&(o+=t[n],n++),r[n]++;return r},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return-1===Kr.getCodeword(r)?-1:r},t.getBitValue=function(t){for(var e=0,r=0;r<t.length;r++)for(var n=0;n<t[r];n++)e=e<<1|(r%2==0?1:0);return Math.trunc(e)},t.getClosestDecodedValue=function(e){var r=mt.sum(e),n=new Array(Kr.BARS_IN_MODULE);if(r>1)for(var o=0;o<n.length;o++)n[o]=Math.fround(e[o]/r);var i=At.MAX_VALUE,a=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var u=0,c=t.RATIOS_TABLE[s],h=0;h<Kr.BARS_IN_MODULE;h++){var l=Math.fround(c[h]-n[h]);if((u+=Math.fround(l*l))>=i)break}u<i&&(i=u,a=Kr.SYMBOL_TABLE[s])}return a},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Kr.SYMBOL_TABLE.length).map(function(t){return new Array(Kr.BARS_IN_MODULE)}),t}(),mn=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(t){this.segmentIndex=t},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(t){this.fileId=t},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(t){this.optionalData=t},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(t){this.lastSegment=t},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(t){this.segmentCount=t},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(t){this.sender=t},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(t){this.addressee=t},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(t){this.fileName=t},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(t){this.fileSize=t},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(t){this.checksum=t},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(t){this.timestamp=t},t}(),An=function(){function t(){}return t.parseLong=function(t,e){return void 0===e&&(e=void 0),parseInt(t,e)},t}(),_n=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _n(e,t),e.kind="NullPointerException",e}(a),En=function(){function t(){}return t.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},t.prototype.writeBytesOffset=function(t,e,r){if(null==t)throw new Cn;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new m;if(0!==r)for(var n=0;n<r;n++)this.write(t[e+n])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),yn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),In=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yn(e,t),e}(a),Sn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vn=function(t){function e(e){void 0===e&&(e=32);var r=t.call(this)||this;if(r.count=0,e<0)throw new h("Negative initial size: "+e);return r.buf=new Uint8Array(e),r}return Sn(e,t),e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var e=this.buf.length<<1;if(e-t<0&&(e=t),e<0){if(t<0)throw new In;e=E.MAX_VALUE}this.buf=C.copyOfUint8Array(this.buf,e)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,e,r){if(e<0||e>t.length||r<0||e+r-t.length>0)throw new m;this.ensureCapacity(this.count+r),p.arraycopy(t,e,this.buf,this.count,r),this.count+=r},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return C.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?"string"==typeof t?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(En);function Tn(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function Rn(t){if(void 0===Pr&&(Pr=Tn()),null===Pr)throw new Error("BigInt is not supported!");return Pr(t)}!function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(Mr||(Mr={}));var On,Nn=function(){function t(){}return t.decode=function(e,r){var n=new B(""),o=N.ISO8859_1;n.enableDecoding(o);for(var i=1,a=e[i++],s=new mn;i<e[0];){switch(a){case t.TEXT_COMPACTION_MODE_LATCH:i=t.textCompaction(e,i,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:i=t.byteCompaction(a,e,o,i,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:i=t.numericCompaction(e,i,n);break;case t.ECI_CHARSET:N.getCharacterSetECIByValue(e[i++]);break;case t.ECI_GENERAL_PURPOSE:i+=2;break;case t.ECI_USER_DEFINED:i++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=t.decodeMacroBlock(e,i,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new T;default:i--,i=t.textCompaction(e,i,n)}if(!(i<e.length))throw T.getFormatInstance();a=e[i++]}if(0===n.length())throw T.getFormatInstance();var u=new rt(null,n.toString(),null,r);return u.setOther(s),u},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw T.getFormatInstance();for(var o=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<t.NUMBER_OF_SEQUENCE_CODEWORDS;i++,r++)o[i]=e[r];n.setSegmentIndex(E.parseInt(t.decodeBase900toBase10(o,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new B;r=t.textCompaction(e,r,a),n.setFileId(a.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new B;r=t.textCompaction(e,r+1,u),n.setFileName(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new B;r=t.textCompaction(e,r+1,c),n.setSender(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var h=new B;r=t.textCompaction(e,r+1,h),n.setAddressee(h.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var l=new B;r=t.numericCompaction(e,r+1,l),n.setSegmentCount(E.parseInt(l.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new B;r=t.numericCompaction(e,r+1,d),n.setTimestamp(An.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var f=new B;r=t.numericCompaction(e,r+1,f),n.setChecksum(E.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var g=new B;r=t.numericCompaction(e,r+1,g),n.setFileSize(An.parseLong(g.toString()));break;default:throw T.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw T.getFormatInstance()}if(-1!==s){var p=r-s;n.isLastSegment()&&p--,n.setOptionalData(C.copyOfRange(e,s,s+p))}return r},t.textCompaction=function(e,r,n){for(var o=new Int32Array(2*(e[0]-r)),i=new Int32Array(2*(e[0]-r)),a=0,s=!1;r<e[0]&&!s;){var u=e[r++];if(u<t.TEXT_COMPACTION_MODE_LATCH)o[a]=u/30,o[a+1]=u%30,a+=2;else switch(u){case t.TEXT_COMPACTION_MODE_LATCH:o[a++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[a]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[r++],i[a]=u,a++}}return t.decodeTextCompaction(o,i,a,n),r},t.decodeTextCompaction=function(e,r,n,o){for(var i=Mr.ALPHA,a=Mr.ALPHA,s=0;s<n;){var u=e[s],c="";switch(i){case Mr.ALPHA:if(u<26)c=String.fromCharCode(65+u);else switch(u){case 26:c=" ";break;case t.LL:i=Mr.LOWER;break;case t.ML:i=Mr.MIXED;break;case t.PS:a=i,i=Mr.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Mr.ALPHA}break;case Mr.LOWER:if(u<26)c=String.fromCharCode(97+u);else switch(u){case 26:c=" ";break;case t.AS:a=i,i=Mr.ALPHA_SHIFT;break;case t.ML:i=Mr.MIXED;break;case t.PS:a=i,i=Mr.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Mr.ALPHA}break;case Mr.MIXED:if(u<t.PL)c=t.MIXED_CHARS[u];else switch(u){case t.PL:i=Mr.PUNCT;break;case 26:c=" ";break;case t.LL:i=Mr.LOWER;break;case t.AL:i=Mr.ALPHA;break;case t.PS:a=i,i=Mr.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Mr.ALPHA}break;case Mr.PUNCT:if(u<t.PAL)c=t.PUNCT_CHARS[u];else switch(u){case t.PAL:i=Mr.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Mr.ALPHA}break;case Mr.ALPHA_SHIFT:if(i=a,u<26)c=String.fromCharCode(65+u);else switch(u){case 26:c=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:i=Mr.ALPHA}break;case Mr.PUNCT_SHIFT:if(i=a,u<t.PAL)c=t.PUNCT_CHARS[u];else switch(u){case t.PAL:i=Mr.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Mr.ALPHA}}""!==c&&o.append(c),s++}},t.byteCompaction=function(e,r,n,o,i){var a=new vn,s=0,u=0,c=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var h=new Int32Array(6),l=r[o++];o<r[0]&&!c;)switch(h[s++]=l,u=900*u+l,l=r[o++]){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:o--,c=!0;break;default:if(s%5==0&&s>0){for(var d=0;d<6;++d)a.write(Number(Rn(u)>>Rn(8*(5-d))));u=0,s=0}}o===r[0]&&l<t.TEXT_COMPACTION_MODE_LATCH&&(h[s++]=l);for(var f=0;f<s;f++)a.write(h[f]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;o<r[0]&&!c;){var g=r[o++];if(g<t.TEXT_COMPACTION_MODE_LATCH)s++,u=900*u+g;else switch(g){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:o--,c=!0}if(s%5==0&&s>0){for(d=0;d<6;++d)a.write(Number(Rn(u)>>Rn(8*(5-d))));u=0,s=0}}}return i.append(M.decode(a.toByteArray(),n)),o},t.numericCompaction=function(e,r,n){for(var o=0,i=!1,a=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!i;){var s=e[r++];if(r===e[0]&&(i=!0),s<t.TEXT_COMPACTION_MODE_LATCH)a[o]=s,o++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,i=!0}(o%t.MAX_NUMERIC_CODEWORDS==0||s===t.NUMERIC_COMPACTION_MODE_LATCH||i)&&o>0&&(n.append(t.decodeBase900toBase10(a,o)),o=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=Rn(0),o=0;o<r;o++)n+=t.EXP900[r-o-1]*Rn(e[o]);var i=n.toString();if("1"!==i.charAt(0))throw new T;return i.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",t.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",t.EXP900=Tn()?function(){var t=[];t[0]=Rn(1);var e=Rn(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),bn=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dn=function(){function t(){}return t.decode=function(e,r,n,o,i,a,s){for(var u,c=new on(e,r,n,o,i),h=null,l=null,d=!0;;d=!1){if(null!=r&&(h=t.getRowIndicatorColumn(e,c,r,!0,a,s)),null!=o&&(l=t.getRowIndicatorColumn(e,c,o,!1,a,s)),null==(u=t.merge(h,l)))throw k.getNotFoundInstance();var f=u.getBoundingBox();if(!d||null==f||!(f.getMinY()<c.getMinY()||f.getMaxY()>c.getMaxY()))break;c=f}u.setBoundingBox(c);var g=u.getBarcodeColumnCount()+1;u.setDetectionResultColumn(0,h),u.setDetectionResultColumn(g,l);for(var p=null!=h,w=1;w<=g;w++){var m=p?w:g-w;if(void 0===u.getDetectionResultColumn(m)){var A=void 0;A=0===m||m===g?new fn(c,0===m):new un(c),u.setDetectionResultColumn(m,A);for(var _=-1,C=_,E=c.getMinY();E<=c.getMaxY();E++){if((_=t.getStartColumn(u,m,E,p))<0||_>c.getMaxX()){if(-1===C)continue;_=C}var y=t.detectCodeword(e,c.getMinX(),c.getMaxX(),p,_,E,a,s);null!=y&&(A.setCodeword(E,y),C=_,a=Math.min(a,y.getWidth()),s=Math.max(s,y.getWidth()))}}}return t.createDecoderResult(u)},t.merge=function(e,r){if(null==e&&null==r)return null;var n=t.getBarcodeMetadata(e,r);if(null==n)return null;var o=on.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new gn(n,o)},t.adjustBoundingBox=function(e){var r,n;if(null==e)return null;var o=e.getRowHeights();if(null==o)return null;var i=t.getMax(o),a=0;try{for(var s=bn(o),u=s.next();!u.done;u=s.next()){var c=u.value;if(a+=i-c,c>0)break}}catch(f){r={error:f}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var h=e.getCodewords(),l=0;a>0&&null==h[l];l++)a--;var d=0;for(l=o.length-1;l>=0&&(d+=i-o[l],!(o[l]>0));l--);for(l=h.length-1;d>0&&null==h[l];l--)d--;return e.getBoundingBox().addMissingRows(a,d,e.isLeft())},t.getMax=function(t){var e,r,n=-1;try{for(var o=bn(t),i=o.next();!i.done;i=o.next())n=Math.max(n,i.value)}catch(a){e={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.getBarcodeMetadata=function(t,e){var r,n;return null==t||null==(r=t.getBarcodeMetadata())?null==e?null:e.getBarcodeMetadata():null==e||null==(n=e.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,r,n,o,i,a){for(var s=new fn(r,o),u=0;u<2;u++)for(var c=0===u?1:-1,h=Math.trunc(Math.trunc(n.getX())),l=Math.trunc(Math.trunc(n.getY()));l<=r.getMaxY()&&l>=r.getMinY();l+=c){var d=t.detectCodeword(e,0,e.getWidth(),o,h,l,i,a);null!=d&&(s.setCodeword(l,d),h=o?d.getStartX():d.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],o=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===o.length){if(i<1||i>Kr.MAX_CODEWORDS_IN_BARCODE)throw k.getNotFoundInstance();n.setValue(i)}else o[0]!==i&&n.setValue(i)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,o=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],a=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var u=0;u<e.getBarcodeColumnCount();u++){var c=r[s][u+1].getValue(),h=s*e.getBarcodeColumnCount()+u;0===c.length?n.push(h):1===c.length?o[h]=c[0]:(a.push(h),i.push(c))}for(var l=new Array(i.length),d=0;d<l.length;d++)l[d]=i[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),o,Kr.toIntArray(n),Kr.toIntArray(a),l)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,o,i){for(var a=new Int32Array(o.length),s=100;s-- >0;){for(var u=0;u<a.length;u++)r[o[u]]=i[u][a[u]];try{return t.decodeCodewords(r,e,n)}catch(c){if(!(c instanceof f))throw c}if(0===a.length)throw f.getChecksumInstance();for(u=0;u<a.length;u++){if(a[u]<i[u].length-1){a[u]++;break}if(a[u]=0,u===a.length-1)throw f.getChecksumInstance()}}throw f.getChecksumInstance()},t.createBarcodeMatrix=function(t){for(var e,r,n,o,i=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),a=0;a<i.length;a++)for(var s=0;s<i[a].length;s++)i[a][s]=new hn;var u=0;try{for(var c=bn(t.getDetectionResultColumns()),h=c.next();!h.done;h=c.next()){var l=h.value;if(null!=l)try{for(var d=(n=void 0,bn(l.getCodewords())),f=d.next();!f.done;f=d.next()){var g=f.value;if(null!=g){var p=g.getRowNumber();if(p>=0){if(p>=i.length)continue;i[p][u].setValue(g.getValue())}}}}catch(w){n={error:w}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}u++}}catch(m){e={error:m}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}return i},t.isValidBarcodeColumn=function(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,o){var i,a,s=o?1:-1,u=null;if(t.isValidBarcodeColumn(e,r-s)&&(u=e.getDetectionResultColumn(r-s).getCodeword(n)),null!=u)return o?u.getEndX():u.getStartX();if(null!=(u=e.getDetectionResultColumn(r).getCodewordNearby(n)))return o?u.getStartX():u.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(u=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),null!=u)return o?u.getEndX():u.getStartX();for(var c=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var h=(i=void 0,bn(e.getDetectionResultColumn(r).getCodewords())),l=h.next();!l.done;l=h.next()){var d=l.value;if(null!=d)return(o?d.getEndX():d.getStartX())+s*c*(d.getEndX()-d.getStartX())}}catch(f){i={error:f}}finally{try{l&&!l.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}c++}return o?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,o,i,a,s,u){i=t.adjustCodewordStartColumn(e,r,n,o,i,a);var c,h=t.getModuleBitCount(e,r,n,o,i,a);if(null==h)return null;var l=mt.sum(h);if(o)c=i+l;else{for(var d=0;d<h.length/2;d++){var f=h[d];h[d]=h[h.length-1-d],h[h.length-1-d]=f}i=(c=i)-l}if(!t.checkCodewordSkew(l,s,u))return null;var g=wn.getDecodedValue(h),p=Kr.getCodeword(g);return-1===p?null:new pn(i,c,t.getCodewordBucketNumber(g),p)},t.getModuleBitCount=function(t,e,r,n,o,i){for(var a=o,s=new Int32Array(8),u=0,c=n?1:-1,h=n;(n?a<r:a>=e)&&u<s.length;)t.get(a,i)===h?(s[u]++,a+=c):(u++,h=!h);return u===s.length||a===(n?r:e)&&u===s.length-1?s:null},t.getNumberOfECCodeWords=function(t){return 2<<t},t.adjustCodewordStartColumn=function(e,r,n,o,i,a){for(var s=i,u=o?-1:1,c=0;c<2;c++){for(;(o?s>=r:s<n)&&o===e.get(s,a);){if(Math.abs(i-s)>t.CODEWORD_SKEW_SIZE)return i;s+=u}u=-u,o=!o}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(0===e.length)throw T.getFormatInstance();var o=1<<r+1,i=t.correctErrors(e,n,o);t.verifyCodewordCount(e,o);var a=Nn.decode(e,""+r);return a.setErrorsCorrected(i),a.setErasures(n.length),a},t.correctErrors=function(e,r,n){if(null!=r&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw f.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(t,e){if(t.length<4)throw T.getFormatInstance();var r=t[0];if(r>t.length)throw T.getFormatInstance();if(0===r){if(!(e<t.length))throw T.getFormatInstance();t[0]=t.length-e}},t.getBitCountForCodeword=function(t){for(var e=new Int32Array(8),r=0,n=e.length-1;!((1&t)!==r&&(r=1&t,--n<0));)e[n]++,t>>=1;return e},t.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},t.toString=function(t){for(var e=new sn,r=0;r<t.length;r++){e.format("Row %2d: ",r);for(var n=0;n<t[r].length;n++){var o=t[r][n];0===o.getValue().length?e.format("        ",null):e.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}e.format("%n")}return e.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new nn,t}(),Mn=function(){function t(){}return t.prototype.decode=function(e,r){void 0===r&&(r=null);var n=t.decode(e,r,!1);if(null==n||0===n.length||null==n[0])throw k.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){void 0===r&&(r=null);try{return t.decode(e,r,!0)}catch(n){if(n instanceof T||n instanceof f)throw k.getNotFoundInstance();throw n}},t.decode=function(e,r,n){var o,i,a=new Array,s=Jr.detectMultiple(e,r,n);try{for(var u=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(s.getPoints()),c=u.next();!c.done;c=u.next()){var h=c.value,l=Dn.decode(s.getBits(),h[4],h[5],h[6],h[7],t.getMinCodewordWidth(h),t.getMaxCodewordWidth(h)),d=new Q(l.getText(),l.getRawBytes(),void 0,h,$.PDF_417);d.putMetadata(et.ERROR_CORRECTION_LEVEL,l.getECLevel());var f=l.getOther();null!=f&&d.putMetadata(et.PDF417_EXTRA_METADATA,f),a.push(d)}}catch(g){o={error:g}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return a.map(function(t){return t})},t.getMaxWidth=function(t,e){return null==t||null==e?0:Math.trunc(Math.abs(t.getX()-e.getX()))},t.getMinWidth=function(t,e){return null==t||null==e?E.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Kr.MODULES_IN_CODEWORD/Kr.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Kr.MODULES_IN_CODEWORD/Kr.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Kr.MODULES_IN_CODEWORD/Kr.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Kr.MODULES_IN_CODEWORD/Kr.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),Pn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pn(e,t),e.kind="ReaderException",e}(a),Ln=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fn=function(){function t(){}return t.prototype.decode=function(t,e){return this.setHints(e),this.decodeInternal(t)},t.prototype.decodeWithState=function(t){return null==this.readers&&this.setHints(null),this.decodeInternal(t)},t.prototype.setHints=function(t){this.hints=t;var e=null!=t&&void 0!==t.get(S.TRY_HARDER),r=null==t?null:t.get(S.POSSIBLE_FORMATS),n=new Array;if(null!=r){var o=r.some(function(t){return t===$.UPC_A||t===$.UPC_E||t===$.EAN_13||t===$.EAN_8||t===$.CODABAR||t===$.CODE_39||t===$.CODE_93||t===$.CODE_128||t===$.ITF||t===$.RSS_14||t===$.RSS_EXPANDED});o&&!e&&n.push(new or(t)),r.includes($.QR_CODE)&&n.push(new jr),r.includes($.DATA_MATRIX)&&n.push(new Ar),r.includes($.AZTEC)&&n.push(new Dt),r.includes($.PDF_417)&&n.push(new Mn),o&&e&&n.push(new or(t))}0===n.length&&(e||n.push(new or(t)),n.push(new jr),n.push(new Ar),n.push(new Dt),n.push(new Mn),e&&n.push(new or(t))),this.readers=n},t.prototype.reset=function(){var t,e;if(null!==this.readers)try{for(var r=Ln(this.readers),n=r.next();!n.done;n=r.next())n.value.reset()}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.decodeInternal=function(t){var e,r;if(null===this.readers)throw new Bn("No readers where selected, nothing can be read.");try{for(var n=Ln(this.readers),o=n.next();!o.done;o=n.next()){var i=o.value;try{return i.decode(t,this.hints)}catch(a){if(a instanceof Bn)continue}}}catch(s){e={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}throw new k("No MultiFormat Readers were able to detect the code.")},t}(),kn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xn=(function(t){function e(e,r){void 0===e&&(e=null),void 0===r&&(r=500);var n=new Fn;return n.setHints(e),t.call(this,n,r)||this}kn(e,t),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)}}(q),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),Vn=(function(t){xn(function(e){return void 0===e&&(e=500),t.call(this,new Mn,e)||this},t)}(q),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}());!function(t){Vn(function(e){return void 0===e&&(e=500),t.call(this,new jr,e)||this},t)}(q),function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.MIN_SIZE=3]="MIN_SIZE",t[t.MAX_SIZE=4]="MAX_SIZE",t[t.MARGIN=5]="MARGIN",t[t.PDF417_COMPACT=6]="PDF417_COMPACT",t[t.PDF417_COMPACTION=7]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=9]="AZTEC_LAYERS",t[t.QR_VERSION=10]="QR_VERSION"}(On||(On={}));var Un=On,Hn=function(){function t(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new ot(t,Int32Array.from([1])))}return t.prototype.buildGenerator=function(t){var e=this.cachedGenerators;if(t>=e.length)for(var r=e[e.length-1],n=this.field,o=e.length;o<=t;o++){var i=r.multiply(new ot(n,Int32Array.from([1,n.exp(o-1+n.getGeneratorBase())])));e.push(i),r=i}return e[t]},t.prototype.encode=function(t,e){if(0===e)throw new h("No error correction bytes");var r=t.length-e;if(r<=0)throw new h("No data bytes provided");var n=this.buildGenerator(e),o=new Int32Array(r);p.arraycopy(t,0,o,0,r);for(var i=new ot(this.field,o),a=(i=i.multiplyByMonomial(e,1)).divide(n)[1].getCoefficients(),s=e-a.length,u=0;u<s;u++)t[r+u]=0;p.arraycopy(a,0,t,r+s,a.length)},t}(),Gn=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),i=e.getHeight(),a=0;a<i-1;a++)for(var s=n[a],u=0;u<o-1;u++){var c=s[u];c===s[u+1]&&c===n[a+1][u]&&c===n[a+1][u+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),i=e.getHeight(),a=0;a<i;a++)for(var s=0;s<o;s++){var u=n[a];s+6<o&&1===u[s]&&0===u[s+1]&&1===u[s+2]&&1===u[s+3]&&1===u[s+4]&&0===u[s+5]&&1===u[s+6]&&(t.isWhiteHorizontal(u,s-4,s)||t.isWhiteHorizontal(u,s+7,s+11))&&r++,a+6<i&&1===n[a][s]&&0===n[a+1][s]&&1===n[a+2][s]&&1===n[a+3][s]&&1===n[a+4][s]&&0===n[a+5][s]&&1===n[a+6][s]&&(t.isWhiteVertical(n,s,a-4,a)||t.isWhiteVertical(n,s,a+7,a+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(var n=e;n<r;n++)if(1===t[n])return!1;return!0},t.isWhiteVertical=function(t,e,r,n){r=Math.max(r,0),n=Math.min(n,t.length);for(var o=r;o<n;o++)if(1===t[o][e])return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),i=e.getHeight(),a=0;a<i;a++)for(var s=n[a],u=0;u<o;u++)1===s[u]&&r++;var c=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*r-c)/c)*t.N4},t.getDataMaskBit=function(t,e,r){var n,o;switch(t){case 0:n=r+e&1;break;case 1:n=1&r;break;case 2:n=e%3;break;case 3:n=(r+e)%3;break;case 4:n=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:n=(1&(o=r*e))+o%3;break;case 6:n=(1&(o=r*e))+o%3&1;break;case 7:n=(o=r*e)%3+(r+e&1)&1;break;default:throw new h("Invalid mask pattern: "+t)}return 0===n},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,o=r?e.getHeight():e.getWidth(),i=r?e.getWidth():e.getHeight(),a=e.getArray(),s=0;s<o;s++){for(var u=0,c=-1,h=0;h<i;h++){var l=r?a[s][h]:a[h][s];l===c?u++:(u>=5&&(n+=t.N1+(u-5)),u=1,c=l)}u>=5&&(n+=t.N1+(u-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),Xn=function(){function t(t,e){this.width=t,this.height=e;for(var r=new Array(e),n=0;n!==e;n++)r[n]=new Uint8Array(t);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(t,e){return this.bytes[e][t]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(t,e,r){this.bytes[e][t]=r},t.prototype.setBoolean=function(t,e,r){this.bytes[e][t]=r?1:0},t.prototype.clear=function(t){var e,r;try{for(var n=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.bytes),o=n.next();!o.done;o=n.next())C.fill(o.value,t)}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width)return!1;if(this.height!==r.height)return!1;for(var n=0,o=this.height;n<o;++n)for(var i=this.bytes[n],a=r.bytes[n],s=0,u=this.width;s<u;++s)if(i[s]!==a[s])return!1;return!0},t.prototype.toString=function(){for(var t=new B,e=0,r=this.height;e<r;++e){for(var n=this.bytes[e],o=0,i=this.width;o<i;++o)switch(n[o]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ")}t.append("\n")}return t.toString()},t}(),Wn=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var t=new B;return t.append("<<\n"),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append("\n ecLevel: "),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append("\n version: "),t.append(this.version?this.version.toString():"null"),t.append("\n maskPattern: "),t.append(this.maskPattern.toString()),this.matrix?(t.append("\n matrix:\n"),t.append(this.matrix.toString())):t.append("\n matrix: null\n"),t.append(">>\n"),t.toString()},t.prototype.setMode=function(t){this.mode=t},t.prototype.setECLevel=function(t){this.ecLevel=t},t.prototype.setVersion=function(t){this.version=t},t.prototype.setMaskPattern=function(t){this.maskPattern=t},t.prototype.setMatrix=function(t){this.matrix=t},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),zn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zn(e,t),e.kind="WriterException",e}(a),Zn=function(){function t(){}return t.clearMatrix=function(t){t.clear(255)},t.buildMatrix=function(e,r,n,o,i){t.clearMatrix(i),t.embedBasicPatterns(n,i),t.embedTypeInfo(r,o,i),t.maybeEmbedVersionInfo(n,i),t.embedDataBits(e,o,i)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var o=new y;t.makeTypeInfoBits(e,r,o);for(var i=0,a=o.getSize();i<a;++i){var s=o.get(o.getSize()-1-i),u=t.TYPE_INFO_COORDINATES[i];if(n.setBoolean(u[0],u[1],s),i<8){var c=n.getWidth()-i-1;n.setBoolean(c,h=8,s)}else{c=8;var h=n.getHeight()-7+(i-8);n.setBoolean(c,h,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new y;t.makeVersionInfoBits(e,n);for(var o=17,i=0;i<6;++i)for(var a=0;a<3;++a){var s=n.get(o);o--,r.setBoolean(i,r.getHeight()-11+a,s),r.setBoolean(r.getHeight()-11+a,i,s)}}},t.embedDataBits=function(e,r,n){for(var o=0,i=-1,a=n.getWidth()-1,s=n.getHeight()-1;a>0;){for(6===a&&(a-=1);s>=0&&s<n.getHeight();){for(var u=0;u<2;++u){var c=a-u;if(t.isEmpty(n.get(c,s))){var h=void 0;o<e.getSize()?(h=e.get(o),++o):h=!1,255!==r&&Gn.getDataMaskBit(r,c,s)&&(h=!h),n.setBoolean(c,s,h)}}s+=i}s+=i=-i,a-=2}if(o!==e.getSize())throw new Yn("Not all bits consumed: "+o+"/"+e.getSize())},t.findMSBSet=function(t){return 32-E.numberOfLeadingZeros(t)},t.calculateBCHCode=function(e,r){if(0===r)throw new h("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Wn.isValidMaskPattern(r))throw new Yn("Invalid mask pattern");var o=e.getBits()<<3|r;n.appendBits(o,5);var i=t.calculateBCHCode(o,t.TYPE_INFO_POLY);n.appendBits(i,10);var a=new y;if(a.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(a),15!==n.getSize())throw new Yn("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),18!==r.getSize())throw new Yn("should not happen but we got: "+r.getSize())},t.isEmpty=function(t){return 255===t},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(t){if(0===t.get(8,t.getHeight()-8))throw new Yn;t.setNumber(8,t.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var o=0;o<8;++o){if(!t.isEmpty(n.get(e+o,r)))throw new Yn;n.setNumber(e+o,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var o=0;o<7;++o){if(!t.isEmpty(n.get(e,r+o)))throw new Yn;n.setNumber(e,r+o,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var o=0;o<5;++o)for(var i=t.POSITION_ADJUSTMENT_PATTERN[o],a=0;a<5;++a)n.setNumber(e+a,r+o,i[a])},t.embedPositionDetectionPattern=function(e,r,n){for(var o=0;o<7;++o)for(var i=t.POSITION_DETECTION_PATTERN[o],a=0;a<7;++a)n.setNumber(e+a,r+o,i[a])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e),t.embedHorizontalSeparationPattern(0,7,e),t.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-8,e),t.embedVerticalSeparationPattern(7,0,e),t.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),t.embedVerticalSeparationPattern(7,e.getHeight()-7,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,o=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,a=o.length;i!==a;i++){var s=o[i];if(s>=0)for(var u=0;u!==a;u++){var c=o[u];c>=0&&t.isEmpty(r.get(c,s))&&t.embedPositionAdjustmentPattern(c-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),jn=function(){function t(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),Kn=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qn=function(){function t(){}return t.calculateMaskPenalty=function(t){return Gn.applyMaskPenaltyRule1(t)+Gn.applyMaskPenaltyRule2(t)+Gn.applyMaskPenaltyRule3(t)+Gn.applyMaskPenaltyRule4(t)},t.encode=function(e,r,n){void 0===n&&(n=null);var o=t.DEFAULT_BYTE_MODE_ENCODING,i=null!==n&&void 0!==n.get(Un.CHARACTER_SET);i&&(o=n.get(Un.CHARACTER_SET).toString());var a=this.chooseMode(e,o),s=new y;if(a===Br.BYTE&&(i||t.DEFAULT_BYTE_MODE_ENCODING!==o)){var u=N.getCharacterSetECIByName(o);void 0!==u&&this.appendECI(u,s)}this.appendModeInfo(a,s);var c,h=new y;if(this.appendBytes(e,a,h,o),null!==n&&void 0!==n.get(Un.QR_VERSION)){var l=Number.parseInt(n.get(Un.QR_VERSION).toString(),10);c=Tr.getVersionForNumber(l);var d=this.calculateBitsNeeded(a,s,h,c);if(!this.willFit(d,c,r))throw new Yn("Data too big for requested version")}else c=this.recommendVersion(r,a,s,h);var f=new y;f.appendBitArray(s);var g=a===Br.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(g,c,a,f),f.appendBitArray(h);var p=c.getECBlocksForLevel(r),w=c.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(w,f);var m=this.interleaveWithECBytes(f,c.getTotalCodewords(),w,p.getNumBlocks()),A=new Wn;A.setECLevel(r),A.setMode(a),A.setVersion(c);var _=c.getDimensionForVersion(),C=new Xn(_,_),E=this.chooseMaskPattern(m,r,c,C);return A.setMaskPattern(E),Zn.buildMatrix(m,r,c,E,C),A.setMatrix(C),A},t.recommendVersion=function(t,e,r,n){var o=this.calculateBitsNeeded(e,r,n,Tr.getVersionForNumber(1)),i=this.chooseVersion(o,t),a=this.calculateBitsNeeded(e,r,n,i);return this.chooseVersion(a,t)},t.calculateBitsNeeded=function(t,e,r,n){return e.getSize()+t.getCharacterCountBits(n)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(void 0===r&&(r=null),N.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Br.KANJI;for(var n=!1,o=!1,i=0,a=e.length;i<a;++i){var s=e.charAt(i);if(t.isDigit(s))n=!0;else{if(-1===this.getAlphanumericCode(s.charCodeAt(0)))return Br.BYTE;o=!0}}return o?Br.ALPHANUMERIC:n?Br.NUMERIC:Br.BYTE},t.isOnlyDoubleByteKanji=function(t){var e;try{e=M.encode(t,N.SJIS)}catch(i){return!1}var r=e.length;if(r%2!=0)return!1;for(var n=0;n<r;n+=2){var o=255&e[n];if((o<129||o>159)&&(o<224||o>235))return!1}return!0},t.chooseMaskPattern=function(t,e,r,n){for(var o=Number.MAX_SAFE_INTEGER,i=-1,a=0;a<Wn.NUM_MASK_PATTERNS;a++){Zn.buildMatrix(t,e,r,a,n);var s=this.calculateMaskPenalty(n);s<o&&(o=s,i=a)}return i},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var o=Tr.getVersionForNumber(n);if(t.willFit(e,o,r))return o}throw new Yn("Data too big")},t.willFit=function(t,e,r){return e.getTotalCodewords()-e.getECBlocksForLevel(r).getTotalECCodewords()>=(t+7)/8},t.terminateBits=function(t,e){var r=8*t;if(e.getSize()>r)throw new Yn("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(var n=0;n<4&&e.getSize()<r;++n)e.appendBit(!1);var o=7&e.getSize();if(o>0)for(n=o;n<8;n++)e.appendBit(!1);var i=t-e.getSizeInBytes();for(n=0;n<i;++n)e.appendBits(0==(1&n)?236:17,8);if(e.getSize()!==r)throw new Yn("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(t,e,r,n,o,i){if(n>=r)throw new Yn("Block ID too large");var a=t%r,s=r-a,u=Math.floor(t/r),c=u+1,h=Math.floor(e/r),l=h+1,d=u-h,f=c-l;if(d!==f)throw new Yn("EC bytes mismatch");if(r!==s+a)throw new Yn("RS blocks mismatch");if(t!==(h+d)*s+(l+f)*a)throw new Yn("Total bytes mismatch");n<s?(o[0]=h,i[0]=d):(o[0]=l,i[0]=f)},t.interleaveWithECBytes=function(e,r,n,o){var i,a,s,u;if(e.getSizeInBytes()!==n)throw new Yn("Number of bits and data bytes does not match");for(var c=0,h=0,l=0,d=new Array,f=0;f<o;++f){var g=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,o,f,g,p);var w=g[0],m=new Uint8Array(w);e.toBytes(8*c,m,0,w);var A=t.generateECBytes(m,p[0]);d.push(new jn(m,A)),h=Math.max(h,w),l=Math.max(l,A.length),c+=g[0]}if(n!==c)throw new Yn("Data bytes does not match offset");var _=new y;for(f=0;f<h;++f)try{for(var C=(i=void 0,Kn(d)),E=C.next();!E.done;E=C.next())f<(m=E.value.getDataBytes()).length&&_.appendBits(m[f],8)}catch(v){i={error:v}}finally{try{E&&!E.done&&(a=C.return)&&a.call(C)}finally{if(i)throw i.error}}for(f=0;f<l;++f)try{for(var I=(s=void 0,Kn(d)),S=I.next();!S.done;S=I.next())f<(A=S.value.getErrorCorrectionBytes()).length&&_.appendBits(A[f],8)}catch(T){s={error:T}}finally{try{S&&!S.done&&(u=I.return)&&u.call(I)}finally{if(s)throw s.error}}if(r!==_.getSizeInBytes())throw new Yn("Interleaving error: "+r+" and "+_.getSizeInBytes()+" differ.");return _},t.generateECBytes=function(t,e){for(var r=t.length,n=new Int32Array(r+e),o=0;o<r;o++)n[o]=255&t[o];new Hn(ut.QR_CODE_FIELD_256).encode(n,e);var i=new Uint8Array(e);for(o=0;o<e;o++)i[o]=n[r+o];return i},t.appendModeInfo=function(t,e){e.appendBits(t.getBits(),4)},t.appendLengthInfo=function(t,e,r,n){var o=r.getCharacterCountBits(e);if(t>=1<<o)throw new Yn(t+" is bigger than "+((1<<o)-1));n.appendBits(t,o)},t.appendBytes=function(e,r,n,o){switch(r){case Br.NUMERIC:t.appendNumericBytes(e,n);break;case Br.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Br.BYTE:t.append8BitBytes(e,n,o);break;case Br.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Yn("Invalid mode: "+r)}},t.getDigit=function(t){return t.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,o=0;o<n;){var i=t.getDigit(e.charAt(o));if(o+2<n){var a=t.getDigit(e.charAt(o+1)),s=t.getDigit(e.charAt(o+2));r.appendBits(100*i+10*a+s,10),o+=3}else o+1<n?(a=t.getDigit(e.charAt(o+1)),r.appendBits(10*i+a,7),o+=2):(r.appendBits(i,4),o++)}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,o=0;o<n;){var i=t.getAlphanumericCode(e.charCodeAt(o));if(-1===i)throw new Yn;if(o+1<n){var a=t.getAlphanumericCode(e.charCodeAt(o+1));if(-1===a)throw new Yn;r.appendBits(45*i+a,11),o+=2}else r.appendBits(i,6),o++}},t.append8BitBytes=function(t,e,r){var n;try{n=M.encode(t,r)}catch(a){throw new Yn(a)}for(var o=0,i=n.length;o!==i;o++)e.appendBits(n[o],8)},t.appendKanjiBytes=function(t,e){var r;try{r=M.encode(t,N.SJIS)}catch(s){throw new Yn(s)}for(var n=r.length,o=0;o<n;o+=2){var i=(255&r[o])<<8&4294967295|255&r[o+1],a=-1;if(i>=33088&&i<=40956?a=i-33088:i>=57408&&i<=60351&&(a=i-49472),-1===a)throw new Yn("Invalid byte sequence");e.appendBits(192*(a>>8)+(255&a),13)}},t.appendECI=function(t,e){e.appendBits(Br.ECI.getBits(),4),e.appendBits(t.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=N.UTF8.getName(),t}(),Qn=(function(){function t(){}t.prototype.encode=function(e,r,n,o,i){if(0===e.length)throw new h("Found empty contents");if(r!==$.QR_CODE)throw new h("Can only encode QR_CODE, but got "+r);if(n<0||o<0)throw new h("Requested dimensions are too small: "+n+"x"+o);var a=Er.L,s=t.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(Un.ERROR_CORRECTION)&&(a=Er.fromString(i.get(Un.ERROR_CORRECTION).toString())),void 0!==i.get(Un.MARGIN)&&(s=Number.parseInt(i.get(Un.MARGIN).toString(),10)));var u=qn.encode(e,a,i);return t.renderResult(u,n,o,s)},t.renderResult=function(t,e,r,n){var o=t.getMatrix();if(null===o)throw new dt;for(var i=o.getWidth(),a=o.getHeight(),s=i+2*n,u=a+2*n,c=Math.max(e,s),h=Math.max(r,u),l=Math.min(Math.floor(c/s),Math.floor(h/u)),d=Math.floor((c-i*l)/2),f=Math.floor((h-a*l)/2),g=new L(c,h),p=0,w=f;p<a;p++,w+=l)for(var m=0,A=d;m<i;m++,A+=l)1===o.get(m,p)&&g.setRegion(A,w,l,l);return g},t.QUIET_ZONE_SIZE=4}(),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),Jn=(function(t){function e(e,r,n,o,i,a,s,u){var c=t.call(this,a,s)||this;if(c.yuvData=e,c.dataWidth=r,c.dataHeight=n,c.left=o,c.top=i,o+a>r||i+s>n)throw new h("Crop rectangle does not fit within image data.");return u&&c.reverseHorizontal(a,s),c}Qn(e,t),e.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new h("Requested row is outside the image: "+t);var r=this.getWidth();return(null==e||e.length<r)&&(e=new Uint8ClampedArray(r)),p.arraycopy(this.yuvData,(t+this.top)*this.dataWidth+this.left,e,0,r),e},e.prototype.getMatrix=function(){var t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.yuvData;var r=t*e,n=new Uint8ClampedArray(r),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return p.arraycopy(this.yuvData,o,n,0,r),n;for(var i=0;i<e;i++)p.arraycopy(this.yuvData,o,n,i*t,t),o+=this.dataWidth;return n},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,n,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,n,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(t*r),o=this.yuvData,i=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var s=a*t,u=0;u<t;u++)n[s+u]=4278190080|65793*(255&o[i+u*e.THUMBNAIL_SCALE_FACTOR]);i+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return n},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,e){for(var r=this.yuvData,n=0,o=this.top*this.dataWidth+this.left;n<e;n++,o+=this.dataWidth)for(var i=o+t/2,a=o,s=o+t-1;a<i;a++,s--){var u=r[a];r[a]=r[s],r[s]=u}},e.prototype.invert=function(){return new W(this)},e.THUMBNAIL_SCALE_FACTOR=2}(G),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),$n=(function(t){function e(e,r,n,o,i,a,s){var u=t.call(this,r,n)||this;if(u.dataWidth=o,u.dataHeight=i,u.left=a,u.top=s,4===e.BYTES_PER_ELEMENT){for(var c=r*n,l=new Uint8ClampedArray(c),d=0;d<c;d++){var f=e[d];l[d]=((f>>16&255)+(f>>7&510)+(255&f))/4&255}u.luminances=l}else u.luminances=e;if(void 0===o&&(u.dataWidth=r),void 0===i&&(u.dataHeight=n),void 0===a&&(u.left=0),void 0===s&&(u.top=0),u.left+r>u.dataWidth||u.top+n>u.dataHeight)throw new h("Crop rectangle does not fit within image data.");return u}Jn(e,t),e.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new h("Requested row is outside the image: "+t);var r=this.getWidth();return(null==e||e.length<r)&&(e=new Uint8ClampedArray(r)),p.arraycopy(this.luminances,(t+this.top)*this.dataWidth+this.left,e,0,r),e},e.prototype.getMatrix=function(){var t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.luminances;var r=t*e,n=new Uint8ClampedArray(r),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return p.arraycopy(this.luminances,o,n,0,r),n;for(var i=0;i<e;i++)p.arraycopy(this.luminances,o,n,i*t,t),o+=this.dataWidth;return n},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,n,o){return new e(this.luminances,n,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new W(this)}}(G),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),to=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $n(e,t),e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(N),eo=function(){function t(){}return t.ISO_8859_1=N.ISO8859_1,t}(),ro=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(t){this.compact=t},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(t){this.size=t},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(t){this.layers=t},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(t){this.codeWords=t},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(t){this.matrix=t},t}(),no=function(){function t(){}return t.singletonList=function(t){return[t]},t.min=function(t,e){return t.sort(e)[0]},t}(),oo=function(){function t(t){this.previous=t}return t.prototype.getPrevious=function(){return this.previous},t}(),io=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ao=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.value=r,o.bitCount=n,o}return io(e,t),e.prototype.appendTo=function(t,e){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return"<"+E.toBinaryString((t|=1<<this.bitCount)|1<<this.bitCount).substring(1)+">"},e}(oo),so=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uo=function(t){function e(e,r,n){var o=t.call(this,e,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=n,o}return so(e,t),e.prototype.appendTo=function(t,e){for(var r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):t.appendBits(0===r?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),t.appendBits(e[this.binaryShiftStart+r],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(ao);function co(t,e,r){return new ao(t,e,r)}var ho=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],lo=new ao(null,0,0),fo=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],go=function(t){var e,r;try{for(var n=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),o=n.next();!o.done;o=n.next())C.fill(o.value,-1)}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[0][4]=0,t[1][4]=0,t[1][0]=28,t[3][4]=0,t[2][4]=0,t[2][0]=15,t}(C.createInt32Array(6,6)),po=function(){function t(t,e,r,n){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=n}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,o=this.token;if(e!==this.mode){var i=fo[this.mode][e];o=co(o,65535&i,i>>16),n+=i>>16}var a=2===e?4:5;return new t(o=co(o,r,a),e,0,n+a)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,o=2===this.mode?4:5;return n=co(n,go[this.mode][e],o),new t(n=co(n,r,5),this.mode,0,this.bitCount+o+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,o=this.bitCount;if(4===this.mode||2===this.mode){var i=fo[n][0];r=co(r,65535&i,i>>16),o+=i>>16,n=0}var a=new t(r,n,this.binaryShiftByteCount+1,o+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===a.binaryShiftByteCount&&(a=a.endBinaryShift(e+1)),a},t.prototype.endBinaryShift=function(e){if(0===this.binaryShiftByteCount)return this;var r=this.token;return new t(r=function(t,e,r){return new uo(t,e,r)}(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(fo[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(t){for(var e,r,n=[],o=this.endBinaryShift(t.length).token;null!==o;o=o.getPrevious())n.unshift(o);var i=new y;try{for(var a=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),s=a.next();!s.done;s=a.next())s.value.appendTo(i,t)}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},t.prototype.toString=function(){return P.format("%s bits=%d bytes=%d",ho[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(lo,0,0,0),t}(),wo=function(t){var e=P.getCharCode(" "),r=P.getCharCode("."),n=P.getCharCode(",");t[0][e]=1;for(var o=P.getCharCode("Z"),i=P.getCharCode("A"),a=i;a<=o;a++)t[0][a]=a-i+2;t[1][e]=1;var s=P.getCharCode("z"),u=P.getCharCode("a");for(a=u;a<=s;a++)t[1][a]=a-u+2;t[2][e]=1;var c=P.getCharCode("9"),h=P.getCharCode("0");for(a=h;a<=c;a++)t[2][a]=a-h+2;t[2][n]=12,t[2][r]=13;for(var l=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],d=0;d<l.length;d++)t[3][P.getCharCode(l[d])]=d;var f=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(d=0;d<f.length;d++)P.getCharCode(f[d])>0&&(t[4][P.getCharCode(f[d])]=d);return t}(C.createInt32Array(5,256)),mo=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ao=function(){function t(t){this.text=t}return t.prototype.encode=function(){for(var e=P.getCharCode(" "),r=P.getCharCode("\n"),n=no.singletonList(po.INITIAL_STATE),o=0;o<this.text.length;o++){var i=void 0,a=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case P.getCharCode("\r"):i=a===r?2:0;break;case P.getCharCode("."):i=a===e?3:0;break;case P.getCharCode(","):i=a===e?4:0;break;case P.getCharCode(":"):i=a===e?5:0;break;default:i=0}i>0?(n=t.updateStateListForPair(n,o,i),o++):n=this.updateStateListForChar(n,o)}return no.min(n,function(t,e){return t.getBitCount()-e.getBitCount()}).toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,o,i=[];try{for(var a=mo(e),s=a.next();!s.done;s=a.next())this.updateStateForChar(s.value,r,i)}catch(u){n={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return t.simplifyStates(i)},t.prototype.updateStateForChar=function(t,e,r){for(var n=255&this.text[e],o=wo[t.getMode()][n]>0,i=null,a=0;a<=4;a++){var s=wo[a][n];if(s>0){if(null==i&&(i=t.endBinaryShift(e)),!o||a===t.getMode()||2===a){var u=i.latchAndAppend(a,s);r.push(u)}if(!o&&go[t.getMode()][a]>=0){var c=i.shiftAndAppend(a,s);r.push(c)}}}if(t.getBinaryShiftByteCount()>0||0===wo[t.getMode()][n]){var h=t.addBinaryShiftChar(e);r.push(h)}},t.updateStateListForPair=function(t,e,r){var n,o,i=[];try{for(var a=mo(t),s=a.next();!s.done;s=a.next())this.updateStateForPair(s.value,e,r,i)}catch(u){n={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return this.simplifyStates(i)},t.updateStateForPair=function(t,e,r,n){var o=t.endBinaryShift(e);if(n.push(o.latchAndAppend(4,r)),4!==t.getMode()&&n.push(o.shiftAndAppend(4,r)),3===r||4===r){var i=o.latchAndAppend(2,16-r).latchAndAppend(2,1);n.push(i)}if(t.getBinaryShiftByteCount()>0){var a=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);n.push(a)}},t.simplifyStates=function(t){var e,r,n,o,i=[];try{for(var a=mo(t),s=a.next();!s.done;s=a.next()){var u=s.value,c=!0,h=function(t){if(t.isBetterThanOrEqualTo(u))return c=!1,"break";u.isBetterThanOrEqualTo(t)&&(i=i.filter(function(e){return e!==t}))};try{for(var l=(n=void 0,mo(i)),d=l.next();!d.done&&"break"!==h(d.value);d=l.next());}catch(f){n={error:f}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}c&&i.push(u)}}catch(g){e={error:g}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},t}(),_o=function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var o,i,a,s,u,c=new Ao(e).encode(),l=E.truncDivision(c.getSize()*r,100)+11,d=c.getSize()+l;if(n!==t.DEFAULT_AZTEC_LAYERS){if(o=n<0,(i=Math.abs(n))>(o?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new h(P.format("Illegal value %s for layers",n));var f=(a=t.totalBitsInLayer(i,o))-a%(s=t.WORD_SIZE[i]);if((u=t.stuffBits(c,s)).getSize()+l>f)throw new h("Data to large for user specified layer");if(o&&u.getSize()>64*s)throw new h("Data to large for user specified layer")}else{s=0,u=null;for(var g=0;;g++){if(g>t.MAX_NB_BITS)throw new h("Data too large for an Aztec code");if(!(d>(a=t.totalBitsInLayer(i=(o=g<=3)?g+1:g,o)))&&(null!=u&&s===t.WORD_SIZE[i]||(u=t.stuffBits(c,s=t.WORD_SIZE[i])),f=a-a%s,!(o&&u.getSize()>64*s)&&u.getSize()+l<=f))break}}var p,w=t.generateCheckWords(u,a,s),m=u.getSize()/s,A=t.generateModeMessage(o,i,m),_=(o?11:14)+4*i,C=new Int32Array(_);if(o)for(p=_,g=0;g<C.length;g++)C[g]=g;else{p=_+1+2*E.truncDivision(E.truncDivision(_,2)-1,15);var y=E.truncDivision(_,2),I=E.truncDivision(p,2);for(g=0;g<y;g++){var S=g+E.truncDivision(g,15);C[y-g-1]=I-S-1,C[y+g]=I+S+1}}for(var v=new L(p),T=(g=0,0);g<i;g++){for(var R=4*(i-g)+(o?9:12),O=0;O<R;O++)for(var N=2*O,b=0;b<2;b++)w.get(T+N+b)&&v.set(C[2*g+b],C[2*g+O]),w.get(T+2*R+N+b)&&v.set(C[2*g+O],C[_-1-2*g-b]),w.get(T+4*R+N+b)&&v.set(C[_-1-2*g-b],C[_-1-2*g-O]),w.get(T+6*R+N+b)&&v.set(C[_-1-2*g-O],C[2*g+b]);T+=8*R}if(t.drawModeMessage(v,o,p,A),o)t.drawBullsEye(v,E.truncDivision(p,2),5);else for(t.drawBullsEye(v,E.truncDivision(p,2),7),g=0,O=0;g<E.truncDivision(_,2)-1;g+=15,O+=16)for(b=1&E.truncDivision(p,2);b<p;b+=2)v.set(E.truncDivision(p,2)-O,b),v.set(E.truncDivision(p,2)+O,b),v.set(b,E.truncDivision(p,2)-O),v.set(b,E.truncDivision(p,2)+O);var D=new ro;return D.setCompact(o),D.setSize(p),D.setLayers(i),D.setCodeWords(m),D.setMatrix(v),D},t.drawBullsEye=function(t,e,r){for(var n=0;n<r;n+=2)for(var o=e-n;o<=e+n;o++)t.set(o,e-n),t.set(o,e+n),t.set(e-n,o),t.set(e+n,o);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)},t.generateModeMessage=function(e,r,n){var o=new y;return e?(o.appendBits(r-1,2),o.appendBits(n-1,6),o=t.generateCheckWords(o,28,4)):(o.appendBits(r-1,5),o.appendBits(n-1,11),o=t.generateCheckWords(o,40,4)),o},t.drawModeMessage=function(t,e,r,n){var o=E.truncDivision(r,2);if(e)for(var i=0;i<7;i++){var a=o-3+i;n.get(i)&&t.set(a,o-5),n.get(i+7)&&t.set(o+5,a),n.get(20-i)&&t.set(a,o+5),n.get(27-i)&&t.set(o-5,a)}else for(i=0;i<10;i++)a=o-5+i+E.truncDivision(i,5),n.get(i)&&t.set(a,o-7),n.get(i+10)&&t.set(o+7,a),n.get(29-i)&&t.set(a,o+7),n.get(39-i)&&t.set(o-7,a)},t.generateCheckWords=function(e,r,n){var o,i,a=e.getSize()/n,s=new Hn(t.getGF(n)),u=E.truncDivision(r,n),c=t.bitsToWords(e,n,u);s.encode(c,u-a);var h=r%n,l=new y;l.appendBits(0,h);try{for(var d=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Array.from(c)),f=d.next();!f.done;f=d.next())l.appendBits(f.value,n)}catch(g){o={error:g}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}return l},t.bitsToWords=function(t,e,r){var n,o,i=new Int32Array(r);for(n=0,o=t.getSize()/e;n<o;n++){for(var a=0,s=0;s<e;s++)a|=t.get(n*e+s)?1<<e-s-1:0;i[n]=a}return i},t.getGF=function(t){switch(t){case 4:return ut.AZTEC_PARAM;case 6:return ut.AZTEC_DATA_6;case 8:return ut.AZTEC_DATA_8;case 10:return ut.AZTEC_DATA_10;case 12:return ut.AZTEC_DATA_12;default:throw new h("Unsupported word size "+t)}},t.stuffBits=function(t,e){for(var r=new y,n=t.getSize(),o=(1<<e)-2,i=0;i<n;i+=e){for(var a=0,s=0;s<e;s++)(i+s>=n||t.get(i+s))&&(a|=1<<e-1-s);(a&o)===o?(r.appendBits(a&o,e),i--):0==(a&o)?(r.appendBits(1|a,e),i--):r.appendBits(a,e)}return r},t.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t}();!function(){function t(){}t.prototype.encode=function(t,e,r,n){return this.encodeWithHints(t,e,r,n,null)},t.prototype.encodeWithHints=function(e,r,n,o,i){var a=eo.ISO_8859_1,s=_o.DEFAULT_EC_PERCENT,u=_o.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(Un.CHARACTER_SET)&&(a=to.forName(i.get(Un.CHARACTER_SET).toString())),i.has(Un.ERROR_CORRECTION)&&(s=E.parseInt(i.get(Un.ERROR_CORRECTION).toString())),i.has(Un.AZTEC_LAYERS)&&(u=E.parseInt(i.get(Un.AZTEC_LAYERS).toString()))),t.encodeLayers(e,r,n,o,a,s,u)},t.encodeLayers=function(e,r,n,o,i,a,s){if(r!==$.AZTEC)throw new h("Can only encode AZTEC, but got "+r);var u=_o.encode(P.getBytes(e,i),a,s);return t.renderResult(u,n,o)},t.renderResult=function(t,e,r){var n=t.getMatrix();if(null==n)throw new dt;for(var o=n.getWidth(),i=n.getHeight(),a=Math.max(e,o),s=Math.max(r,i),u=Math.min(a/o,s/i),c=(a-o*u)/2,h=(s-i*u)/2,l=new L(a,s),d=0,f=h;d<i;d++,f+=u)for(var g=0,p=c;g<o;g++,p+=u)n.get(g,d)&&l.setRegion(p,f,u,u);return l}}();class Co extends G{constructor(t){super(t.width,t.height),this.canvas=t,this.buffer=Co.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const e=t.getContext("2d");if(!e)throw new Error("Couldn't get canvas context.");const r=e.getImageData(0,0,t.width,t.height);return Co.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,e,r){const n=new Uint8ClampedArray(e*r);for(let o=0,i=0,a=t.length;o<a;o+=4,i++){let e;e=0===t[o+3]?255:306*t[o]+601*t[o+1]+117*t[o+2]+512>>10,n[i]=e}return n}getRow(t,e){if(t<0||t>=this.getHeight())throw new h("Requested row is outside the image: "+t);const r=this.getWidth(),n=t*r;return null===e?e=this.buffer.slice(n,n+r):(e.length<r&&(e=new Uint8ClampedArray(r)),e.set(this.buffer.slice(n,n+r))),e}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,e,r,n){return super.crop(t,e,r,n),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}invert(){return new W(this)}getTempCanvasElement(){if(null===this.tempCanvasElement){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const e=this.getTempCanvasElement();if(!e)throw new Error("Could not create a Canvas element.");const r=t*Co.DEGREE_TO_RADIANS,n=this.canvas.width,o=this.canvas.height,i=Math.ceil(Math.abs(Math.cos(r))*n+Math.abs(Math.sin(r))*o),a=Math.ceil(Math.abs(Math.sin(r))*n+Math.abs(Math.cos(r))*o);e.width=i,e.height=a;const s=e.getContext("2d");if(!s)throw new Error("Could not create a Convas Context element.");return s.translate(i/2,a/2),s.rotate(r),s.drawImage(this.canvas,n/-2,o/-2),this.buffer=Co.makeBufferFromCanvasImageData(e),this}}function Eo(){return"undefined"!=typeof navigator}Co.DEGREE_TO_RADIANS=Math.PI/180;var yo=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(e){i(e)}}function s(t){try{u(n.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})};const Io={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3};class So{constructor(t,e=new Map,r={}){this.reader=t,this.hints=e,this.options=Object.assign(Object.assign({},Io),r)}set possibleFormats(t){this.hints.set(S.POSSIBLE_FORMATS,t)}static addVideoSource(t,e){try{t.srcObject=e}catch(r){t.src=URL.createObjectURL(e)}}static mediaStreamSetTorch(t,e){return yo(this,void 0,void 0,function*(){yield t.applyConstraints({advanced:[{fillLightMode:e?"flash":"off",torch:!!e}]})})}static mediaStreamIsTorchCompatible(t){const e=t.getVideoTracks();for(const r of e)if(So.mediaStreamIsTorchCompatibleTrack(r))return!0;return!1}static mediaStreamIsTorchCompatibleTrack(t){try{return"torch"in t.getCapabilities()}catch(e){return console.error(e),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}}static isVideoPlaying(t){return t.currentTime>0&&!t.paused&&t.readyState>2}static getMediaElement(t,e){const r=document.getElementById(t);if(!r)throw new u(`element with id '${t}' not found`);if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new u(`element with id '${t}' must be an ${e} element`);return r}static createVideoElement(t){if(t instanceof HTMLVideoElement)return t;if("string"==typeof t)return So.getMediaElement(t,"video");if(!t&&"undefined"!=typeof document){const t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")}static prepareImageElement(t){if(t instanceof HTMLImageElement)return t;if("string"==typeof t)return So.getMediaElement(t,"img");if(void 0===t){const t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")}static prepareVideoElement(t){const e=So.createVideoElement(t);return e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e}static isImageLoaded(t){return!!t.complete&&0!==t.naturalWidth}static createBinaryBitmapFromCanvas(t){const e=new Co(t),r=new H(e);return new l(r)}static drawImageOnCanvas(t,e){t.drawImage(e,0,0)}static getMediaElementDimensions(t){if(t instanceof HTMLVideoElement)return{height:t.videoHeight,width:t.videoWidth};if(t instanceof HTMLImageElement)return{height:t.naturalHeight||t.height,width:t.naturalWidth||t.width};throw new Error("Couldn't find the Source's dimentions!")}static createCaptureCanvas(t){if(!t)throw new u("Cannot create a capture canvas without a media element.");if("undefined"==typeof document)throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');const e=document.createElement("canvas"),{width:r,height:n}=So.getMediaElementDimensions(t);return e.style.width=r+"px",e.style.height=n+"px",e.width=r,e.height=n,e}static tryPlayVideo(t){return yo(this,void 0,void 0,function*(){if(null==t?void 0:t.ended)return console.error("Trying to play video that has ended."),!1;if(So.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),!0;try{return yield t.play(),!0}catch(e){return console.warn("It was not possible to play the video.",e),!1}})}static createCanvasFromMediaElement(t){const e=So.createCaptureCanvas(t),r=e.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return So.drawImageOnCanvas(r,t),e}static createBinaryBitmapFromMediaElem(t){const e=So.createCanvasFromMediaElement(t);return So.createBinaryBitmapFromCanvas(e)}static destroyImageElement(t){t.src="",t.removeAttribute("src"),t=void 0}static listVideoInputDevices(){return yo(this,void 0,void 0,function*(){if(!Eo())throw new Error("Can't enumerate devices, navigator is not present.");if(!(Eo()&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices))throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),e=[];for(const r of t){const t="video"===r.kind?"videoinput":r.kind;"videoinput"===t&&e.push({deviceId:r.deviceId||r.id,label:r.label||`Video device ${e.length+1}`,kind:t,groupId:r.groupId})}return e})}static findDeviceById(t){return yo(this,void 0,void 0,function*(){const e=yield So.listVideoInputDevices();if(e)return e.find(e=>e.deviceId===t)})}static cleanVideoSource(t){if(t){try{t.srcObject=null}catch(e){t.src=""}t&&t.removeAttribute("src")}}static playVideoOnLoadAsync(t,e){return yo(this,void 0,void 0,function*(){return!!(yield So.tryPlayVideo(t))||new Promise((r,n)=>{const o=setTimeout(()=>{So.isVideoPlaying(t)||(n(!1),t.removeEventListener("canplay",i))},e),i=()=>{So.tryPlayVideo(t).then(e=>{clearTimeout(o),t.removeEventListener("canplay",i),r(e)})};t.addEventListener("canplay",i)})})}static attachStreamToVideo(t,e,r=5e3){return yo(this,void 0,void 0,function*(){const n=So.prepareVideoElement(e);return So.addVideoSource(n,t),yield So.playVideoOnLoadAsync(n,r),n})}static _waitImageLoad(t){return new Promise((e,r)=>{const n=setTimeout(()=>{So.isImageLoaded(t)||(t.removeEventListener("load",o),r())},1e4),o=()=>{clearTimeout(n),t.removeEventListener("load",o),e()};t.addEventListener("load",o)})}static checkCallbackFnOrThrow(t){if(!t)throw new u("`callbackFn` is a required parameter, you cannot capture results without it.")}static disposeMediaStream(t){t.getVideoTracks().forEach(t=>t.stop()),t=void 0}decode(t){const e=So.createCanvasFromMediaElement(t);return this.decodeFromCanvas(e)}decodeBitmap(t){return this.reader.decode(t,this.hints)}decodeFromCanvas(t){const e=So.createBinaryBitmapFromCanvas(t);return this.decodeBitmap(e)}decodeFromImageElement(t){return yo(this,void 0,void 0,function*(){if(!t)throw new u("An image element must be provided.");const e=So.prepareImageElement(t);return yield this._decodeOnLoadImage(e)})}decodeFromImageUrl(t){return yo(this,void 0,void 0,function*(){if(!t)throw new u("An URL must be provided.");const e=So.prepareImageElement();e.src=t;try{return yield this.decodeFromImageElement(e)}finally{So.destroyImageElement(e)}})}decodeFromConstraints(t,e,r){return yo(this,void 0,void 0,function*(){So.checkCallbackFnOrThrow(r);const n=yield navigator.mediaDevices.getUserMedia(t);try{return yield this.decodeFromStream(n,e,r)}catch(o){throw So.disposeMediaStream(n),o}})}decodeFromStream(t,e,r){return yo(this,void 0,void 0,function*(){So.checkCallbackFnOrThrow(r);const n=this.options.tryPlayVideoTimeout,o=yield So.attachStreamToVideo(t,e,n),i=this.scan(o,r,()=>{(()=>{for(const e of t.getVideoTracks())e.stop();t=void 0})(),So.cleanVideoSource(o)}),a=t.getVideoTracks(),s=Object.assign(Object.assign({},i),{stop(){i.stop()},streamVideoConstraintsApply(t,e){return yo(this,void 0,void 0,function*(){const r=e?a.filter(e):a;for(const e of r)yield e.applyConstraints(t)})},streamVideoConstraintsGet:t=>a.find(t).getConstraints(),streamVideoSettingsGet:t=>a.find(t).getSettings(),streamVideoCapabilitiesGet:t=>a.find(t).getCapabilities()});if(So.mediaStreamIsTorchCompatible(t)){const t=null==a?void 0:a.find(t=>So.mediaStreamIsTorchCompatibleTrack(t)),e=e=>yo(this,void 0,void 0,function*(){yield So.mediaStreamSetTorch(t,e)});s.switchTorch=e,s.stop=()=>{i.stop(),e(!1)}}return s})}decodeFromVideoDevice(t,e,r){return yo(this,void 0,void 0,function*(){let n;So.checkCallbackFnOrThrow(r),n=t?{deviceId:{exact:t}}:{facingMode:"environment"};const o={video:n};return yield this.decodeFromConstraints(o,e,r)})}decodeFromVideoElement(t,e){return yo(this,void 0,void 0,function*(){if(So.checkCallbackFnOrThrow(e),!t)throw new u("A video element must be provided.");const r=So.prepareVideoElement(t),n=this.options.tryPlayVideoTimeout;return yield So.playVideoOnLoadAsync(r,n),this.scan(r,e)})}decodeFromVideoUrl(t,e){return yo(this,void 0,void 0,function*(){if(So.checkCallbackFnOrThrow(e),!t)throw new u("An URL must be provided.");const r=So.prepareVideoElement();r.src=t;const n=this.options.tryPlayVideoTimeout;return yield So.playVideoOnLoadAsync(r,n),this.scan(r,e,()=>{So.cleanVideoSource(r)})})}decodeOnceFromConstraints(t,e){return yo(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(r,e)})}decodeOnceFromStream(t,e){return yo(this,void 0,void 0,function*(){const r=Boolean(e),n=yield So.attachStreamToVideo(t,e);try{return yield this.scanOneResult(n)}finally{r||So.cleanVideoSource(n)}})}decodeOnceFromVideoDevice(t,e){return yo(this,void 0,void 0,function*(){let r;r=t?{deviceId:{exact:t}}:{facingMode:"environment"};const n={video:r};return yield this.decodeOnceFromConstraints(n,e)})}decodeOnceFromVideoElement(t){return yo(this,void 0,void 0,function*(){if(!t)throw new u("A video element must be provided.");const e=So.prepareVideoElement(t),r=this.options.tryPlayVideoTimeout;return yield So.playVideoOnLoadAsync(e,r),yield this.scanOneResult(e)})}decodeOnceFromVideoUrl(t){return yo(this,void 0,void 0,function*(){if(!t)throw new u("An URL must be provided.");const e=So.prepareVideoElement();e.src=t;const r=this.decodeOnceFromVideoElement(e);try{return yield r}finally{So.cleanVideoSource(e)}})}scanOneResult(t,e=!0,r=!0,n=!0){return new Promise((o,i)=>{this.scan(t,(t,a,s)=>{if(t)return o(t),void s.stop();if(a){if(a instanceof k&&e)return;if(a instanceof f&&r)return;if(a instanceof T&&n)return;s.stop(),i(a)}})})}scan(t,e,r){So.checkCallbackFnOrThrow(e);let n=So.createCaptureCanvas(t),o=n.getContext("2d");if(!o)throw new Error("Couldn't create canvas for visual element scan.");const i=()=>{o=void 0,n=void 0};let a,s=!1;const u={stop:()=>{s=!0,clearTimeout(a),i(),r&&r()}},c=()=>{if(!s)try{So.drawImageOnCanvas(o,t);const r=this.decodeFromCanvas(n);e(r,void 0,u),a=setTimeout(c,this.options.delayBetweenScanSuccess)}catch(h){e(void 0,h,u);const t=h instanceof T,n=h instanceof k;if(h instanceof f||t||n)return void(a=setTimeout(c,this.options.delayBetweenScanAttempts));i(),r&&r(h)}};return c(),u}_decodeOnLoadImage(t){return yo(this,void 0,void 0,function*(){return So.isImageLoaded(t)||(yield So._waitImageLoad(t)),this.decode(t)})}}const vo="http://www.w3.org/2000/svg";class To{constructor(t){if("string"==typeof t){const e=document.getElementById(t);if(!e)throw new Error(`Could not find a Container element with '${t}'.`);this.containerElement=e}else this.containerElement=t}write(t,e,r,n){if(0===t.length)throw new h("Found empty contents");if(e<0||r<0)throw new h("Requested dimensions are too small: "+e+"x"+r);const o=n&&void 0!==n.get(Un.MARGIN)?Number.parseInt(n.get(Un.MARGIN).toString(),10):To.QUIET_ZONE_SIZE,i=this.encode(n,t);return this.renderResult(i,e,r,o)}createSVGElement(t,e){const r=document.createElementNS(To.SVG_NS,"svg");return r.setAttributeNS(vo,"width",e.toString()),r.setAttributeNS(vo,"height",t.toString()),r}createSvgPathPlaceholderElement(t,e){const r=document.createElementNS(To.SVG_NS,"path");return r.setAttributeNS(vo,"d",`M0 0h${t}v${e}H0z`),r.setAttributeNS(vo,"fill","none"),r}createSvgRectElement(t,e,r,n){const o=document.createElementNS(To.SVG_NS,"rect");return o.setAttributeNS(vo,"x",t.toString()),o.setAttributeNS(vo,"y",e.toString()),o.setAttributeNS(vo,"height",r.toString()),o.setAttributeNS(vo,"width",n.toString()),o.setAttributeNS(vo,"fill","#000000"),o}encode(t,e){let r=Er.L;if(t&&void 0!==t.get(Un.ERROR_CORRECTION)){const e=t.get(Un.ERROR_CORRECTION).toString();r=Er.fromString(e)}return qn.encode(e,r,t)}renderResult(t,e,r,n){const o=t.getMatrix();if(null===o)throw new dt;const i=o.getWidth(),a=o.getHeight(),s=i+2*n,u=a+2*n,c=Math.max(e,s),h=Math.max(r,u),l=Math.min(Math.floor(c/s),Math.floor(h/u)),d=Math.floor((c-i*l)/2),f=Math.floor((h-a*l)/2),g=this.createSVGElement(c,h),p=this.createSvgPathPlaceholderElement(e,r);g.appendChild(p),this.containerElement.appendChild(g);for(let w=0,m=f;w<a;w++,m+=l)for(let t=0,e=d;t<i;t++,e+=l)if(1===o.get(t,w)){const t=this.createSvgRectElement(e,m,l,l);g.appendChild(t)}return g}}To.QUIET_ZONE_SIZE=4,To.SVG_NS="http://www.w3.org/2000/svg";const Ro="http://www.w3.org/2000/svg";class Oo{write(t,e,r,n){if(0===t.length)throw new h("Found empty contents");if(e<0||r<0)throw new h("Requested dimensions are too small: "+e+"x"+r);let o=Er.L,i=Oo.QUIET_ZONE_SIZE;if(n){if(void 0!==n.get(Un.ERROR_CORRECTION)){const t=n.get(Un.ERROR_CORRECTION).toString();o=Er.fromString(t)}void 0!==n.get(Un.MARGIN)&&(i=Number.parseInt(n.get(Un.MARGIN).toString(),10))}const a=qn.encode(t,o,n);return this.renderResult(a,e,r,i)}writeToDom(t,e,r,n,o){if("string"==typeof t){const e=document.querySelector(t);if(!e)throw new Error("Could no find the target HTML element.");t=e}const i=this.write(e,r,n,o);t instanceof HTMLElement&&t.appendChild(i)}renderResult(t,e,r,n){const o=t.getMatrix();if(null===o)throw new dt;const i=o.getWidth(),a=o.getHeight(),s=i+2*n,u=a+2*n,c=Math.max(e,s),h=Math.max(r,u),l=Math.min(Math.floor(c/s),Math.floor(h/u)),d=Math.floor((c-i*l)/2),f=Math.floor((h-a*l)/2),g=this.createSVGElement(c,h);for(let p=0,w=f;p<a;p++,w+=l)for(let t=0,e=d;t<i;t++,e+=l)if(1===o.get(t,p)){const t=this.createSvgRectElement(e,w,l,l);g.appendChild(t)}return g}createSVGElement(t,e){const r=document.createElementNS(Ro,"svg");return r.setAttribute("height",t.toString()),r.setAttribute("width",e.toString()),r}createSvgRectElement(t,e,r,n){const o=document.createElementNS(Ro,"rect");return o.setAttribute("x",t.toString()),o.setAttribute("y",e.toString()),o.setAttribute("height",r.toString()),o.setAttribute("width",n.toString()),o.setAttribute("fill","#000000"),o}}Oo.QUIET_ZONE_SIZE=4,t.BarcodeFormat=$,t.BrowserAztecCodeReader=class extends So{constructor(t,e){super(new Dt,t,e)}},t.BrowserCodeReader=So,t.BrowserCodeSvgWriter=To,t.BrowserDatamatrixCodeReader=class extends So{constructor(t,e){super(new Ar,t,e)}},t.BrowserMultiFormatOneDReader=class extends So{constructor(t,e){super(new or(t),t,e)}},t.BrowserMultiFormatReader=class extends So{constructor(t,e){const r=new Fn;r.setHints(t),super(r,t,e),this.reader=r}set possibleFormats(t){this.hints.set(S.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)}decodeBitmap(t){return this.reader.decodeWithState(t)}setHints(t){this.hints=t,this.reader.setHints(this.hints)}},t.BrowserPDF417Reader=class extends So{constructor(t,e){super(new Mn,t,e)}},t.BrowserQRCodeReader=class extends So{constructor(t,e){super(new jr,t,e)}},t.BrowserQRCodeSvgWriter=Oo,t.HTMLCanvasElementLuminanceSource=Co,Object.defineProperty(t,"__esModule",{value:!0})}(e)},z57d:function(t,e,r){"use strict";r.r(e),r.d(e,"QrScanPageModule",function(){return C});var n=r("ofXK"),o=r("3Pt+"),i=r("TEn/"),a=r("tyNb"),s=r("KBVK"),u=r("fXoL"),c=r("mrSG"),h=r("R7y3"),l=r("2Vo4");const d=["preview"];class f extends h.BrowserMultiFormatReader{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(t,e){var r;return Object(c.a)(this,void 0,void 0,function*(){const n=new l.a({});let o;try{o=yield this.decodeFromVideoDevice(t,e,(t,e)=>{if(!e)return void n.next({result:t});const r=e.name;r===s.NotFoundException.name||r===s.ChecksumException.name||r===s.FormatException.name||e.message.includes("No MultiFormat Readers were able to detect the code.")?n.next({error:e}):(n.error(e),this.scannerControls.stop(),this.scannerControls=void 0)}),this.scannerControls=Object.assign(Object.assign({},o),{stop(){o.stop(),n.complete()}})}catch(i){n.error(i),null===(r=this.scannerControls)||void 0===r||r.stop(),this.scannerControls=void 0}return n.asObservable()})}}let g=(()=>{class t{constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this._ready=!1,this.autostarted=new u.o,this.autostarting=new u.o,this.torchCompatible=new u.o(!1),this.scanSuccess=new u.o,this.scanFailure=new u.o,this.scanError=new u.o,this.scanComplete=new u.o,this.camerasFound=new u.o,this.camerasNotFound=new u.o,this.permissionResponse=new u.o(!0),this.hasDevices=new u.o,this.deviceChange=new u.o,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[s.BarcodeFormat.QR_CODE],this.hasNavigator="undefined"!=typeof navigator,this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}get codeReader(){return this._codeReader}set device(t){this._ready?this.isAutostarting?console.warn("Avoid setting a device during auto-start."):this.isCurrentDevice(t)?console.warn("Setting the same device is not allowed."):this.hasPermission?this.setDevice(t):console.warn("Permissions not set yet, waiting for them to be set to apply device change."):this._devicePreStart=t}get device(){return this._device}get formats(){return this.hints.get(s.DecodeHintType.POSSIBLE_FORMATS)}set formats(t){if("string"==typeof t)throw new Error("Invalid formats, make sure the [formats] input is a binding.");const e=t.map(t=>this.getBarcodeFormatOrFail(t)),r=this.hints;r.set(s.DecodeHintType.POSSIBLE_FORMATS,e),this.hints=r}get hints(){return this._hints}set hints(t){var e;this._hints=t,null===(e=this.codeReader)||void 0===e||e.setHints(this._hints)}set videoConstraints(t){var e;const r=null===(e=this.codeReader)||void 0===e?void 0:e.getScannerControls();r&&(null==r||r.streamVideoConstraintsApply(t))}set isAutostarting(t){this._isAutostarting=t,this.autostarting.next(t)}get isAutostarting(){return this._isAutostarting}set torch(t){try{this.getCodeReader().getScannerControls().switchTorch(t)}catch(e){}}set enable(t){this._enabled=Boolean(t),this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():this.reset()}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(s.DecodeHintType.TRY_HARDER)}set tryHarder(t){const e=this.hints;t?e.set(s.DecodeHintType.TRY_HARDER,!0):e.delete(s.DecodeHintType.TRY_HARDER),this.hints=e}askForPermission(){return Object(c.a)(this,void 0,void 0,function*(){if(!this.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),this.setPermission(null),this.hasPermission;if(!this.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),this.setPermission(null),this.hasPermission;let t,e;try{t=yield this.getAnyVideoDevice(),e=!!t}catch(r){return this.handlePermissionException(r)}finally{this.terminateStream(t)}return this.setPermission(e),e})}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(t){t&&t.getTracks().forEach(t=>t.stop()),t=void 0}init(){return Object(c.a)(this,void 0,void 0,function*(){if(!this.autostart)return console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),this.initAutostartOff(),void(this._ready=!0);yield this.initAutostartOn(),this._ready=!0})}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){return Object(c.a)(this,void 0,void 0,function*(){let t;this.isAutostarting=!0;try{t=yield this.askForPermission()}catch(e){return void console.error("Exception occurred while asking for permission:",e)}if(t){const t=yield this.updateVideoInputDevices();yield this.autostartScanner([...t])}this.isAutostarting=!1,this.autostarted.next()})}isCurrentDevice(t){var e;return(null==t?void 0:t.deviceId)===(null===(e=this._device)||void 0===e?void 0:e.deviceId)}ngOnDestroy(){this.reset()}ngOnInit(){this.init()}scanStop(){var t,e;this._scanSubscription&&(null===(t=this.codeReader)||void 0===t||t.getScannerControls().stop(),null===(e=this._scanSubscription)||void 0===e||e.unsubscribe(),this._scanSubscription=void 0),this.torchCompatible.next(!1)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan proccess running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;const t=this._reset();t&&(this.device=t)}updateVideoInputDevices(){return Object(c.a)(this,void 0,void 0,function*(){const t=(yield h.BrowserCodeReader.listVideoInputDevices())||[],e=t&&t.length>0;return this.hasDevices.next(e),this.camerasFound.next([...t]),e||this.camerasNotFound.next(),t})}autostartScanner(t){return Object(c.a)(this,void 0,void 0,function*(){const e=t.find(({label:t})=>/back|tr\xe1s|rear|traseira|environment|ambiente/gi.test(t))||t.pop();if(!e)throw new Error("Impossible to autostart, no input devices available.");yield this.setDevice(e),this.deviceChange.next(e)})}dispatchScanSuccess(t){this.scanSuccess.next(t.getText())}dispatchScanFailure(t){this.scanFailure.next(t)}dispatchScanError(t){this.scanError.observers.some(t=>Boolean(t))||(console.error(`zxing scanner component: ${t.name}`,t),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(t)}dispatchScanComplete(t){this.scanComplete.next(t)}handlePermissionException(t){let e;switch(console.error("@zxing/ngx-scanner","Error when asking for permission.",t),t.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",t.message),e=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",t.message),e=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",t.message),e=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),e=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",t),e=null}return this.setPermission(e),this.permissionResponse.error(t),e}getBarcodeFormatOrFail(t){return"string"==typeof t?s.BarcodeFormat[t.trim().toUpperCase()]:t}getCodeReader(){return this._codeReader||(this._codeReader=new f(this.hints,{delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess})),this._codeReader}scanFromDevice(t){return Object(c.a)(this,void 0,void 0,function*(){const e=this.previewElemRef.nativeElement,r=this.getCodeReader(),n=yield r.scanFromDeviceObservable(t,e);if(!n)throw new Error("Undefined decoding stream, aborting.");if(this._scanSubscription=n.subscribe(t=>this._onDecodeResult(t.result,t.error),t=>this._onDecodeError(t),()=>{}),this._scanSubscription.closed)return;const o=r.getScannerControls();this.torchCompatible.next(void 0!==o.switchTorch)})}_onDecodeError(t){this.dispatchScanError(t)}_onDecodeResult(t,e){t?this.dispatchScanSuccess(t):this.dispatchScanFailure(e),this.dispatchScanComplete(t)}_reset(){if(!this._codeReader)return;const t=this._device;return this.device=void 0,this._codeReader=void 0,t}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(t){return Object(c.a)(this,void 0,void 0,function*(){this.scanStop(),this._device=t||void 0,this._device||h.BrowserCodeReader.cleanVideoSource(this.previewElemRef.nativeElement),this._enabled&&t&&(yield this.scanFromDevice(t.deviceId))})}setPermission(t){this.hasPermission=t,this.permissionResponse.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Fb({type:t,selectors:[["zxing-scanner"]],viewQuery:function(t,e){if(1&t&&u.yc(d,3),2&t){let t;u.kc(t=u.ac())&&(e.previewElemRef=t.first)}},inputs:{timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",previewFitMode:"previewFitMode",autofocusEnabled:"autofocusEnabled",autostart:"autostart",formats:"formats",device:"device",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},decls:6,vars:2,consts:[["preview",""]],template:function(t,e){1&t&&(u.Rb(0,"video",null,0),u.Rb(2,"p"),u.uc(3," Your browser does not support this feature, please try to upgrade it. "),u.Qb(),u.Rb(4,"p"),u.uc(5," Seu navegador n\xe3o suporta este recurso, por favor tente atualiz\xe1-lo. "),u.Qb(),u.Qb()),2&t&&u.rc("object-fit",e.previewFitMode)},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{-o-object-fit:contain;height:auto;object-fit:contain;width:100%}"],changeDetection:0}),t})(),p=(()=>{class t{}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)},imports:[[n.c,o.d]]}),t})();const w=["scanner"];function m(t,e){if(1&t&&u.Mb(0,"ion-img",3),2&t){const t=u.bc();u.gc("src",t.imgScanner)}}const A=[{path:"",component:(()=>{class t{constructor(){this.scannerEnabled=!1,this.torch=!1,this.allowedFormats=[s.BarcodeFormat.AZTEC,s.BarcodeFormat.CODABAR,s.BarcodeFormat.CODE_39,s.BarcodeFormat.CODE_93,s.BarcodeFormat.CODE_128,s.BarcodeFormat.DATA_MATRIX,s.BarcodeFormat.EAN_8,s.BarcodeFormat.EAN_13,s.BarcodeFormat.ITF,s.BarcodeFormat.MAXICODE,s.BarcodeFormat.PDF_417,s.BarcodeFormat.QR_CODE,s.BarcodeFormat.RSS_14,s.BarcodeFormat.RSS_EXPANDED,s.BarcodeFormat.UPC_A,s.BarcodeFormat.UPC_E,s.BarcodeFormat.UPC_EAN_EXTENSION],this.imgScanner=""}ngOnInit(){}commenzarScanneo(){this.scannerEnabled=!0,this.torch=!0}onTorchCompatible(t){console.log("onTorchCompatible",t)}camerasFoundHandler(t){this.desiredDevice=t[0],console.log(this.desiredDevice),console.log("camerasFoundHandler",t)}camerasNotFoundHandler(t){console.log("camerasNotFoundHandler",t)}scanSuccessHandler(t){console.log("scanSuccessHandler",t)}scanErrorHandler(t){console.log("scanErrorHandler",t)}scanFailureHandler(t){console.log("scanFailureHandler",t)}scanCompleteHandler(t){t&&(this.scannerEnabled=!1),console.log("scanCompleteHandler",t)}ToBase64(t){return btoa(String.fromCharCode.apply(null,t))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Fb({type:t,selectors:[["app-qr-scan"]],viewQuery:function(t,e){if(1&t&&u.yc(w,1),2&t){let t;u.kc(t=u.ac())&&(e.scanner=t.first)}},decls:10,vars:5,consts:[["expand","block","fill","clear","shape","round",3,"click"],[3,"src",4,"ngIf"],[3,"enable","device","torch","formats","deviceChange","torchCompatible","camerasFound","camerasNotFound","scanSuccess","scanError","scanFailure","scanComplete"],[3,"src"]],template:function(t,e){1&t&&(u.Rb(0,"ion-header"),u.Rb(1,"ion-toolbar"),u.Rb(2,"ion-title"),u.uc(3,"qr-scan"),u.Qb(),u.Qb(),u.Qb(),u.Rb(4,"ion-content"),u.Rb(5,"ion-list"),u.Rb(6,"ion-button",0),u.Zb("click",function(){return e.commenzarScanneo()}),u.uc(7," Click me "),u.Qb(),u.sc(8,m,1,1,"ion-img",1),u.Qb(),u.Rb(9,"zxing-scanner",2),u.Zb("deviceChange",function(t){return e.desiredDevice=t})("torchCompatible",function(t){return e.onTorchCompatible(t)})("camerasFound",function(t){return e.camerasFoundHandler(t)})("camerasNotFound",function(t){return e.camerasNotFoundHandler(t)})("scanSuccess",function(t){return e.scanSuccessHandler(t)})("scanError",function(t){return e.scanErrorHandler(t)})("scanFailure",function(t){return e.scanFailureHandler(t)})("scanComplete",function(t){return e.scanCompleteHandler(t)}),u.Qb(),u.Qb()),2&t&&(u.zb(8),u.gc("ngIf",e.imgScanner),u.zb(1),u.gc("enable",e.scannerEnabled)("device",e.desiredDevice)("torch",e.torch)("formats",e.allowedFormats))},directives:[i.l,i.M,i.L,i.j,i.w,i.b,n.k,g,i.n],styles:[""]}),t})()}];let _=(()=>{class t{}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)},imports:[[a.j.forChild(A)],a.j]}),t})(),C=(()=>{class t{}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)},imports:[[n.c,o.d,i.N,_,p]]}),t})()}}]);